<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.547">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="John Yuill">
<meta name="dcterms.date" content="2023-11-05">
<meta name="description" content="Exploration and analysis of BC Liquor Market Review data covering the years 2016 to 2023, with trends and observations.">

<title>Catbird Analytics - BC Liquor Sales Analysis: Annual Trends 2016-2022</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/cookie-consent/cookie-consent.js"></script>
<link href="../../site_libs/cookie-consent/cookie-consent.css" rel="stylesheet">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-5XF0SHH0KW"></script>

<script type="text/plain" cookie-consent="tracking">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-5XF0SHH0KW', { 'anonymize_ip': true});
</script>

<script type="text/javascript" charset="UTF-8">
document.addEventListener('DOMContentLoaded', function () {
cookieconsent.run({
  "notice_banner_type":"simple",
  "consent_type":"implied",
  "palette":"light",
  "language":"en",
  "page_load_consent_levels":["strictly-necessary","functionality","tracking","targeting"],
  "notice_banner_reject_button_hide":false,
  "preferences_center_close_button_hide":false,
  "website_name":""
  ,
"language":"en"
  });
});
</script> 
  
<script src="../../site_libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<script src="../../site_libs/plotly-binding-4.10.1/plotly.js"></script>
<script src="../../site_libs/typedarray-0.1/typedarray.min.js"></script>
<script src="../../site_libs/jquery-3.5.1/jquery.min.js"></script>
<link href="../../site_libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="../../site_libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="../../site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="../../site_libs/plotly-main-2.11.1/plotly-latest.min.js"></script>


<link rel="stylesheet" href="../../styles.css">
<meta property="og:title" content="Catbird Analytics - BC Liquor Sales Analysis: Annual Trends 2016-2022">
<meta property="og:description" content="">
<meta property="og:image" content="bc-lmr-yoy-vol-chg.png">
<meta property="og:site_name" content="Catbird Analytics">
</head>

<body class="floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Catbird Analytics</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/johnyuill/"> <i class="bi bi-linkedin" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/jyuill"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/johnyuill"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#annual-trends-all-beverage-types" id="toc-annual-trends-all-beverage-types" class="nav-link active" data-scroll-target="#annual-trends-all-beverage-types">Annual Trends: All Beverage Types</a>
  <ul>
  <li><a href="#sales" id="toc-sales" class="nav-link" data-scroll-target="#sales">$ Sales</a>
  <ul class="collapse">
  <li><a href="#year-over-year-change-sales" id="toc-year-over-year-change-sales" class="nav-link" data-scroll-target="#year-over-year-change-sales"><strong>Year-over-Year % Change: ($ Sales)</strong></a></li>
  </ul></li>
  <li><a href="#volume-litres" id="toc-volume-litres" class="nav-link" data-scroll-target="#volume-litres">Volume (Litres)</a>
  <ul class="collapse">
  <li><a href="#year-over-year-change-volume-litres" id="toc-year-over-year-change-volume-litres" class="nav-link" data-scroll-target="#year-over-year-change-volume-litres"><strong>Year-over-Year % Change: Volume (Litres)</strong></a></li>
  </ul></li>
  <li><a href="#litre" id="toc-litre" class="nav-link" data-scroll-target="#litre">$/Litre</a>
  <ul class="collapse">
  <li><a href="#year-over-year-change-litre" id="toc-year-over-year-change-litre" class="nav-link" data-scroll-target="#year-over-year-change-litre"><strong>Year-over-Year % Change: $/Litre</strong></a></li>
  </ul></li>
  </ul></li>
  <li><a href="#annual-trends-by-beverage-type" id="toc-annual-trends-by-beverage-type" class="nav-link" data-scroll-target="#annual-trends-by-beverage-type">Annual Trends: By Beverage Type</a>
  <ul>
  <li><a href="#by-type-sales" id="toc-by-type-sales" class="nav-link" data-scroll-target="#by-type-sales">By Type: $ Sales</a>
  <ul class="collapse">
  <li><a href="#by-type-sales-breakdown" id="toc-by-type-sales-breakdown" class="nav-link" data-scroll-target="#by-type-sales-breakdown"><strong>By Type: $ Sales % Breakdown</strong></a></li>
  <li><a href="#by-type-sales-year-over-year-change" id="toc-by-type-sales-year-over-year-change" class="nav-link" data-scroll-target="#by-type-sales-year-over-year-change"><strong>By Type: $ Sales Year-over-Year % Change</strong></a></li>
  </ul></li>
  <li><a href="#by-type-volume-litres" id="toc-by-type-volume-litres" class="nav-link" data-scroll-target="#by-type-volume-litres">By Type: Volume (Litres)</a>
  <ul class="collapse">
  <li><a href="#by-type-year-over-year-change-in-sales" id="toc-by-type-year-over-year-change-in-sales" class="nav-link" data-scroll-target="#by-type-year-over-year-change-in-sales"><strong>By Type: Year-over-Year % Change in $ Sales</strong></a></li>
  </ul></li>
  <li><a href="#by-type-litre" id="toc-by-type-litre" class="nav-link" data-scroll-target="#by-type-litre">By Type: $/Litre</a>
  <ul class="collapse">
  <li><a href="#by-type-year-over-year-change-in-litre" id="toc-by-type-year-over-year-change-in-litre" class="nav-link" data-scroll-target="#by-type-year-over-year-change-in-litre"><strong>By Type: Year-over-Year % Change in $/Litre</strong></a></li>
  </ul></li>
  </ul></li>
  <li><a href="#litre-vs-volume-and-sales" id="toc-litre-vs-volume-and-sales" class="nav-link" data-scroll-target="#litre-vs-volume-and-sales">$/Litre vs Volume and $ Sales</a>
  <ul>
  <li><a href="#changes-in-litre-vs-changes-in-volume" id="toc-changes-in-litre-vs-changes-in-volume" class="nav-link" data-scroll-target="#changes-in-litre-vs-changes-in-volume"><strong>Changes in $/Litre vs Changes in Volume</strong></a></li>
  <li><a href="#changes-in-litre-vs-changes-in-volume-1" id="toc-changes-in-litre-vs-changes-in-volume-1" class="nav-link" data-scroll-target="#changes-in-litre-vs-changes-in-volume-1"><strong>Changes in $/Litre vs Changes in Volume</strong></a></li>
  </ul></li>
  <li><a href="#part-1-wrap-up-next-up" id="toc-part-1-wrap-up-next-up" class="nav-link" data-scroll-target="#part-1-wrap-up-next-up">Part 1 Wrap-up &amp; Next-up</a>
  <ul>
  <li><a href="#next-up" id="toc-next-up" class="nav-link" data-scroll-target="#next-up">Next-up:</a></li>
  </ul></li>
  <li><a href="#footnotes" id="toc-footnotes" class="nav-link" data-scroll-target="#footnotes">Footnotes</a></li>
  <li><a href="#section" id="toc-section" class="nav-link" data-scroll-target="#section"></a></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">BC Liquor Sales Analysis: Annual Trends 2016-2022</h1>
  <div class="quarto-categories">
    <div class="quarto-category">liquor stats</div>
    <div class="quarto-category">reporting</div>
    <div class="quarto-category">analysis</div>
    <div class="quarto-category">R</div>
  </div>
  </div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>John Yuill </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">November 5, 2023</p>
    </div>
  </div>
  
    <div>
    <div class="quarto-title-meta-heading">Modified</div>
    <div class="quarto-title-meta-contents">
      <p class="date-modified">November 13, 2023</p>
    </div>
  </div>
    
  </div>
  


</header>


<p><strong>British Columbia Liquor Distribution Board</strong> releases its ‘<a href="https://www.bcldb.com/publications/liquor-market-review"><strong>Liquor Market Review</strong></a>’ on a quarterly basis, covering dollar and litre sales across major alcoholic beverage types of <strong>beer</strong>, <strong>wine</strong>, <strong>spirits</strong>, and <strong>‘refreshment beverages’</strong> (ciders, coolers).</p>
<p>This is a combined look using reports going back to 2015, when the current format was started.</p>
<p><strong>Note:</strong> <em>my expertise is in data analysis, not the liquor industry, so the emphasis is on exploring what the data can tell us. Industry-insider context may be lacking. In the interest of promoting data analysis, I am sharing most of the R code used to process the data - hence the expandable ‘Code’ options.</em></p>
<section id="annual-trends-all-beverage-types" class="level2">
<h2 class="anchored" data-anchor-id="annual-trends-all-beverage-types">Annual Trends: All Beverage Types</h2>
<p>(Based on calendar year, using earliest and most recent full year avail.)</p>
<section id="sales" class="level3">
<h3 class="anchored" data-anchor-id="sales">$ Sales</h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># get full years for comparison</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>drop_yr <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2015</span>,<span class="dv">2023</span>) <span class="do">## drop partial yrs for simplicity</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>trend_yr <span class="ot">&lt;-</span> lmr_data <span class="sc">%&gt;%</span> <span class="fu">filter</span>(year<span class="sc">&gt;</span>drop_yr[<span class="dv">1</span>] <span class="sc">&amp;</span> year<span class="sc">&lt;</span>drop_yr[<span class="dv">2</span>]) <span class="sc">%&gt;%</span> </span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">netsales=</span><span class="fu">sum</span>(netsales),</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>                              <span class="at">litres=</span><span class="fu">sum</span>(litres))</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co"># add % chg YoY, $/l</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>trend_yr <span class="ot">&lt;-</span> trend_yr <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">pc_chg_sales=</span>netsales<span class="sc">/</span><span class="fu">lag</span>(netsales)<span class="sc">-</span><span class="dv">1</span>,</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">pc_chg_litres=</span>litres<span class="sc">/</span><span class="fu">lag</span>(litres)<span class="sc">-</span><span class="dv">1</span>,</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">dollar_per_litre=</span>netsales<span class="sc">/</span>litres,</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">pc_chg_d_per_l=</span>dollar_per_litre<span class="sc">/</span><span class="fu">lag</span>(dollar_per_litre)<span class="sc">-</span><span class="dv">1</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>There has been general upward drift in net sales dollars in recent years, rising to <strong>$3.7 billion in 2022</strong>:</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>ch_title <span class="ot">&lt;-</span> <span class="st">"Net Sales $ Trends - All Types"</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="do">## assign plot definition to variable for use with plotly</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>plot <span class="ot">&lt;-</span> trend_yr <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>year, <span class="at">y=</span>netsales, <span class="at">group=</span><span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">color=</span>bar_col, <span class="at">linewidth=</span><span class="dv">2</span>)<span class="sc">+</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">y=</span>netsales), <span class="at">color=</span>bar_col, <span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks=</span>trend_yr<span class="sc">$</span>year)<span class="sc">+</span> <span class="do">## ensure each value shown in x-axis</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels=</span><span class="fu">comma_format</span>(<span class="at">prefix=</span><span class="st">"$"</span>, <span class="at">scale=</span><span class="fl">1e-9</span>,<span class="at">suffix=</span><span class="st">"B"</span>), </span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>                     <span class="at">expand=</span><span class="fu">expansion</span>(<span class="at">mult=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="fl">0.1</span>)), <span class="at">limits=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="fu">max</span>(trend_yr<span class="sc">$</span>netsales)))<span class="sc">+</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span>ch_title,<span class="at">y=</span><span class="st">""</span>,<span class="at">x=</span><span class="st">""</span>)<span class="sc">+</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>()</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(plot) <span class="do">## convert to plotly for interactivity</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-7af99a7e4e4204ea6349" style="width:100%;height:487px;"></div>
<script type="application/json" data-for="htmlwidget-7af99a7e4e4204ea6349">{"x":{"data":[{"x":[2016,2017,2018,2019,2020,2021,2022],"y":[3030464148,3144923332,3232593505,3292373971,3485644831,3572950309,3667609002],"text":["year: 2016<br />netsales: 3030464148","year: 2017<br />netsales: 3144923332","year: 2018<br />netsales: 3232593505","year: 2019<br />netsales: 3292373971","year: 2020<br />netsales: 3485644831","year: 2021<br />netsales: 3572950309","year: 2022<br />netsales: 3667609002"],"type":"scatter","mode":"lines+markers","line":{"width":7.55905511811024,"color":"rgba(8,29,88,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","marker":{"autocolorscale":false,"color":"rgba(8,29,88,1)","opacity":1,"size":11.3385826771654,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(8,29,88,1)"}},"frame":null}],"layout":{"margin":{"t":43.2754946727549,"r":7.30593607305936,"b":25.0837138508371,"l":28.4931506849315},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"title":{"text":"Net Sales $ Trends - All Types","font":{"color":"rgba(0,0,0,1)","family":"","size":17.5342465753425},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[2015.7,2022.3],"tickmode":"array","ticktext":["2016","2017","2018","2019","2020","2021","2022"],"tickvals":[2016,2017,2018,2019,2020,2021,2022],"categoryorder":"array","categoryarray":["2016","2017","2018","2019","2020","2021","2022"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"y","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0,4034369902.2],"tickmode":"array","ticktext":["$0B","$1B","$2B","$3B","$4B"],"tickvals":[0,1000000000,2000000000,3000000000,4000000000],"categoryorder":"array","categoryarray":["$0B","$1B","$2B","$3B","$4B"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"e55b5c495029":{"x":{},"y":{},"type":"scatter"},"e55b512de314":{"x":{},"y":{}}},"cur_data":"e55b5c495029","visdat":{"e55b5c495029":["function (y) ","x"],"e55b512de314":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<section id="year-over-year-change-sales" class="level4">
<h4 class="anchored" data-anchor-id="year-over-year-change-sales"><strong>Year-over-Year % Change: ($ Sales)</strong></h4>
<p>There is an <strong>out-sized year-over-year % increase in 2020</strong>, first year of the covid-19 pandemic:, with <strong>growth nearing 6%</strong>:</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># chart % chg sales YoY</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>ch_title <span class="ot">&lt;-</span> <span class="st">"Net Sales: Year-over-Year % change"</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co"># convert year to integer to identify first yr for filtering, since no number for % chg</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>min_yr <span class="ot">&lt;-</span> <span class="fu">min</span>(<span class="fu">as.integer</span>(<span class="fu">as.character</span>(trend_yr<span class="sc">$</span>year)))</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="do">## plot - filtered to exclude first yr</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>plot <span class="ot">&lt;-</span> trend_yr <span class="sc">%&gt;%</span> <span class="fu">filter</span>(year<span class="sc">!=</span>min_yr) <span class="sc">%&gt;%</span> </span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>year, <span class="at">y=</span>pc_chg_sales))<span class="sc">+</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">fill=</span>bar_col)<span class="sc">+</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept=</span><span class="fu">mean</span>(trend_yr<span class="sc">$</span>pc_chg_sales, <span class="at">na.rm=</span><span class="cn">TRUE</span>), <span class="at">linetype=</span><span class="st">'dotted'</span>)<span class="sc">+</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept=</span><span class="fu">median</span>(trend_yr<span class="sc">$</span>pc_chg_sales, <span class="at">na.rm=</span><span class="cn">TRUE</span>), <span class="at">linetype=</span><span class="st">'dotted'</span>, <span class="at">color=</span><span class="st">'lightblue'</span>)<span class="sc">+</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks=</span>trend_yr<span class="sc">$</span>year)<span class="sc">+</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels=</span><span class="fu">percent_format</span>(), <span class="at">expand=</span><span class="fu">expansion</span>(<span class="at">mult=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="fl">0.1</span>)))<span class="sc">+</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span>ch_title,<span class="at">y=</span><span class="st">""</span>,<span class="at">x=</span><span class="st">""</span>)<span class="sc">+</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>   <span class="fu">theme</span>(<span class="at">axis.ticks.x =</span> <span class="fu">element_blank</span>()) </span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(plot)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-1f52b8342d98d94fb4bb" style="width:100%;height:487px;"></div>
<script type="application/json" data-for="htmlwidget-1f52b8342d98d94fb4bb">{"x":{"data":[{"orientation":"v","width":[0.900000000000091,0.900000000000091,0.900000000000091,0.900000000000091,0.900000000000091,0.900000000000091],"base":[0,0,0,0,0,0],"x":[2017,2018,2019,2020,2021,2022],"y":[0.0377695225582981,0.0278767282203496,0.0184930353623289,0.0587025841239102,0.0250471526024505,0.0264931456677586],"text":["year: 2017<br />pc_chg_sales: 0.03776952","year: 2018<br />pc_chg_sales: 0.02787673","year: 2019<br />pc_chg_sales: 0.01849304","year: 2020<br />pc_chg_sales: 0.05870258","year: 2021<br />pc_chg_sales: 0.02504715","year: 2022<br />pc_chg_sales: 0.02649315"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(8,29,88,1)","line":{"width":1.88976377952756,"color":"transparent"}},"showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2016.255,2022.745],"y":[0.0323970280891827,0.0323970280891827],"text":"yintercept: 0.03239703","type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)","dash":"dot"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2016.255,2022.745],"y":[0.0271849369440541,0.0271849369440541],"text":"yintercept: 0.02718494","type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(173,216,230,1)","dash":"dot"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.2754946727549,"r":7.30593607305936,"b":25.0837138508371,"l":22.648401826484},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"title":{"text":"Net Sales: Year-over-Year % change","font":{"color":"rgba(0,0,0,1)","family":"","size":17.5342465753425},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[2016.255,2022.745],"tickmode":"array","ticktext":["2017","2018","2019","2020","2021","2022"],"tickvals":[2017,2018,2019,2020,2021,2022],"categoryorder":"array","categoryarray":["2017","2018","2019","2020","2021","2022"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"y","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0,0.0645728425363012],"tickmode":"array","ticktext":["0%","2%","4%","6%"],"tickvals":[0,0.02,0.04,0.06],"categoryorder":"array","categoryarray":["0%","2%","4%","6%"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"e55b1376d234":{"x":{},"y":{},"type":"bar"},"e55b5de25de7":{"yintercept":{}},"e55b388318d8":{"yintercept":{}}},"cur_data":"e55b1376d234","visdat":{"e55b1376d234":["function (y) ","x"],"e55b5de25de7":["function (y) ","x"],"e55b388318d8":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>(black line = average, blue line = median)</p>
</div>
</div>
<p>By far the biggest YoY change was … pandemic time! Prior to 2020, annual increases were slowing down, while total still increasing. In 2022, YoY growth has returned to pre-2020 levels, close to the median (light blue line).</p>
</section>
</section>
<section id="volume-litres" class="level3">
<h3 class="anchored" data-anchor-id="volume-litres">Volume (Litres)</h3>
<p>Sales in litres have been <strong>essentially flat</strong> in recent years, averaging <strong>457 million litres</strong> per year:</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>ch_title <span class="ot">&lt;-</span> <span class="st">"Litre Volume Trends - All Types"</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>plot <span class="ot">&lt;-</span> trend_yr <span class="sc">%&gt;%</span> </span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="fu">as.factor</span>(year), <span class="at">y=</span>litres, <span class="at">group=</span><span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="co">#geom_col(fill=bar_col)+</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">color=</span>bar_col, <span class="at">size=</span><span class="dv">2</span>)<span class="sc">+</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">y=</span>litres), <span class="at">color=</span>bar_col, <span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept=</span><span class="fu">mean</span>(trend_yr<span class="sc">$</span>litres), <span class="at">linetype=</span><span class="st">'dotted'</span>)<span class="sc">+</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels=</span><span class="fu">comma_format</span>(<span class="at">scale=</span><span class="fl">1e-6</span>,<span class="at">suffix=</span><span class="st">"M"</span>), <span class="at">expand=</span><span class="fu">expansion</span>(<span class="at">mult=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="fl">0.1</span>)), <span class="at">limits=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="fu">max</span>(trend_yr<span class="sc">$</span>litres)))<span class="sc">+</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span>ch_title,<span class="at">y=</span><span class="st">""</span>,<span class="at">x=</span><span class="st">""</span>)<span class="sc">+</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() </span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(plot)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-d8360f58aa9e1fc24495" style="width:100%;height:487px;"></div>
<script type="application/json" data-for="htmlwidget-d8360f58aa9e1fc24495">{"x":{"data":[{"x":[1,2,3,4,5,6,7],"y":[440833265,449439779,453891979,453091255,471271640,468486355,458986101],"text":["as.factor(year): 2016<br />litres: 440833265","as.factor(year): 2017<br />litres: 449439779","as.factor(year): 2018<br />litres: 453891979","as.factor(year): 2019<br />litres: 453091255","as.factor(year): 2020<br />litres: 471271640","as.factor(year): 2021<br />litres: 468486355","as.factor(year): 2022<br />litres: 458986101"],"type":"scatter","mode":"lines+markers","line":{"width":7.55905511811024,"color":"rgba(8,29,88,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","marker":{"autocolorscale":false,"color":"rgba(8,29,88,1)","opacity":1,"size":11.3385826771654,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(8,29,88,1)"}},"frame":null},{"x":[0.4,7.6],"y":[456571482,456571482],"text":"yintercept: 456571482","type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)","dash":"dot"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.2754946727549,"r":7.30593607305936,"b":25.0837138508371,"l":34.337899543379},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"title":{"text":"Litre Volume Trends - All Types","font":{"color":"rgba(0,0,0,1)","family":"","size":17.5342465753425},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.4,7.6],"tickmode":"array","ticktext":["2016","2017","2018","2019","2020","2021","2022"],"tickvals":[1,2,3,4,5,6,7],"categoryorder":"array","categoryarray":["2016","2017","2018","2019","2020","2021","2022"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"y","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0,518398804],"tickmode":"array","ticktext":["0M","100M","200M","300M","400M","500M"],"tickvals":[0,100000000,200000000,300000000,400000000,500000000],"categoryorder":"array","categoryarray":["0M","100M","200M","300M","400M","500M"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"e55bb030cec":{"x":{},"y":{},"type":"scatter"},"e55b75455f99":{"x":{},"y":{}},"e55b1d8771f5":{"yintercept":{}}},"cur_data":"e55bb030cec","visdat":{"e55bb030cec":["function (y) ","x"],"e55b75455f99":["function (y) ","x"],"e55b1d8771f5":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Litre volume has remained relatively steady, with a <strong>peak during the 2020 pandemic at 470 million litres</strong>. Volumes are slowing down, although 2022 still above 2019.</p>
<section id="year-over-year-change-volume-litres" class="level4">
<h4 class="anchored" data-anchor-id="year-over-year-change-volume-litres"><strong>Year-over-Year % Change: Volume (Litres)</strong></h4>
<p>Biggest year-over-year jump of ~4% in 2020, with declines accelerating from 2021 to 2022.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># chart % chg liters YoY</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>ch_title <span class="ot">&lt;-</span> <span class="st">"Litre Vol.: Year-over-Year % change"</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>plot <span class="ot">&lt;-</span> trend_yr <span class="sc">%&gt;%</span> <span class="fu">filter</span>(year<span class="sc">!=</span>min_yr) <span class="sc">%&gt;%</span> <span class="do">## filter first yr (calc above) since no value</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="fu">as.factor</span>(year), <span class="at">y=</span>pc_chg_litres))<span class="sc">+</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">fill=</span>bar_col)<span class="sc">+</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept=</span><span class="fu">mean</span>(trend_yr<span class="sc">$</span>pc_chg_litres, <span class="at">na.rm=</span><span class="cn">TRUE</span>), <span class="at">linetype=</span><span class="st">'dotted'</span>)<span class="sc">+</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels=</span><span class="fu">percent_format</span>(), <span class="at">expand=</span><span class="fu">expansion</span>(<span class="at">mult=</span><span class="fu">c</span>(<span class="fl">0.1</span>,<span class="fl">0.1</span>)))<span class="sc">+</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept=</span><span class="dv">0</span>)<span class="sc">+</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span>ch_title,<span class="at">y=</span><span class="st">""</span>,<span class="at">x=</span><span class="st">""</span>)<span class="sc">+</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>   <span class="fu">theme</span>(<span class="at">axis.ticks.x =</span> <span class="fu">element_blank</span>()) </span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(plot)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-a19909c7481f87abc0af" style="width:100%;height:487px;"></div>
<script type="application/json" data-for="htmlwidget-a19909c7481f87abc0af">{"x":{"data":[{"orientation":"v","width":[0.9,0.9,0.9,0.9,0.9,0.9],"base":[0,0,-0.00176412899334355,0,-0.00591014770165255,-0.0202786140911191],"x":[1,2,3,4,5,6],"y":[0.0195232862020973,0.00990611024664112,0.00176412899334355,0.0401252171596205,0.00591014770165255,0.0202786140911191],"text":["as.factor(year): 2017<br />pc_chg_litres:  0.019523286","as.factor(year): 2018<br />pc_chg_litres:  0.009906110","as.factor(year): 2019<br />pc_chg_litres: -0.001764129","as.factor(year): 2020<br />pc_chg_litres:  0.040125217","as.factor(year): 2021<br />pc_chg_litres: -0.005910148","as.factor(year): 2022<br />pc_chg_litres: -0.020278614"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(8,29,88,1)","line":{"width":1.88976377952756,"color":"transparent"}},"showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.4,6.6],"y":[0.00693362047037395,0.00693362047037395],"text":"yintercept: 0.00693362","type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)","dash":"dot"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.4,6.6],"y":[0,0],"text":"yintercept: 0","type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.2754946727549,"r":7.30593607305936,"b":25.0837138508371,"l":28.4931506849315},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"title":{"text":"Litre Vol.: Year-over-Year % change","font":{"color":"rgba(0,0,0,1)","family":"","size":17.5342465753425},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.4,6.6],"tickmode":"array","ticktext":["2017","2018","2019","2020","2021","2022"],"tickvals":[1,2,3,4,5,6],"categoryorder":"array","categoryarray":["2017","2018","2019","2020","2021","2022"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"y","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-0.026318997216193,0.0461656002846944],"tickmode":"array","ticktext":["-2%","0%","2%","4%"],"tickvals":[-0.02,0,0.02,0.04],"categoryorder":"array","categoryarray":["-2%","0%","2%","4%"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"e55b6710df27":{"x":{},"y":{},"type":"bar"},"e55b4aaae4e":{"yintercept":{}},"e55b61998546":{"yintercept":{}}},"cur_data":"e55b6710df27","visdat":{"e55b6710df27":["function (y) ","x"],"e55b4aaae4e":["function (y) ","x"],"e55b61998546":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>After strong growth of 4% in 2020, 2022 saw by far the <strong>largest decrease in volume consumption in 6 years</strong>, down 2%.</p>
</section>
</section>
<section id="litre" class="level3">
<h3 class="anchored" data-anchor-id="litre">$/Litre</h3>
<p>Looking at trends in <strong>$/litre provides a proxy for ‘price’ and gives a sense of how overall prices have changed over time</strong>. <em>(see footnote for caveats.)</em> No surprise: <strong>steadily upward</strong>, increasing with inflation:</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># chart $/ltr</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>ch_title <span class="ot">&lt;-</span> <span class="st">"$/Litre Trends - All Types"</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>plot <span class="ot">&lt;-</span> trend_yr <span class="sc">%&gt;%</span> </span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="fu">as.factor</span>(year), <span class="at">y=</span>dollar_per_litre, <span class="at">group=</span><span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="co">#geom_col(fill=bar_col)+</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">color=</span>bar_col, <span class="at">size=</span><span class="dv">2</span>)<span class="sc">+</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">y=</span>dollar_per_litre), <span class="at">color=</span>bar_col, <span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels=</span><span class="fu">label_comma</span>(<span class="at">prefix=</span><span class="st">"$"</span>, <span class="at">accuracy=</span><span class="fl">0.01</span>), <span class="at">expand=</span><span class="fu">expansion</span>(<span class="at">mult=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="fl">0.1</span>)), <span class="at">limits=</span><span class="fu">c</span>(<span class="dv">0</span>, <span class="fu">max</span>(trend_yr<span class="sc">$</span>dollar_per_litre)))<span class="sc">+</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span>ch_title,<span class="at">y=</span><span class="st">""</span>,<span class="at">x=</span><span class="st">""</span>)<span class="sc">+</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>()</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(plot)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-7e99fc9d1190d1389a24" style="width:100%;height:487px;"></div>
<script type="application/json" data-for="htmlwidget-7e99fc9d1190d1389a24">{"x":{"data":[{"x":[1,2,3,4,5,6,7],"y":[6.87439988903741,6.99742986479174,7.12194454751535,7.26646991012881,7.39625416670521,7.62658350849941,7.99067552156661],"text":["as.factor(year): 2016<br />dollar_per_litre: 6.874400","as.factor(year): 2017<br />dollar_per_litre: 6.997430","as.factor(year): 2018<br />dollar_per_litre: 7.121945","as.factor(year): 2019<br />dollar_per_litre: 7.266470","as.factor(year): 2020<br />dollar_per_litre: 7.396254","as.factor(year): 2021<br />dollar_per_litre: 7.626584","as.factor(year): 2022<br />dollar_per_litre: 7.990676"],"type":"scatter","mode":"lines+markers","line":{"width":7.55905511811024,"color":"rgba(8,29,88,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","marker":{"autocolorscale":false,"color":"rgba(8,29,88,1)","opacity":1,"size":11.3385826771654,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(8,29,88,1)"}},"frame":null}],"layout":{"margin":{"t":43.2754946727549,"r":7.30593607305936,"b":25.0837138508371,"l":40.1826484018265},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"title":{"text":"$/Litre Trends - All Types","font":{"color":"rgba(0,0,0,1)","family":"","size":17.5342465753425},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.4,7.6],"tickmode":"array","ticktext":["2016","2017","2018","2019","2020","2021","2022"],"tickvals":[1,2,3,4,5,6,7],"categoryorder":"array","categoryarray":["2016","2017","2018","2019","2020","2021","2022"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"y","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0,8.78974307372327],"tickmode":"array","ticktext":["$0.00","$2.00","$4.00","$6.00","$8.00"],"tickvals":[0,2,4,6,8],"categoryorder":"array","categoryarray":["$0.00","$2.00","$4.00","$6.00","$8.00"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"e55b1ca02f0b":{"x":{},"y":{},"type":"scatter"},"e55b587089db":{"x":{},"y":{}}},"cur_data":"e55b1ca02f0b","visdat":{"e55b1ca02f0b":["function (y) ","x"],"e55b587089db":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>$/litre has trended up to $8 by 2022. <em>(this may seem unrealistically low - see footnote for caveats and use as directional information.)</em></p>
<section id="year-over-year-change-litre" class="level4">
<h4 class="anchored" data-anchor-id="year-over-year-change-litre"><strong>Year-over-Year % Change: $/Litre</strong></h4>
<p>With relatively flat litre volume sales, the increase in dollar volume is driven by increase in sales $ per litre. Dollar per litre increases have been fairly steady, around 2%, until 2021. This <strong>corresponds with overall increase in inflation, accelerating through 2021 and 2022</strong>:</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># chart % chg $/liters YoY</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>ch_title <span class="ot">&lt;-</span> <span class="st">"$/Litre: Year-over-Year % change"</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>plot <span class="ot">&lt;-</span> trend_yr <span class="sc">%&gt;%</span> <span class="fu">filter</span>(year<span class="sc">!=</span>min_yr) <span class="sc">%&gt;%</span> </span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="fu">as.factor</span>(year), <span class="at">y=</span>pc_chg_d_per_l))<span class="sc">+</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">fill=</span>bar_col)<span class="sc">+</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="fu">mean</span>(trend_yr<span class="sc">$</span>pc_chg_d_per_l, <span class="at">na.rm=</span><span class="cn">TRUE</span>), <span class="at">linetype=</span><span class="st">'dotted'</span>)<span class="sc">+</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels=</span><span class="fu">percent_format</span>(), <span class="at">expand=</span><span class="fu">expansion</span>(<span class="at">mult=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="fl">0.1</span>)))<span class="sc">+</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span>ch_title,<span class="at">y=</span><span class="st">""</span>,<span class="at">x=</span><span class="st">""</span>)<span class="sc">+</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>   <span class="fu">theme</span>(<span class="at">axis.ticks.x =</span> <span class="fu">element_blank</span>()) </span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(plot)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-c3190691f39790e4db7b" style="width:100%;height:487px;"></div>
<script type="application/json" data-for="htmlwidget-c3190691f39790e4db7b">{"x":{"data":[{"orientation":"v","width":[0.9,0.9,0.9,0.9,0.9,0.9],"base":[0,0,0,0,0,0],"x":[1,2,3,4,5,6],"y":[0.0178968313947701,0.017794345228112,0.0202929637614049,0.0178607024017945,0.03114135028391,0.0477398579142863],"text":["as.factor(year): 2017<br />pc_chg_d_per_l: 0.01789683","as.factor(year): 2018<br />pc_chg_d_per_l: 0.01779435","as.factor(year): 2019<br />pc_chg_d_per_l: 0.02029296","as.factor(year): 2020<br />pc_chg_d_per_l: 0.01786070","as.factor(year): 2021<br />pc_chg_d_per_l: 0.03114135","as.factor(year): 2022<br />pc_chg_d_per_l: 0.04773986"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(8,29,88,1)","line":{"width":1.88976377952756,"color":"transparent"}},"showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.4,6.6],"y":[0.0254543418307129,0.0254543418307129],"text":"yintercept: 0.02545434","type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)","dash":"dot"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.2754946727549,"r":7.30593607305936,"b":25.0837138508371,"l":22.648401826484},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"title":{"text":"$/Litre: Year-over-Year % change","font":{"color":"rgba(0,0,0,1)","family":"","size":17.5342465753425},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.4,6.6],"tickmode":"array","ticktext":["2017","2018","2019","2020","2021","2022"],"tickvals":[1,2,3,4,5,6],"categoryorder":"array","categoryarray":["2017","2018","2019","2020","2021","2022"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"y","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0,0.0525138437057149],"tickmode":"array","ticktext":["0%","1%","2%","3%","4%","5%"],"tickvals":[0,0.01,0.02,0.03,0.04,0.05],"categoryorder":"array","categoryarray":["0%","1%","2%","3%","4%","5%"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"e55b19bab152":{"x":{},"y":{},"type":"bar"},"e55b2fcf8bb0":{"yintercept":{}}},"cur_data":"e55b19bab152","visdat":{"e55b19bab152":["function (y) ","x"],"e55b2fcf8bb0":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>$/litre increases look exponential from here, but would be expected to level off as inflation slows down.</p>
</section>
</section>
</section>
<section id="annual-trends-by-beverage-type" class="level2">
<h2 class="anchored" data-anchor-id="annual-trends-by-beverage-type">Annual Trends: By Beverage Type</h2>
<p>As noted, the <a href="https://www.bcldb.com/publications/liquor-market-review">BC LMR</a> provides a breakdown of sales by four major beverage types: <strong>beer, refreshment beverages, spirits, wine.</strong></p>
<section id="by-type-sales" class="level3">
<h3 class="anchored" data-anchor-id="by-type-sales">By Type: $ Sales</h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># annual data by type</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>drop_yr <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2015</span>,<span class="dv">2023</span>) <span class="do">## drop partial yrs for simplicity</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>trend_yr_cat <span class="ot">&lt;-</span> lmr_data <span class="sc">%&gt;%</span> <span class="fu">filter</span>(year<span class="sc">&gt;</span>drop_yr[<span class="dv">1</span>] <span class="sc">&amp;</span> year<span class="sc">&lt;</span>drop_yr[<span class="dv">2</span>]) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(year, type) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">netsales=</span><span class="fu">sum</span>(<span class="fu">as.numeric</span>(netsales)),</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">litres=</span><span class="fu">sum</span>(<span class="fu">as.numeric</span>(litres))</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>) </span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>trend_yr_cat <span class="ot">&lt;-</span> trend_yr_cat <span class="sc">%&gt;%</span> <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">dollar_per_litre=</span>netsales<span class="sc">/</span>litres,</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">pc_chg_sales=</span>netsales<span class="sc">/</span><span class="fu">lag</span>(netsales, <span class="at">n=</span><span class="dv">4</span>)<span class="sc">-</span><span class="dv">1</span>, <span class="co"># yoy change by beverage type</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">pc_chg_litre=</span>litres<span class="sc">/</span><span class="fu">lag</span>(litres, <span class="at">n=</span><span class="dv">4</span>)<span class="sc">-</span><span class="dv">1</span>,</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">pc_chg_dollar_per_l=</span>dollar_per_litre<span class="sc">/</span><span class="fu">lag</span>(dollar_per_litre, <span class="at">n=</span><span class="dv">4</span>)<span class="sc">-</span><span class="dv">1</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a><span class="do">## get subset of trend_yr data to add annual totals to trend_yr_cat for % of ttl calculations</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>trend_yr_yr <span class="ot">&lt;-</span> trend_yr <span class="sc">%&gt;%</span> <span class="fu">select</span>(year, netsales, litres) <span class="sc">%&gt;%</span> <span class="fu">rename</span>(</span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">netsales_ttl=</span>netsales,</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">litres_ttl=</span>litres</span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>trend_yr_cat <span class="ot">&lt;-</span> <span class="fu">left_join</span>(trend_yr_cat, trend_yr_yr, <span class="at">by=</span><span class="st">'year'</span>) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(</span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">pc_ttl_sales=</span>netsales<span class="sc">/</span>netsales_ttl,</span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">pc_ttl_litres=</span>litres<span class="sc">/</span>litres_ttl</span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>For $ sales, <strong>wine and beer are the largest types</strong> (well over 50%), followed by spirits, with refreshment beverages as distant fourth:</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># annual sales by type (stack)</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>ch_title <span class="ot">&lt;-</span> <span class="st">"Net $ Sales by Type"</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co"># order type by netsales for chart</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>trend_yr_cat<span class="sc">$</span>type <span class="ot">&lt;-</span> <span class="fu">fct_reorder</span>(trend_yr_cat<span class="sc">$</span>type, trend_yr_cat<span class="sc">$</span>netsales)</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>trend_yr_cat<span class="sc">$</span>year <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(trend_yr_cat<span class="sc">$</span>year) <span class="do">## foctar works better for bar charts</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>plot <span class="ot">&lt;-</span> trend_yr_cat <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>year, <span class="at">y=</span>netsales, <span class="at">fill=</span>type))<span class="sc">+</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>()<span class="sc">+</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels=</span><span class="fu">label_comma</span>(<span class="at">prefix=</span><span class="st">"$"</span>, <span class="at">scale=</span><span class="fl">1e-9</span>,<span class="at">suffix=</span><span class="st">"B"</span>), <span class="at">expand=</span><span class="fu">expansion</span>(<span class="at">mult =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="fl">0.1</span>)))<span class="sc">+</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values=</span>type_color)<span class="sc">+</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span>ch_title, <span class="at">x=</span><span class="st">""</span>,<span class="at">y=</span><span class="st">""</span>, <span class="at">fill=</span><span class="st">''</span>)<span class="sc">+</span> <span class="do">## setting fill='' removes title from legend</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.ticks.x =</span> <span class="fu">element_blank</span>())</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(plot)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-6fc685975df1f07500cc" style="width:100%;height:487px;"></div>
<script type="application/json" data-for="htmlwidget-6fc685975df1f07500cc">{"x":{"data":[{"orientation":"v","width":[0.9,0.9,0.9,0.9,0.9,0.9,0.9],"base":[2851798252,2945448485,2995709557,3009266572,3105315326,3154830347,3243252135],"x":[1,2,3,4,5,6,7],"y":[178665896,199474847,236883948,283107399,380329505,418119962,424356867],"text":["year: 2016<br />netsales:  178665896<br />type: Refresh Bev","year: 2017<br />netsales:  199474847<br />type: Refresh Bev","year: 2018<br />netsales:  236883948<br />type: Refresh Bev","year: 2019<br />netsales:  283107399<br />type: Refresh Bev","year: 2020<br />netsales:  380329505<br />type: Refresh Bev","year: 2021<br />netsales:  418119962<br />type: Refresh Bev","year: 2022<br />netsales:  424356867<br />type: Refresh Bev"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(254,217,118,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Refresh Bev","legendgroup":"Refresh Bev","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9,0.9,0.9,0.9,0.9,0.9],"base":[2116040597,2187567763,2212493565,2198172603,2211060004,2229351378,2269307343],"x":[1,2,3,4,5,6,7],"y":[735757655,757880722,783215992,811093969,894255322,925478969,973944792],"text":["year: 2016<br />netsales:  735757655<br />type: Spirits","year: 2017<br />netsales:  757880722<br />type: Spirits","year: 2018<br />netsales:  783215992<br />type: Spirits","year: 2019<br />netsales:  811093969<br />type: Spirits","year: 2020<br />netsales:  894255322<br />type: Spirits","year: 2021<br />netsales:  925478969<br />type: Spirits","year: 2022<br />netsales:  973944792<br />type: Spirits"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(254,178,76,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Spirits","legendgroup":"Spirits","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9,0.9,0.9,0.9,0.9,0.9],"base":[1035218172,1074412393,1097227469,1114128477,1149491290,1175373548,1190192392],"x":[1,2,3,4,5,6,7],"y":[1080822425,1113155370,1115266096,1084044126,1061568714,1053977830,1079114951],"text":["year: 2016<br />netsales: 1080822425<br />type: Beer","year: 2017<br />netsales: 1113155370<br />type: Beer","year: 2018<br />netsales: 1115266096<br />type: Beer","year: 2019<br />netsales: 1084044126<br />type: Beer","year: 2020<br />netsales: 1061568714<br />type: Beer","year: 2021<br />netsales: 1053977830<br />type: Beer","year: 2022<br />netsales: 1079114951<br />type: Beer"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(252,78,42,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Beer","legendgroup":"Beer","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9,0.9,0.9,0.9,0.9,0.9],"base":[0,0,0,0,0,0,0],"x":[1,2,3,4,5,6,7],"y":[1035218172,1074412393,1097227469,1114128477,1149491290,1175373548,1190192392],"text":["year: 2016<br />netsales: 1035218172<br />type: Wine","year: 2017<br />netsales: 1074412393<br />type: Wine","year: 2018<br />netsales: 1097227469<br />type: Wine","year: 2019<br />netsales: 1114128477<br />type: Wine","year: 2020<br />netsales: 1149491290<br />type: Wine","year: 2021<br />netsales: 1175373548<br />type: Wine","year: 2022<br />netsales: 1190192392<br />type: Wine"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(189,0,38,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Wine","legendgroup":"Wine","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.2754946727549,"r":7.30593607305936,"b":25.0837138508371,"l":28.4931506849315},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"title":{"text":"Net $ Sales by Type","font":{"color":"rgba(0,0,0,1)","family":"","size":17.5342465753425},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.4,7.6],"tickmode":"array","ticktext":["2016","2017","2018","2019","2020","2021","2022"],"tickvals":[1,2,3,4,5,6,7],"categoryorder":"array","categoryarray":["2016","2017","2018","2019","2020","2021","2022"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"y","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0,4034369902.2],"tickmode":"array","ticktext":["$0B","$1B","$2B","$3B","$4B"],"tickvals":[0,1000000000,2000000000,3000000000,4000000000],"categoryorder":"array","categoryarray":["$0B","$1B","$2B","$3B","$4B"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895},"title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"e55b3a689394":{"x":{},"y":{},"fill":{},"type":"bar"}},"cur_data":"e55b3a689394","visdat":{"e55b3a689394":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<section id="by-type-sales-breakdown" class="level4">
<h4 class="anchored" data-anchor-id="by-type-sales-breakdown"><strong>By Type: $ Sales % Breakdown</strong></h4>
<p>Looking at the overall % breakdown, we can more easily spot changes in composition over time:</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>ch_title <span class="ot">&lt;-</span> <span class="st">"Net $ Sales by Type, % of Total"</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>plot <span class="ot">&lt;-</span> trend_yr_cat <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>year, <span class="at">y=</span>pc_ttl_sales, <span class="at">fill=</span>type))<span class="sc">+</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>()<span class="sc">+</span> <span class="do">## could use same as prev chart with position='fill' but wanted numbers for chart</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels=</span><span class="fu">percent_format</span>(), <span class="at">expand=</span><span class="fu">expansion</span>(<span class="at">mult =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="fl">0.1</span>)))<span class="sc">+</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values=</span>type_color)<span class="sc">+</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span>ch_title, <span class="at">x=</span><span class="st">""</span>,<span class="at">y=</span><span class="st">""</span>, <span class="at">fill=</span><span class="st">''</span>)<span class="sc">+</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.ticks.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.title =</span> <span class="fu">element_blank</span>())</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(plot)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-c8e99a190f651a4d71ad" style="width:100%;height:487px;"></div>
<script type="application/json" data-for="htmlwidget-c8e99a190f651a4d71ad">{"x":{"data":[{"orientation":"v","width":[0.9,0.9,0.9,0.9,0.9,0.9,0.9],"base":[0.941043388974619,0.93657242929571,0.926720155926317,0.914011165956943,0.890886902297821,0.882976272872649,0.884296044979551],"x":[1,2,3,4,5,6,7],"y":[0.0589566110253814,0.0634275707042896,0.0732798440736829,0.0859888340430571,0.109113097702179,0.117023727127351,0.115703955020449],"text":["year: 2016<br />pc_ttl_sales: 0.05895661<br />type: Refresh Bev","year: 2017<br />pc_ttl_sales: 0.06342757<br />type: Refresh Bev","year: 2018<br />pc_ttl_sales: 0.07327984<br />type: Refresh Bev","year: 2019<br />pc_ttl_sales: 0.08598883<br />type: Refresh Bev","year: 2020<br />pc_ttl_sales: 0.10911310<br />type: Refresh Bev","year: 2021<br />pc_ttl_sales: 0.11702373<br />type: Refresh Bev","year: 2022<br />pc_ttl_sales: 0.11570396<br />type: Refresh Bev"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(254,217,118,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Refresh Bev","legendgroup":"Refresh Bev","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9,0.9,0.9,0.9,0.9,0.9],"base":[0.69825627153402,0.695586992770608,0.68443296739223,0.66765580774299,0.634333132376447,0.623952528078666,0.618742985351632],"x":[1,2,3,4,5,6,7],"y":[0.242787117440599,0.240985436525103,0.242287188534087,0.246355358213953,0.256553769921374,0.259023744793983,0.265553059627919],"text":["year: 2016<br />pc_ttl_sales: 0.24278712<br />type: Spirits","year: 2017<br />pc_ttl_sales: 0.24098544<br />type: Spirits","year: 2018<br />pc_ttl_sales: 0.24228719<br />type: Spirits","year: 2019<br />pc_ttl_sales: 0.24635536<br />type: Spirits","year: 2020<br />pc_ttl_sales: 0.25655377<br />type: Spirits","year: 2021<br />pc_ttl_sales: 0.25902374<br />type: Spirits","year: 2022<br />pc_ttl_sales: 0.26555306<br />type: Spirits"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(254,178,76,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Spirits","legendgroup":"Spirits","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9,0.9,0.9,0.9,0.9,0.9],"base":[0.341603834080402,0.341633890425155,0.33942636687937,0.338396696977167,0.329778662408993,0.328964426132465,0.324514524681058],"x":[1,2,3,4,5,6,7],"y":[0.356652437453617,0.353953102345453,0.34500660051286,0.329259110765823,0.304554469967454,0.2949881019462,0.294228460670574],"text":["year: 2016<br />pc_ttl_sales: 0.35665244<br />type: Beer","year: 2017<br />pc_ttl_sales: 0.35395310<br />type: Beer","year: 2018<br />pc_ttl_sales: 0.34500660<br />type: Beer","year: 2019<br />pc_ttl_sales: 0.32925911<br />type: Beer","year: 2020<br />pc_ttl_sales: 0.30455447<br />type: Beer","year: 2021<br />pc_ttl_sales: 0.29498810<br />type: Beer","year: 2022<br />pc_ttl_sales: 0.29422846<br />type: Beer"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(252,78,42,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Beer","legendgroup":"Beer","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9,0.9,0.9,0.9,0.9,0.9],"base":[0,0,0,0,0,0,0],"x":[1,2,3,4,5,6,7],"y":[0.341603834080402,0.341633890425155,0.33942636687937,0.338396696977167,0.329778662408993,0.328964426132465,0.324514524681058],"text":["year: 2016<br />pc_ttl_sales: 0.34160383<br />type: Wine","year: 2017<br />pc_ttl_sales: 0.34163389<br />type: Wine","year: 2018<br />pc_ttl_sales: 0.33942637<br />type: Wine","year: 2019<br />pc_ttl_sales: 0.33839670<br />type: Wine","year: 2020<br />pc_ttl_sales: 0.32977866<br />type: Wine","year: 2021<br />pc_ttl_sales: 0.32896443<br />type: Wine","year: 2022<br />pc_ttl_sales: 0.32451452<br />type: Wine"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(189,0,38,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Wine","legendgroup":"Wine","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.2754946727549,"r":7.30593607305936,"b":25.0837138508371,"l":34.337899543379},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"title":{"text":"Net $ Sales by Type, % of Total","font":{"color":"rgba(0,0,0,1)","family":"","size":17.5342465753425},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.4,7.6],"tickmode":"array","ticktext":["2016","2017","2018","2019","2020","2021","2022"],"tickvals":[1,2,3,4,5,6,7],"categoryorder":"array","categoryarray":["2016","2017","2018","2019","2020","2021","2022"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"y","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0,1.1],"tickmode":"array","ticktext":["0%","25%","50%","75%","100%"],"tickvals":[0,0.25,0.5,0.75,1],"categoryorder":"array","categoryarray":["0%","25%","50%","75%","100%"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895},"title":{"text":"","font":{"color":null,"family":null,"size":0}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"e55b76812694":{"x":{},"y":{},"fill":{},"type":"bar"}},"cur_data":"e55b76812694","visdat":{"e55b76812694":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Percentage breakdown shows wine and beer with bulk of market share, BUT…<strong>beer particularly fading in favour of refreshment beverages</strong> and spirits, with the former showing strongest relative growth. Beer has gone <strong>from 36% of total $ sales in 2016 to under 30% in 2022</strong>, while <strong>refreshment beverages</strong> have gone from <strong>under 6% to close to 12%</strong>.</p>
</section>
<section id="by-type-sales-year-over-year-change" class="level4">
<h4 class="anchored" data-anchor-id="by-type-sales-year-over-year-change"><strong>By Type: $ Sales Year-over-Year % Change</strong></h4>
<p>Refreshment Beverages had dolllar sales growth of <strong>over 20% for 3 years in a row</strong>:</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>ch_title <span class="ot">&lt;-</span> <span class="st">"% Chg in Net $ Sales, Year-over-Year by Type"</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="do">## plot - filtered to exclude lowest yr, calculated above</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>plot <span class="ot">&lt;-</span> trend_yr_cat <span class="sc">%&gt;%</span> <span class="fu">filter</span>(year<span class="sc">!=</span>min_yr) <span class="sc">%&gt;%</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>year, <span class="at">y=</span>pc_chg_sales))<span class="sc">+</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">fill=</span>bar_col)<span class="sc">+</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>)<span class="sc">+</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(.<span class="sc">~</span>type)<span class="sc">+</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels=</span><span class="fu">percent_format</span>())<span class="sc">+</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">strip.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> bar_col)) <span class="sc">+</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">strip.text=</span><span class="fu">element_text</span>(<span class="at">color=</span><span class="st">'white'</span>))<span class="sc">+</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span>ch_title, <span class="at">x=</span><span class="st">""</span>,<span class="at">y=</span><span class="st">""</span>)<span class="sc">+</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x=</span><span class="fu">element_text</span>(<span class="at">hjust=</span><span class="dv">0</span>, <span class="at">vjust=</span><span class="fl">0.5</span>, <span class="at">angle=</span><span class="dv">90</span>),</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.ticks.x =</span> <span class="fu">element_blank</span>()</span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>        ,<span class="at">panel.border =</span> <span class="fu">element_rect</span>(<span class="at">fill=</span><span class="cn">NA</span>)</span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>        ) </span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(plot)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-82c3e99e8526c1dc49cc" style="width:100%;height:487px;"></div>
<script type="application/json" data-for="htmlwidget-82c3e99e8526c1dc49cc">{"x":{"data":[{"orientation":"v","width":[0.9,0.9,0.9,0.9,0.9,0.9],"base":[0,0,0,0,0,0],"x":[1,2,3,4,5,6],"y":[0.116468511707461,0.187537935547332,0.195131208299517,0.343410685638774,0.0993624120747614,0.0149165444533357],"text":["year: 2017<br />pc_chg_sales:  0.116468512","year: 2018<br />pc_chg_sales:  0.187537936","year: 2019<br />pc_chg_sales:  0.195131208","year: 2020<br />pc_chg_sales:  0.343410686","year: 2021<br />pc_chg_sales:  0.099362412","year: 2022<br />pc_chg_sales:  0.014916544"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(8,29,88,1)","line":{"width":1.88976377952756,"color":"transparent"}},"showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9,0.9,0.9,0.9,0.9],"base":[0,0,0,0,0,0],"x":[1,2,3,4,5,6],"y":[0.0300684156660251,0.0334290994144062,0.0355942387345942,0.102529862356799,0.0349158078591787,0.0523683677570419],"text":["year: 2017<br />pc_chg_sales:  0.030068416","year: 2018<br />pc_chg_sales:  0.033429099","year: 2019<br />pc_chg_sales:  0.035594239","year: 2020<br />pc_chg_sales:  0.102529862","year: 2021<br />pc_chg_sales:  0.034915808","year: 2022<br />pc_chg_sales:  0.052368368"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(8,29,88,1)","line":{"width":1.88976377952756,"color":"transparent"}},"showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9,0.9,0.9,0.9,0.9],"base":[0,0,-0.0279950857575428,-0.0207329309397504,-0.0071506289700245,0],"x":[1,2,3,4,5,6],"y":[0.0299151315258841,0.00189616477347632,0.0279950857575428,0.0207329309397504,0.0071506289700245,0.0238497625704328],"text":["year: 2017<br />pc_chg_sales:  0.029915132","year: 2018<br />pc_chg_sales:  0.001896165","year: 2019<br />pc_chg_sales: -0.027995086","year: 2020<br />pc_chg_sales: -0.020732931","year: 2021<br />pc_chg_sales: -0.007150629","year: 2022<br />pc_chg_sales:  0.023849763"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(8,29,88,1)","line":{"width":1.88976377952756,"color":"transparent"}},"showlegend":false,"xaxis":"x3","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9,0.9,0.9,0.9,0.9],"base":[0,0,0,0,0,0],"x":[1,2,3,4,5,6],"y":[0.0378608317165436,0.0212349337634641,0.0154033766721164,0.031740336711634,0.0225162715239016,0.0126077739500055],"text":["year: 2017<br />pc_chg_sales:  0.037860832","year: 2018<br />pc_chg_sales:  0.021234934","year: 2019<br />pc_chg_sales:  0.015403377","year: 2020<br />pc_chg_sales:  0.031740337","year: 2021<br />pc_chg_sales:  0.022516272","year: 2022<br />pc_chg_sales:  0.012607774"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(8,29,88,1)","line":{"width":1.88976377952756,"color":"transparent"}},"showlegend":false,"xaxis":"x4","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.4,6.6],"y":[0,0],"text":"yintercept: 0","type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.4,6.6],"y":[0,0],"text":"yintercept: 0","type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.4,6.6],"y":[0,0],"text":"yintercept: 0","type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x3","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.4,6.6],"y":[0,0],"text":"yintercept: 0","type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x4","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":54.9649923896499,"r":18.9954337899543,"b":36.7732115677321,"l":28.4931506849315},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"title":{"text":"% Chg in Net $ Sales, Year-over-Year by Type","font":{"color":"rgba(0,0,0,1)","family":"","size":17.5342465753425},"x":0,"xref":"paper"},"xaxis":{"domain":[0,0.230974124809741],"automargin":true,"type":"linear","autorange":false,"range":[0.4,6.6],"tickmode":"array","ticktext":["2017","2018","2019","2020","2021","2022"],"tickvals":[1,2,3,4,5,6],"categoryorder":"array","categoryarray":["2017","2018","2019","2020","2021","2022"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-90,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"y","title":"","hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-0.0465653743273587,0.36198097420859],"tickmode":"array","ticktext":["0%","10%","20%","30%"],"tickvals":[0,0.1,0.2,0.3],"categoryorder":"array","categoryarray":["0%","10%","20%","30%"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(0,0,0,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":0.230974124809741,"y0":0,"y1":1},{"type":"rect","fillcolor":"rgba(8,29,88,1)","line":{"color":"rgba(0,0,0,1)","width":1.32835201328352,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":0.230974124809741,"y0":0,"y1":23.37899543379,"yanchor":1,"ysizemode":"pixel"},{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(0,0,0,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.269025875190259,"x1":0.480974124809741,"y0":0,"y1":1},{"type":"rect","fillcolor":"rgba(8,29,88,1)","line":{"color":"rgba(0,0,0,1)","width":1.32835201328352,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.269025875190259,"x1":0.480974124809741,"y0":0,"y1":23.37899543379,"yanchor":1,"ysizemode":"pixel"},{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(0,0,0,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.519025875190259,"x1":0.730974124809741,"y0":0,"y1":1},{"type":"rect","fillcolor":"rgba(8,29,88,1)","line":{"color":"rgba(0,0,0,1)","width":1.32835201328352,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.519025875190259,"x1":0.730974124809741,"y0":0,"y1":23.37899543379,"yanchor":1,"ysizemode":"pixel"},{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(0,0,0,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.769025875190259,"x1":1,"y0":0,"y1":1},{"type":"rect","fillcolor":"rgba(8,29,88,1)","line":{"color":"rgba(0,0,0,1)","width":1.32835201328352,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.769025875190259,"x1":1,"y0":0,"y1":23.37899543379,"yanchor":1,"ysizemode":"pixel"}],"annotations":[{"text":"Refresh Bev","x":0.115487062404871,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(255,255,255,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"Spirits","x":0.375,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(255,255,255,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"Beer","x":0.625,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(255,255,255,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"Wine","x":0.884512937595129,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(255,255,255,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"}],"xaxis2":{"type":"linear","autorange":false,"range":[0.4,6.6],"tickmode":"array","ticktext":["2017","2018","2019","2020","2021","2022"],"tickvals":[1,2,3,4,5,6],"categoryorder":"array","categoryarray":["2017","2018","2019","2020","2021","2022"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-90,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176,"showgrid":false,"domain":[0.269025875190259,0.480974124809741],"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"y","title":"","hoverformat":".2f"},"xaxis3":{"type":"linear","autorange":false,"range":[0.4,6.6],"tickmode":"array","ticktext":["2017","2018","2019","2020","2021","2022"],"tickvals":[1,2,3,4,5,6],"categoryorder":"array","categoryarray":["2017","2018","2019","2020","2021","2022"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-90,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176,"showgrid":false,"domain":[0.519025875190259,0.730974124809741],"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"y","title":"","hoverformat":".2f"},"xaxis4":{"type":"linear","autorange":false,"range":[0.4,6.6],"tickmode":"array","ticktext":["2017","2018","2019","2020","2021","2022"],"tickvals":[1,2,3,4,5,6],"categoryorder":"array","categoryarray":["2017","2018","2019","2020","2021","2022"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-90,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176,"showgrid":false,"domain":[0.769025875190259,1],"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"y","title":"","hoverformat":".2f"},"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"e55b71a006fc":{"x":{},"y":{},"type":"bar"},"e55b412ac4ab":{"yintercept":{}}},"cur_data":"e55b71a006fc","visdat":{"e55b71a006fc":["function (y) ","x"],"e55b412ac4ab":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>During the pandemic in 2020, <strong>Refreshment Beverages had a surge in growth</strong>, on top of an already strong trend from previous years. Spirits also had a significant increase - around 10% year-over-year growth.</p>
<p><strong>Beer</strong> is the only beverage type with <strong>negative growth</strong> during the period, through 2019-2021, although recovered in 2022.</p>
</section>
</section>
<section id="by-type-volume-litres" class="level3">
<h3 class="anchored" data-anchor-id="by-type-volume-litres">By Type: Volume (Litres)</h3>
<p>Looking at litre sales confirms growth of Refreshment Beverages:</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># annual litres by category (stack)</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>ch_title <span class="ot">&lt;-</span> <span class="st">"Volume (Litres) by Type"</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="co"># order type by netsales for chart</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>trend_yr_cat<span class="sc">$</span>type <span class="ot">&lt;-</span> <span class="fu">fct_reorder</span>(trend_yr_cat<span class="sc">$</span>type, trend_yr_cat<span class="sc">$</span>litres)</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>plot <span class="ot">&lt;-</span> trend_yr_cat <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>year, <span class="at">y=</span>litres, <span class="at">fill=</span>type))<span class="sc">+</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>()<span class="sc">+</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels=</span><span class="fu">label_comma</span>(<span class="at">scale=</span><span class="fl">1e-6</span>,<span class="at">suffix=</span><span class="st">"M"</span>), <span class="at">expand=</span><span class="fu">expansion</span>(<span class="at">mult =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="fl">0.1</span>)))<span class="sc">+</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values=</span>type_color)<span class="sc">+</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span>ch_title, <span class="at">x=</span><span class="st">""</span>,<span class="at">y=</span><span class="st">""</span>, <span class="at">fill=</span><span class="st">''</span>)<span class="sc">+</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.ticks.x =</span> <span class="fu">element_blank</span>())</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(plot)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-3db3d818e80987a6458c" style="width:100%;height:487px;"></div>
<script type="application/json" data-for="htmlwidget-3db3d818e80987a6458c">{"x":{"data":[{"orientation":"v","width":[0.9,0.9,0.9,0.9,0.9,0.9,0.9],"base":[414212052,422435468,426465106,425148198,440664375,437920377,427829347],"x":[1,2,3,4,5,6,7],"y":[26621213,27004311,27426873,27943057,30607265,30565978,31156754],"text":["year: 2016<br />litres:  26621213<br />type: Spirits","year: 2017<br />litres:  27004311<br />type: Spirits","year: 2018<br />litres:  27426873<br />type: Spirits","year: 2019<br />litres:  27943057<br />type: Spirits","year: 2020<br />litres:  30607265<br />type: Spirits","year: 2021<br />litres:  30565978<br />type: Spirits","year: 2022<br />litres:  31156754<br />type: Spirits"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(254,178,76,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Spirits","legendgroup":"Spirits","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9,0.9,0.9,0.9,0.9,0.9],"base":[371389789,374839785,371664229,361383148,356539076,347986142,342074791],"x":[1,2,3,4,5,6,7],"y":[42822263,47595683,54800877,63765050,84125299,89934235,85754556],"text":["year: 2016<br />litres:  42822263<br />type: Refresh Bev","year: 2017<br />litres:  47595683<br />type: Refresh Bev","year: 2018<br />litres:  54800877<br />type: Refresh Bev","year: 2019<br />litres:  63765050<br />type: Refresh Bev","year: 2020<br />litres:  84125299<br />type: Refresh Bev","year: 2021<br />litres:  89934235<br />type: Refresh Bev","year: 2022<br />litres:  85754556<br />type: Refresh Bev"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(254,217,118,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Refresh Bev","legendgroup":"Refresh Bev","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9,0.9,0.9,0.9,0.9,0.9],"base":[295260218,298034136,294697574,284511451,275383749,270003650,267876006],"x":[1,2,3,4,5,6,7],"y":[76129571,76805649,76966655,76871697,81155327,77982492,74198785],"text":["year: 2016<br />litres:  76129571<br />type: Wine","year: 2017<br />litres:  76805649<br />type: Wine","year: 2018<br />litres:  76966655<br />type: Wine","year: 2019<br />litres:  76871697<br />type: Wine","year: 2020<br />litres:  81155327<br />type: Wine","year: 2021<br />litres:  77982492<br />type: Wine","year: 2022<br />litres:  74198785<br />type: Wine"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(189,0,38,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Wine","legendgroup":"Wine","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9,0.9,0.9,0.9,0.9,0.9],"base":[0,0,0,0,0,0,0],"x":[1,2,3,4,5,6,7],"y":[295260218,298034136,294697574,284511451,275383749,270003650,267876006],"text":["year: 2016<br />litres: 295260218<br />type: Beer","year: 2017<br />litres: 298034136<br />type: Beer","year: 2018<br />litres: 294697574<br />type: Beer","year: 2019<br />litres: 284511451<br />type: Beer","year: 2020<br />litres: 275383749<br />type: Beer","year: 2021<br />litres: 270003650<br />type: Beer","year: 2022<br />litres: 267876006<br />type: Beer"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(252,78,42,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Beer","legendgroup":"Beer","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.2754946727549,"r":7.30593607305936,"b":25.0837138508371,"l":34.337899543379},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"title":{"text":"Volume (Litres) by Type","font":{"color":"rgba(0,0,0,1)","family":"","size":17.5342465753425},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.4,7.6],"tickmode":"array","ticktext":["2016","2017","2018","2019","2020","2021","2022"],"tickvals":[1,2,3,4,5,6,7],"categoryorder":"array","categoryarray":["2016","2017","2018","2019","2020","2021","2022"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"y","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0,518398804],"tickmode":"array","ticktext":["0M","100M","200M","300M","400M","500M"],"tickvals":[0,100000000,200000000,300000000,400000000,500000000],"categoryorder":"array","categoryarray":["0M","100M","200M","300M","400M","500M"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895},"title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"e55b1b06d5d7":{"x":{},"y":{},"fill":{},"type":"bar"}},"cur_data":"e55b1b06d5d7","visdat":{"e55b1b06d5d7":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p><strong>Beer constitutes the largest volume</strong> by far (no surprise), although has been shrinking, with <strong>growth in Refreshment Beverage</strong> volume. Beer went from 295M litres in 2016 to 268M in 2022, while <strong>Refreshment Beverages went from 43M to 86M during the same period</strong>.</p>
<p>Percentage breakdown highlights even further the <strong>decline in beer share of volume</strong> (still well over 50%), mostly due to increase in <strong>Refreshment Beverages</strong> sales.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># annual litres by type (stack)</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>ch_title <span class="ot">&lt;-</span> <span class="st">"Volume (Litres) by Type"</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="co"># order type by netsales for chart</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>trend_yr_cat<span class="sc">$</span>type <span class="ot">&lt;-</span> <span class="fu">fct_reorder</span>(trend_yr_cat<span class="sc">$</span>type, trend_yr_cat<span class="sc">$</span>litres)</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>plot <span class="ot">&lt;-</span> trend_yr_cat <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>year, <span class="at">y=</span>pc_ttl_litres, <span class="at">fill=</span>type))<span class="sc">+</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">position=</span><span class="st">'fill'</span>)<span class="sc">+</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels=</span><span class="fu">percent_format</span>(), <span class="at">expand=</span><span class="fu">expansion</span>(<span class="at">mult =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="fl">0.1</span>)))<span class="sc">+</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values=</span>type_color)<span class="sc">+</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span>ch_title, <span class="at">x=</span><span class="st">""</span>,<span class="at">y=</span><span class="st">""</span>, <span class="at">fill=</span><span class="st">""</span>)<span class="sc">+</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.ticks.x =</span> <span class="fu">element_blank</span>())</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(plot)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-82071be7a5657555ac7b" style="width:100%;height:487px;"></div>
<script type="application/json" data-for="htmlwidget-82071be7a5657555ac7b">{"x":{"data":[{"orientation":"v","width":[0.9,0.9,0.9,0.9,0.9,0.9,0.9],"base":[0.939611605762101,0.939915618817532,0.939574008202511,0.938327971039741,0.935053878905168,0.934755884192187,0.932118306127096],"x":[1,2,3,4,5,6,7],"y":[0.0603883942378985,0.0600843811824676,0.0604259917974889,0.0616720289602588,0.0649461210948319,0.0652441158078125,0.0678816938729044],"text":["year: 2016<br />pc_ttl_litres: 0.06038839<br />type: Spirits","year: 2017<br />pc_ttl_litres: 0.06008438<br />type: Spirits","year: 2018<br />pc_ttl_litres: 0.06042599<br />type: Spirits","year: 2019<br />pc_ttl_litres: 0.06167203<br />type: Spirits","year: 2020<br />pc_ttl_litres: 0.06494612<br />type: Spirits","year: 2021<br />pc_ttl_litres: 0.06524412<br />type: Spirits","year: 2022<br />pc_ttl_litres: 0.06788169<br />type: Spirits"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(254,178,76,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Spirits","legendgroup":"Spirits","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9,0.9,0.9,0.9,0.9,0.9],"base":[0.842472241744279,0.834015595668936,0.818838503863493,0.797594621419034,0.756546852681396,0.74278821204942,0.745283550536098],"x":[1,2,3,4,5,6,7],"y":[0.097139364017822,0.105900023148596,0.120735504339018,0.140733349620707,0.178507026223772,0.191967672142767,0.186834755590998],"text":["year: 2016<br />pc_ttl_litres: 0.09713936<br />type: Refresh Bev","year: 2017<br />pc_ttl_litres: 0.10590002<br />type: Refresh Bev","year: 2018<br />pc_ttl_litres: 0.12073550<br />type: Refresh Bev","year: 2019<br />pc_ttl_litres: 0.14073335<br />type: Refresh Bev","year: 2020<br />pc_ttl_litres: 0.17850703<br />type: Refresh Bev","year: 2021<br />pc_ttl_litres: 0.19196767<br />type: Refresh Bev","year: 2022<br />pc_ttl_litres: 0.18683476<br />type: Refresh Bev"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(254,217,118,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Refresh Bev","legendgroup":"Refresh Bev","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9,0.9,0.9,0.9,0.9,0.9],"base":[0.669777535957955,0.66312362617996,0.64926808058884,0.627934103473262,0.584341864916803,0.576331940340077,0.583625529000496],"x":[1,2,3,4,5,6,7],"y":[0.172694705786325,0.170891969488976,0.169570423274653,0.169660517945772,0.172204987764594,0.166456271709344,0.161658021535602],"text":["year: 2016<br />pc_ttl_litres: 0.17269471<br />type: Wine","year: 2017<br />pc_ttl_litres: 0.17089197<br />type: Wine","year: 2018<br />pc_ttl_litres: 0.16957042<br />type: Wine","year: 2019<br />pc_ttl_litres: 0.16966052<br />type: Wine","year: 2020<br />pc_ttl_litres: 0.17220499<br />type: Wine","year: 2021<br />pc_ttl_litres: 0.16645627<br />type: Wine","year: 2022<br />pc_ttl_litres: 0.16165802<br />type: Wine"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(189,0,38,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Wine","legendgroup":"Wine","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9,0.9,0.9,0.9,0.9,0.9],"base":[0,0,0,0,0,0,0],"x":[1,2,3,4,5,6,7],"y":[0.669777535957955,0.66312362617996,0.64926808058884,0.627934103473262,0.584341864916803,0.576331940340077,0.583625529000496],"text":["year: 2016<br />pc_ttl_litres: 0.66977754<br />type: Beer","year: 2017<br />pc_ttl_litres: 0.66312363<br />type: Beer","year: 2018<br />pc_ttl_litres: 0.64926808<br />type: Beer","year: 2019<br />pc_ttl_litres: 0.62793410<br />type: Beer","year: 2020<br />pc_ttl_litres: 0.58434186<br />type: Beer","year: 2021<br />pc_ttl_litres: 0.57633194<br />type: Beer","year: 2022<br />pc_ttl_litres: 0.58362553<br />type: Beer"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(252,78,42,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Beer","legendgroup":"Beer","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.2754946727549,"r":7.30593607305936,"b":25.0837138508371,"l":34.337899543379},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"title":{"text":"Volume (Litres) by Type","font":{"color":"rgba(0,0,0,1)","family":"","size":17.5342465753425},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.4,7.6],"tickmode":"array","ticktext":["2016","2017","2018","2019","2020","2021","2022"],"tickvals":[1,2,3,4,5,6,7],"categoryorder":"array","categoryarray":["2016","2017","2018","2019","2020","2021","2022"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"y","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0,1.1],"tickmode":"array","ticktext":["0%","25%","50%","75%","100%"],"tickvals":[0,0.25,0.5,0.75,1],"categoryorder":"array","categoryarray":["0%","25%","50%","75%","100%"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895},"title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"e55b348d7c67":{"x":{},"y":{},"fill":{},"type":"bar"}},"cur_data":"e55b348d7c67","visdat":{"e55b348d7c67":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Beer has gone from almost 70% to under 60% of volume by type, with Refreshment Beverages taking the share and rising to 19% of total.</p>
<section id="by-type-year-over-year-change-in-sales" class="level4">
<h4 class="anchored" data-anchor-id="by-type-year-over-year-change-in-sales"><strong>By Type: Year-over-Year % Change in $ Sales</strong></h4>
<p><strong>Refreshment Beverage growth</strong> in litres is lower than growth in dollar sales, but still impressive, <strong>peaking at over 30% year-over-year.</strong></p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>ch_title <span class="ot">&lt;-</span> <span class="st">"% Chg in Volume (Litres), Year-over-Year by Type"</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="do">## using prev calc. value for first yr, to remove first yr since no % chg value</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>plot <span class="ot">&lt;-</span> trend_yr_cat <span class="sc">%&gt;%</span> <span class="fu">filter</span>(year<span class="sc">!=</span>min_yr) <span class="sc">%&gt;%</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>year, <span class="at">y=</span>pc_chg_litre))<span class="sc">+</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">fill=</span>bar_col)<span class="sc">+</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>)<span class="sc">+</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(.<span class="sc">~</span>type)<span class="sc">+</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels=</span><span class="fu">percent_format</span>())<span class="sc">+</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">strip.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> bar_col)) <span class="sc">+</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">strip.text=</span><span class="fu">element_text</span>(<span class="at">color=</span><span class="st">'white'</span>))<span class="sc">+</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span>ch_title, <span class="at">x=</span><span class="st">""</span>,<span class="at">y=</span><span class="st">""</span>)<span class="sc">+</span></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x=</span><span class="fu">element_text</span>(<span class="at">hjust=</span><span class="dv">0</span>, <span class="at">vjust=</span><span class="fl">0.5</span>, <span class="at">angle=</span><span class="dv">90</span>),</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.ticks.x =</span> <span class="fu">element_blank</span>()</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>        ,<span class="at">panel.border =</span> <span class="fu">element_rect</span>(<span class="at">fill=</span><span class="cn">NA</span>)</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>        ) </span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(plot)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-e3d751a7e575cc62fcaa" style="width:100%;height:487px;"></div>
<script type="application/json" data-for="htmlwidget-e3d751a7e575cc62fcaa">{"x":{"data":[{"orientation":"v","width":[0.9,0.9,0.9,0.9,0.9,0.9],"base":[0,0,0,0,-0.00134892810579446,0],"x":[1,2,3,4,5,6],"y":[0.0143907041350821,0.0156479459890682,0.0188203737261627,0.0953441851405163,0.00134892810579446,0.0193278945630335],"text":["year: 2017<br />pc_chg_litre:  0.014390704","year: 2018<br />pc_chg_litre:  0.015647946","year: 2019<br />pc_chg_litre:  0.018820374","year: 2020<br />pc_chg_litre:  0.095344185","year: 2021<br />pc_chg_litre: -0.001348928","year: 2022<br />pc_chg_litre:  0.019327895"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(8,29,88,1)","line":{"width":1.88976377952756,"color":"transparent"}},"showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9,0.9,0.9,0.9,0.9],"base":[0,0,0,0,0,-0.04647483797466],"x":[1,2,3,4,5,6],"y":[0.111470521770416,0.151383351300999,0.163577181438173,0.319301074805085,0.0690509997474125,0.04647483797466],"text":["year: 2017<br />pc_chg_litre:  0.111470522","year: 2018<br />pc_chg_litre:  0.151383351","year: 2019<br />pc_chg_litre:  0.163577181","year: 2020<br />pc_chg_litre:  0.319301075","year: 2021<br />pc_chg_litre:  0.069051000","year: 2022<br />pc_chg_litre: -0.046474838"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(8,29,88,1)","line":{"width":1.88976377952756,"color":"transparent"}},"showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9,0.9,0.9,0.9,0.9],"base":[0,0,-0.00123375505925261,0,-0.0390958316266781,-0.0485199549663019],"x":[1,2,3,4,5,6],"y":[0.00888062274776247,0.00209627810058599,0.00123375505925261,0.0557244105070296,0.0390958316266781,0.0485199549663019],"text":["year: 2017<br />pc_chg_litre:  0.008880623","year: 2018<br />pc_chg_litre:  0.002096278","year: 2019<br />pc_chg_litre: -0.001233755","year: 2020<br />pc_chg_litre:  0.055724411","year: 2021<br />pc_chg_litre: -0.039095832","year: 2022<br />pc_chg_litre: -0.048519955"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(8,29,88,1)","line":{"width":1.88976377952756,"color":"transparent"}},"showlegend":false,"xaxis":"x3","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9,0.9,0.9,0.9,0.9],"base":[0,-0.0111952343606707,-0.0345646652659584,-0.0320820197848557,-0.0195367338106796,-0.0078800564362741],"x":[1,2,3,4,5,6],"y":[0.00939482473727637,0.0111952343606707,0.0345646652659584,0.0320820197848557,0.0195367338106796,0.0078800564362741],"text":["year: 2017<br />pc_chg_litre:  0.009394825","year: 2018<br />pc_chg_litre: -0.011195234","year: 2019<br />pc_chg_litre: -0.034564665","year: 2020<br />pc_chg_litre: -0.032082020","year: 2021<br />pc_chg_litre: -0.019536734","year: 2022<br />pc_chg_litre: -0.007880056"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(8,29,88,1)","line":{"width":1.88976377952756,"color":"transparent"}},"showlegend":false,"xaxis":"x4","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.4,6.6],"y":[0,0],"text":"yintercept: 0","type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.4,6.6],"y":[0,0],"text":"yintercept: 0","type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.4,6.6],"y":[0,0],"text":"yintercept: 0","type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x3","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.4,6.6],"y":[0,0],"text":"yintercept: 0","type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x4","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":54.9649923896499,"r":18.9954337899543,"b":36.7732115677321,"l":28.4931506849315},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"title":{"text":"% Chg in Volume (Litres), Year-over-Year by Type","font":{"color":"rgba(0,0,0,1)","family":"","size":17.5342465753425},"x":0,"xref":"paper"},"xaxis":{"domain":[0,0.230974124809741],"automargin":true,"type":"linear","autorange":false,"range":[0.4,6.6],"tickmode":"array","ticktext":["2017","2018","2019","2020","2021","2022"],"tickvals":[1,2,3,4,5,6],"categoryorder":"array","categoryarray":["2017","2018","2019","2020","2021","2022"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-90,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"y","title":"","hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-0.0669110064548713,0.337692126293655],"tickmode":"array","ticktext":["0%","10%","20%","30%"],"tickvals":[0,0.1,0.2,0.3],"categoryorder":"array","categoryarray":["0%","10%","20%","30%"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(0,0,0,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":0.230974124809741,"y0":0,"y1":1},{"type":"rect","fillcolor":"rgba(8,29,88,1)","line":{"color":"rgba(0,0,0,1)","width":1.32835201328352,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":0.230974124809741,"y0":0,"y1":23.37899543379,"yanchor":1,"ysizemode":"pixel"},{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(0,0,0,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.269025875190259,"x1":0.480974124809741,"y0":0,"y1":1},{"type":"rect","fillcolor":"rgba(8,29,88,1)","line":{"color":"rgba(0,0,0,1)","width":1.32835201328352,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.269025875190259,"x1":0.480974124809741,"y0":0,"y1":23.37899543379,"yanchor":1,"ysizemode":"pixel"},{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(0,0,0,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.519025875190259,"x1":0.730974124809741,"y0":0,"y1":1},{"type":"rect","fillcolor":"rgba(8,29,88,1)","line":{"color":"rgba(0,0,0,1)","width":1.32835201328352,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.519025875190259,"x1":0.730974124809741,"y0":0,"y1":23.37899543379,"yanchor":1,"ysizemode":"pixel"},{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(0,0,0,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.769025875190259,"x1":1,"y0":0,"y1":1},{"type":"rect","fillcolor":"rgba(8,29,88,1)","line":{"color":"rgba(0,0,0,1)","width":1.32835201328352,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.769025875190259,"x1":1,"y0":0,"y1":23.37899543379,"yanchor":1,"ysizemode":"pixel"}],"annotations":[{"text":"Spirits","x":0.115487062404871,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(255,255,255,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"Refresh Bev","x":0.375,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(255,255,255,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"Wine","x":0.625,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(255,255,255,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"Beer","x":0.884512937595129,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(255,255,255,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"}],"xaxis2":{"type":"linear","autorange":false,"range":[0.4,6.6],"tickmode":"array","ticktext":["2017","2018","2019","2020","2021","2022"],"tickvals":[1,2,3,4,5,6],"categoryorder":"array","categoryarray":["2017","2018","2019","2020","2021","2022"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-90,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176,"showgrid":false,"domain":[0.269025875190259,0.480974124809741],"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"y","title":"","hoverformat":".2f"},"xaxis3":{"type":"linear","autorange":false,"range":[0.4,6.6],"tickmode":"array","ticktext":["2017","2018","2019","2020","2021","2022"],"tickvals":[1,2,3,4,5,6],"categoryorder":"array","categoryarray":["2017","2018","2019","2020","2021","2022"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-90,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176,"showgrid":false,"domain":[0.519025875190259,0.730974124809741],"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"y","title":"","hoverformat":".2f"},"xaxis4":{"type":"linear","autorange":false,"range":[0.4,6.6],"tickmode":"array","ticktext":["2017","2018","2019","2020","2021","2022"],"tickvals":[1,2,3,4,5,6],"categoryorder":"array","categoryarray":["2017","2018","2019","2020","2021","2022"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-90,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176,"showgrid":false,"domain":[0.769025875190259,1],"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"y","title":"","hoverformat":".2f"},"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"e55b1b7d60e6":{"x":{},"y":{},"type":"bar"},"e55b4464aa23":{"yintercept":{}}},"cur_data":"e55b1b7d60e6","visdat":{"e55b1b7d60e6":["function (y) ","x"],"e55b4464aa23":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p><strong>Beer had declining volume in the most recent 5 years</strong>, although may be stabilizing. Other types all had strongest volume growth in 2020 during the pandemic. Refreshment beverages saw decline in growth rate in 2022 after 5 years of strong growth.</p>
<p>Interestingly, <strong>Beer</strong> was the only beverage type that <strong>did not experience growth during the first year of covid-19 pandemic</strong> - maybe due to relatively high consumption of beer consumed in bars and restaurants? That could explain why declining growth decreased as pandemic restrictions faded.</p>
</section>
</section>
<section id="by-type-litre" class="level3">
<h3 class="anchored" data-anchor-id="by-type-litre">By Type: $/Litre</h3>
<p>Breaking out $/litre (proxy for price) by beverage type shows that not all increase at the same rate, and even <strong>$/litre</strong> <strong><em>decreases</em></strong> <strong>are possible</strong>.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>ch_title <span class="ot">&lt;-</span> <span class="st">"$/Litre by Type"</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>plot <span class="ot">&lt;-</span> trend_yr_cat <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>year, <span class="at">y=</span>dollar_per_litre, <span class="at">color=</span>type, <span class="at">group=</span>type))<span class="sc">+</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size=</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">y=</span>dollar_per_litre), <span class="at">size=</span><span class="dv">2</span>)<span class="sc">+</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels=</span><span class="fu">label_comma</span>(<span class="at">prefix=</span><span class="st">"$"</span>))<span class="sc">+</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">breaks=</span>trend_yr_cat<span class="sc">$</span>year)<span class="sc">+</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values=</span>type_color)<span class="sc">+</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span>ch_title, <span class="at">x=</span><span class="st">""</span>, <span class="at">y=</span><span class="st">""</span>, <span class="at">color=</span><span class="st">""</span>)</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(plot)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-8c97dc458fb074aa37e0" style="width:100%;height:487px;"></div>
<script type="application/json" data-for="htmlwidget-8c97dc458fb074aa37e0">{"x":{"data":[{"x":[1,2,3,4,5,6,7],"y":[27.638021415478,28.0651752973812,28.5565179814702,29.0266726722134,29.2170934580401,30.2780748255462,31.259507713801],"text":["year: 2016<br />dollar_per_litre: 27.638021<br />type: Spirits<br />type: Spirits","year: 2017<br />dollar_per_litre: 28.065175<br />type: Spirits<br />type: Spirits","year: 2018<br />dollar_per_litre: 28.556518<br />type: Spirits<br />type: Spirits","year: 2019<br />dollar_per_litre: 29.026673<br />type: Spirits<br />type: Spirits","year: 2020<br />dollar_per_litre: 29.217093<br />type: Spirits<br />type: Spirits","year: 2021<br />dollar_per_litre: 30.278075<br />type: Spirits<br />type: Spirits","year: 2022<br />dollar_per_litre: 31.259508<br />type: Spirits<br />type: Spirits"],"type":"scatter","mode":"lines+markers","line":{"width":3.77952755905512,"color":"rgba(254,178,76,1)","dash":"solid"},"hoveron":"points","name":"Spirits","legendgroup":"Spirits","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","marker":{"autocolorscale":false,"color":"rgba(254,178,76,1)","opacity":1,"size":7.55905511811024,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(254,178,76,1)"}},"frame":null},{"x":[1,2,3,4,5,6,7],"y":[4.17226656143791,4.1910281442962,4.32263060315622,4.43985222312223,4.52098844843333,4.64917461075863,4.94850520828304],"text":["year: 2016<br />dollar_per_litre:  4.172267<br />type: Refresh Bev<br />type: Refresh Bev","year: 2017<br />dollar_per_litre:  4.191028<br />type: Refresh Bev<br />type: Refresh Bev","year: 2018<br />dollar_per_litre:  4.322631<br />type: Refresh Bev<br />type: Refresh Bev","year: 2019<br />dollar_per_litre:  4.439852<br />type: Refresh Bev<br />type: Refresh Bev","year: 2020<br />dollar_per_litre:  4.520988<br />type: Refresh Bev<br />type: Refresh Bev","year: 2021<br />dollar_per_litre:  4.649175<br />type: Refresh Bev<br />type: Refresh Bev","year: 2022<br />dollar_per_litre:  4.948505<br />type: Refresh Bev<br />type: Refresh Bev"],"type":"scatter","mode":"lines+markers","line":{"width":3.77952755905512,"color":"rgba(254,217,118,1)","dash":"solid"},"hoveron":"points","name":"Refresh Bev","legendgroup":"Refresh Bev","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","marker":{"autocolorscale":false,"color":"rgba(254,217,118,1)","opacity":1,"size":7.55905511811024,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(254,217,118,1)"}},"frame":null},{"x":[1,2,3,4,5,6,7],"y":[13.5981085720291,13.9887157649042,14.2558809266169,14.4933508752903,14.164089191582,15.0722747870124,16.0405913924332],"text":["year: 2016<br />dollar_per_litre: 13.598109<br />type: Wine<br />type: Wine","year: 2017<br />dollar_per_litre: 13.988716<br />type: Wine<br />type: Wine","year: 2018<br />dollar_per_litre: 14.255881<br />type: Wine<br />type: Wine","year: 2019<br />dollar_per_litre: 14.493351<br />type: Wine<br />type: Wine","year: 2020<br />dollar_per_litre: 14.164089<br />type: Wine<br />type: Wine","year: 2021<br />dollar_per_litre: 15.072275<br />type: Wine<br />type: Wine","year: 2022<br />dollar_per_litre: 16.040591<br />type: Wine<br />type: Wine"],"type":"scatter","mode":"lines+markers","line":{"width":3.77952755905512,"color":"rgba(189,0,38,1)","dash":"solid"},"hoveron":"points","name":"Wine","legendgroup":"Wine","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","marker":{"autocolorscale":false,"color":"rgba(189,0,38,1)","opacity":1,"size":7.55905511811024,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(189,0,38,1)"}},"frame":null},{"x":[1,2,3,4,5,6,7],"y":[3.66057585515974,3.73499286001252,3.78444274536172,3.8101950631154,3.85487058642665,3.90356882212518,4.02841212661652],"text":["year: 2016<br />dollar_per_litre:  3.660576<br />type: Beer<br />type: Beer","year: 2017<br />dollar_per_litre:  3.734993<br />type: Beer<br />type: Beer","year: 2018<br />dollar_per_litre:  3.784443<br />type: Beer<br />type: Beer","year: 2019<br />dollar_per_litre:  3.810195<br />type: Beer<br />type: Beer","year: 2020<br />dollar_per_litre:  3.854871<br />type: Beer<br />type: Beer","year: 2021<br />dollar_per_litre:  3.903569<br />type: Beer<br />type: Beer","year: 2022<br />dollar_per_litre:  4.028412<br />type: Beer<br />type: Beer"],"type":"scatter","mode":"lines+markers","line":{"width":3.77952755905512,"color":"rgba(252,78,42,1)","dash":"solid"},"hoveron":"points","name":"Beer","legendgroup":"Beer","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","marker":{"autocolorscale":false,"color":"rgba(252,78,42,1)","opacity":1,"size":7.55905511811024,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(252,78,42,1)"}},"frame":null}],"layout":{"margin":{"t":43.2754946727549,"r":7.30593607305936,"b":25.0837138508371,"l":28.4931506849315},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"title":{"text":"$/Litre by Type","font":{"color":"rgba(0,0,0,1)","family":"","size":17.5342465753425},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.4,7.6],"tickmode":"array","ticktext":["2016","2017","2018","2019","2020","2021","2022"],"tickvals":[1,2,3,4,5,6,7],"categoryorder":"array","categoryarray":["2016","2017","2018","2019","2020","2021","2022"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"y","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[2.28062926222767,32.6394543067331],"tickmode":"array","ticktext":["$10","$20","$30"],"tickvals":[10,20,30],"categoryorder":"array","categoryarray":["$10","$20","$30"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895},"title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"e55b31e075bf":{"x":{},"y":{},"colour":{},"type":"scatter"},"e55b752682e":{"x":{},"y":{},"colour":{}}},"cur_data":"e55b31e075bf","visdat":{"e55b31e075bf":["function (y) ","x"],"e55b752682e":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<section id="by-type-year-over-year-change-in-litre" class="level4">
<h4 class="anchored" data-anchor-id="by-type-year-over-year-change-in-litre"><strong>By Type: Year-over-Year % Change in $/Litre</strong></h4>
<p>Wide range of price categories obscures the changes at high level - % change year-over-year makes trends more visible.</p>
<p><strong>Refreshment Beverage</strong> growth in both $ sales and litre volume comes through in <strong>strongest growth in $/litre of any beverage type</strong>:</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>ch_title <span class="ot">&lt;-</span> <span class="st">"% Chg in $/Litres, Year-over-Year by Type"</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>plot <span class="ot">&lt;-</span> trend_yr_cat <span class="sc">%&gt;%</span> <span class="fu">filter</span>(year<span class="sc">!=</span>min_yr) <span class="sc">%&gt;%</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>year, <span class="at">y=</span>pc_chg_dollar_per_l))<span class="sc">+</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">fill=</span>bar_col)<span class="sc">+</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>)<span class="sc">+</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(.<span class="sc">~</span>type)<span class="sc">+</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels=</span><span class="fu">percent_format</span>())<span class="sc">+</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">strip.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> bar_col)) <span class="sc">+</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">strip.text=</span><span class="fu">element_text</span>(<span class="at">color=</span><span class="st">'white'</span>))<span class="sc">+</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span>ch_title, <span class="at">x=</span><span class="st">""</span>,<span class="at">y=</span><span class="st">""</span>)<span class="sc">+</span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x=</span><span class="fu">element_text</span>(<span class="at">hjust=</span><span class="dv">0</span>, <span class="at">vjust=</span><span class="fl">0.5</span>, <span class="at">angle=</span><span class="dv">90</span>),</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.ticks.x =</span> <span class="fu">element_blank</span>()</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>        ,<span class="at">panel.border =</span> <span class="fu">element_rect</span>(<span class="at">fill=</span><span class="cn">NA</span>)</span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>        ) </span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(plot)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-20e833b2113674798de3" style="width:100%;height:487px;"></div>
<script type="application/json" data-for="htmlwidget-20e833b2113674798de3">{"x":{"data":[{"orientation":"v","width":[0.9,0.9,0.9,0.9,0.9,0.9],"base":[0,0,0,0,0,0],"x":[1,2,3,4,5,6],"y":[0.0154552988971943,0.0175072016790447,0.0164640062576329,0.00656020026742654,0.0363137205632671,0.0324139792212517],"text":["year: 2017<br />pc_chg_dollar_per_l:  0.015455299","year: 2018<br />pc_chg_dollar_per_l:  0.017507202","year: 2019<br />pc_chg_dollar_per_l:  0.016464006","year: 2020<br />pc_chg_dollar_per_l:  0.006560200","year: 2021<br />pc_chg_dollar_per_l:  0.036313721","year: 2022<br />pc_chg_dollar_per_l:  0.032413979"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(8,29,88,1)","line":{"width":1.88976377952756,"color":"transparent"}},"showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9,0.9,0.9,0.9,0.9],"base":[0,0,0,0,0,0],"x":[1,2,3,4,5,6],"y":[0.00449673638584969,0.0314009962064159,0.0271181210535116,0.0182745328523672,0.0283535699742206,0.0643835997967761],"text":["year: 2017<br />pc_chg_dollar_per_l:  0.004496736","year: 2018<br />pc_chg_dollar_per_l:  0.031400996","year: 2019<br />pc_chg_dollar_per_l:  0.027118121","year: 2020<br />pc_chg_dollar_per_l:  0.018274533","year: 2021<br />pc_chg_dollar_per_l:  0.028353570","year: 2022<br />pc_chg_dollar_per_l:  0.064383600"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(8,29,88,1)","line":{"width":1.88976377952756,"color":"transparent"}},"showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9,0.9,0.9,0.9,0.9],"base":[0,0,0,-0.0227181199531769,0,0],"x":[1,2,3,4,5,6],"y":[0.0287251120849674,0.0190986196447653,0.0166576832323324,0.0227181199531769,0.0641188842534428,0.0642448879883157],"text":["year: 2017<br />pc_chg_dollar_per_l:  0.028725112","year: 2018<br />pc_chg_dollar_per_l:  0.019098620","year: 2019<br />pc_chg_dollar_per_l:  0.016657683","year: 2020<br />pc_chg_dollar_per_l: -0.022718120","year: 2021<br />pc_chg_dollar_per_l:  0.064118884","year: 2022<br />pc_chg_dollar_per_l:  0.064244888"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(8,29,88,1)","line":{"width":1.88976377952756,"color":"transparent"}},"showlegend":false,"xaxis":"x3","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.9,0.9,0.9,0.9,0.9,0.9],"base":[0,0,0,0,0,0],"x":[1,2,3,4,5,6],"y":[0.0203293164237777,0.0132396197804352,0.00680478461069112,0.0117252588309009,0.0126329106533436,0.0319818376926608],"text":["year: 2017<br />pc_chg_dollar_per_l:  0.020329316","year: 2018<br />pc_chg_dollar_per_l:  0.013239620","year: 2019<br />pc_chg_dollar_per_l:  0.006804785","year: 2020<br />pc_chg_dollar_per_l:  0.011725259","year: 2021<br />pc_chg_dollar_per_l:  0.012632911","year: 2022<br />pc_chg_dollar_per_l:  0.031981838"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(8,29,88,1)","line":{"width":1.88976377952756,"color":"transparent"}},"showlegend":false,"xaxis":"x4","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.4,6.6],"y":[0,0],"text":"yintercept: 0","type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.4,6.6],"y":[0,0],"text":"yintercept: 0","type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.4,6.6],"y":[0,0],"text":"yintercept: 0","type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x3","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.4,6.6],"y":[0,0],"text":"yintercept: 0","type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x4","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":54.9649923896499,"r":18.9954337899543,"b":36.7732115677321,"l":40.1826484018265},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"title":{"text":"% Chg in $/Litres, Year-over-Year by Type","font":{"color":"rgba(0,0,0,1)","family":"","size":17.5342465753425},"x":0,"xref":"paper"},"xaxis":{"domain":[0,0.230974124809741],"automargin":true,"type":"linear","autorange":false,"range":[0.4,6.6],"tickmode":"array","ticktext":["2017","2018","2019","2020","2021","2022"],"tickvals":[1,2,3,4,5,6],"categoryorder":"array","categoryarray":["2017","2018","2019","2020","2021","2022"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-90,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"y","title":"","hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-0.0270732059406745,0.0687386857842738],"tickmode":"array","ticktext":["-2.5%","0.0%","2.5%","5.0%"],"tickvals":[-0.025,3.46944695195361e-18,0.025,0.05],"categoryorder":"array","categoryarray":["-2.5%","0.0%","2.5%","5.0%"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(0,0,0,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":0.230974124809741,"y0":0,"y1":1},{"type":"rect","fillcolor":"rgba(8,29,88,1)","line":{"color":"rgba(0,0,0,1)","width":1.32835201328352,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":0.230974124809741,"y0":0,"y1":23.37899543379,"yanchor":1,"ysizemode":"pixel"},{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(0,0,0,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.269025875190259,"x1":0.480974124809741,"y0":0,"y1":1},{"type":"rect","fillcolor":"rgba(8,29,88,1)","line":{"color":"rgba(0,0,0,1)","width":1.32835201328352,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.269025875190259,"x1":0.480974124809741,"y0":0,"y1":23.37899543379,"yanchor":1,"ysizemode":"pixel"},{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(0,0,0,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.519025875190259,"x1":0.730974124809741,"y0":0,"y1":1},{"type":"rect","fillcolor":"rgba(8,29,88,1)","line":{"color":"rgba(0,0,0,1)","width":1.32835201328352,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.519025875190259,"x1":0.730974124809741,"y0":0,"y1":23.37899543379,"yanchor":1,"ysizemode":"pixel"},{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(0,0,0,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.769025875190259,"x1":1,"y0":0,"y1":1},{"type":"rect","fillcolor":"rgba(8,29,88,1)","line":{"color":"rgba(0,0,0,1)","width":1.32835201328352,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.769025875190259,"x1":1,"y0":0,"y1":23.37899543379,"yanchor":1,"ysizemode":"pixel"}],"annotations":[{"text":"Spirits","x":0.115487062404871,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(255,255,255,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"Refresh Bev","x":0.375,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(255,255,255,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"Wine","x":0.625,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(255,255,255,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"Beer","x":0.884512937595129,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(255,255,255,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"}],"xaxis2":{"type":"linear","autorange":false,"range":[0.4,6.6],"tickmode":"array","ticktext":["2017","2018","2019","2020","2021","2022"],"tickvals":[1,2,3,4,5,6],"categoryorder":"array","categoryarray":["2017","2018","2019","2020","2021","2022"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-90,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176,"showgrid":false,"domain":[0.269025875190259,0.480974124809741],"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"y","title":"","hoverformat":".2f"},"xaxis3":{"type":"linear","autorange":false,"range":[0.4,6.6],"tickmode":"array","ticktext":["2017","2018","2019","2020","2021","2022"],"tickvals":[1,2,3,4,5,6],"categoryorder":"array","categoryarray":["2017","2018","2019","2020","2021","2022"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-90,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176,"showgrid":false,"domain":[0.519025875190259,0.730974124809741],"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"y","title":"","hoverformat":".2f"},"xaxis4":{"type":"linear","autorange":false,"range":[0.4,6.6],"tickmode":"array","ticktext":["2017","2018","2019","2020","2021","2022"],"tickvals":[1,2,3,4,5,6],"categoryorder":"array","categoryarray":["2017","2018","2019","2020","2021","2022"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-90,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176,"showgrid":false,"domain":[0.769025875190259,1],"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"y","title":"","hoverformat":".2f"},"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"e55b4d0668bf":{"x":{},"y":{},"type":"bar"},"e55b5fc6fb1a":{"yintercept":{}}},"cur_data":"e55b4d0668bf","visdat":{"e55b4d0668bf":["function (y) ","x"],"e55b5fc6fb1a":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p><strong>Wine</strong> is an interesting case of <strong>decrease in $/litre in 2020</strong> - under 2.5%, but a decrease nevertheless. It’s possible this <em>may</em> have been influenced by the <a href="https://news.gov.bc.ca/releases/2021PSSG0014-000308">changes to LDB pricing model for hospitality industry in 2020</a> during the pandemic, which allowed restaurants and pubs to purchase alcohol at wholesale prices.</p>
</section>
</section>
</section>
<section id="litre-vs-volume-and-sales" class="level2">
<h2 class="anchored" data-anchor-id="litre-vs-volume-and-sales">$/Litre vs Volume and $ Sales</h2>
<p>Exploring the relationship between changes in $/Litre (proxy for price) and changes in volume, as well as changes in $/Litre and total $ sales:</p>
<ul>
<li>Are price changes associated with changes in volume purchases?</li>
<li>Are price changes associated with changes in total $ sales?</li>
</ul>
<p>Notes on two charts below:</p>
<ul>
<li><strong>y-axis</strong> is adjusted for each beverage type to match the data for that type, so please take that into account.</li>
<li><strong>red dotted lines</strong> are the 0 axis, both vertically and horizontally.</li>
</ul>
<section id="changes-in-litre-vs-changes-in-volume" class="level3">
<h3 class="anchored" data-anchor-id="changes-in-litre-vs-changes-in-volume"><strong>Changes in $/Litre vs Changes in Volume</strong></h3>
<p>For changes in $/litre vs volume, in general, we would expect dots to be in the top left (price decrease, volume increase) or bottom right (price increase, volume decrease).</p>
<p>In other words: less is more (and vice versa) - assuming price sensitivity.</p>
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>ch_title <span class="ot">&lt;-</span> <span class="st">"Relationship Between Changes in $/litre and volume"</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="do">## convert year to numeric for color gradient</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>trend_yr_cat<span class="sc">$</span>year <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="fu">as.character</span>(trend_yr_cat<span class="sc">$</span>year)) </span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>trend_yr_cat <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>pc_chg_dollar_per_l, <span class="at">y=</span>pc_chg_litre, <span class="at">color=</span>year, <span class="at">label=</span>year))<span class="sc">+</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>  <span class="do">## options for labelling - too cluttered</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>  <span class="co">#geom_text(vjust=0.2, hjust=-0.2, size=3)+</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>  <span class="co">#geom_text_repel(size=3)+</span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_gradient</span>(<span class="at">low =</span> <span class="st">"lightblue"</span>, <span class="at">high =</span> <span class="st">"darkblue"</span>) <span class="sc">+</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(type<span class="sc">~</span>., <span class="at">scales=</span><span class="st">'free_y'</span>)<span class="sc">+</span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels=</span><span class="fu">percent_format</span>())<span class="sc">+</span></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels=</span><span class="fu">percent_format</span>())<span class="sc">+</span></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept=</span><span class="dv">0</span>, <span class="at">linetype=</span><span class="st">'dotted'</span>, <span class="at">color=</span><span class="st">'red'</span>)<span class="sc">+</span></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">0</span>, <span class="at">linetype=</span><span class="st">'dotted'</span>, <span class="at">color=</span><span class="st">'red'</span>)<span class="sc">+</span></span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span>ch_title, <span class="at">x=</span><span class="st">"% Chg in $/litre"</span>, <span class="at">y=</span><span class="st">"% Chg in Litres (scale varies)"</span>)<span class="sc">+</span></span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">panel.border =</span> <span class="fu">element_rect</span>(<span class="at">fill=</span><span class="cn">NA</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="480"></p>
</figure>
</div>
</div>
</div>
<p>Different types of beverages have different relationships between revenue per litre - our proxy for ‘price’ - and volume sales:</p>
<ul>
<li><strong>Wine is the clearest case</strong> in this dataset, where an average <strong>price decrease in wine of around 2.5% was associated with ~6% volume growth</strong> (top left of Wine panel), price increases around ~1.5%-3% had little apparent effect, and <strong>price increases of 6+%</strong> were associated with <strong>~3% decline</strong> in sales volume.</li>
<li><strong>Beer</strong> looks like a counter-intuitive relationship where the <strong>smallest price increases</strong> actually tended to be associatedwith <strong>largest decreases in volume</strong>. Depending on the timing, price decreases may have been in response to softening demand, and may have prevented further decreases in volume. In any case, price changes were relatively modest, and there are probably other factors involved.</li>
<li>Refreshment beverages don’t appear to have a consistent relationship between price increase and changes in volume during this period of growth, although most recently a ~6% increase in price is associated with a reversal in the growth trend and a small decrease in volume.</li>
</ul>
<p>Clearly, though, there are a variety of factors at work here and <strong>not enough data to make any solid conclusions</strong> with regard to effect of changes in net sales per litre and litre volumes sold.</p>
</section>
<section id="changes-in-litre-vs-changes-in-volume-1" class="level3">
<h3 class="anchored" data-anchor-id="changes-in-litre-vs-changes-in-volume-1"><strong>Changes in $/Litre vs Changes in Volume</strong></h3>
<p>How does this play out in terms of sales dollars generated along with price and volume changes?</p>
<p>If it plays out well for producers/retailers:</p>
<ul>
<li><strong>Unit price ($/litre) increases</strong> may dampen volume sales but result in growth in overall net $ sales. This outcome would land dots in the <strong>top right quadrant</strong>.</li>
<li>Likewise, <strong>unit price decreases (or smaller increases)</strong> will be expected lead to higher volume sales that will more than offset the decrease in unit price and, again, deliver growth in overall net $ sales. Dots would be in the <strong>top left</strong>.</li>
</ul>
<p>If it <em>doesn’t</em> play out as hoped by producers/retailers:</p>
<ul>
<li>Either price increases will dampen demand so much or price decreases will not lift volume sales high enough, and overall net $ sales decreases. This will result in <strong>dots in lower right for the former case</strong>, or l<strong>ower left for the latter</strong>.</li>
</ul>
<p>Additional notes on chart below:</p>
<ul>
<li>As with chart above, y-axis is adjusted for each type, red dotted lines are the 0 axes.</li>
<li>% chg in volume is indicated by size of the dot. This makes for a busy chart but the intention is to highlight the points that represent the biggest (or smallest) changes in % volume as additional reference.</li>
</ul>
<p>Good news for the industry is that the <strong>positive scenarios held up in <em>almost</em> all cases</strong>:</p>
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>ch_title <span class="ot">&lt;-</span> <span class="st">"Relationship Between Changes in $/Litre and Net $ Sales"</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>trend_yr_cat <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>pc_chg_dollar_per_l, <span class="at">y=</span>pc_chg_sales, <span class="at">size=</span>pc_chg_litre, <span class="at">color=</span>year, <span class="at">label=</span>year))<span class="sc">+</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">size=</span><span class="st">'none'</span>)<span class="sc">+</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_gradient</span>(<span class="at">low =</span> <span class="st">"lightblue"</span>, <span class="at">high =</span> <span class="st">"darkblue"</span>) <span class="sc">+</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(type<span class="sc">~</span>., <span class="at">scales=</span><span class="st">'free_y'</span>)<span class="sc">+</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels=</span><span class="fu">percent_format</span>())<span class="sc">+</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels=</span><span class="fu">percent_format</span>())<span class="sc">+</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept=</span><span class="dv">0</span>, <span class="at">linetype=</span><span class="st">'dotted'</span>, <span class="at">color=</span><span class="st">'red'</span>)<span class="sc">+</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">0</span>, <span class="at">linetype=</span><span class="st">'dotted'</span>, <span class="at">color=</span><span class="st">'red'</span>)<span class="sc">+</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span>ch_title, <span class="at">x=</span><span class="st">"% Chg in $/litre"</span>, <span class="at">y=</span><span class="st">"% Chg in Net $ Sales - scale varies"</span>)<span class="sc">+</span></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">panel.border =</span> <span class="fu">element_rect</span>(<span class="at">fill=</span><span class="cn">NA</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="480"></p>
</figure>
</div>
</div>
</div>
<p><strong>Beer was the only case where changes in $/litre did not always have the hoped for effect</strong> of leading to overall higher total net $ sales: the smaller price changes, associated with declines in volume (small dots), resulted in overall decreasing net $ sales. On the plus side, the largest year-over-year increase in $/litre for beer <em>did</em> result in overall increase in net $ sales, even though associated with decrease in litre volume.</p>
</section>
</section>
<section id="part-1-wrap-up-next-up" class="level2">
<h2 class="anchored" data-anchor-id="part-1-wrap-up-next-up">Part 1 Wrap-up &amp; Next-up</h2>
<p>That concludes our look at annual trends in the BC Liquor Market Review data.</p>
<section id="next-up" class="level4">
<h4 class="anchored" data-anchor-id="next-up">Next-up:</h4>
<ol type="1">
<li><strong>Quarterly patterns:</strong> exploration of the seasonal patterns in the BC liquor market by delving into data at the quarterly level, again going back to 2015.</li>
<li><strong>Category trends and patterns:</strong> closer look at each of the major beverage types, exploring categories and sub-categories within them, as reported in the Liquor Market Review.</li>
</ol>
<p>Coming soon!</p>
</section>
</section>
<section id="footnotes" class="level2">
<h2 class="anchored" data-anchor-id="footnotes">Footnotes</h2>
<p>Notes on ‘net $ sales’ and ‘$ per litre’:</p>
<ul>
<li>the report says “<strong>Net dollar value is based on the price paid by the customer</strong> and excludes any applicable taxes.”</li>
<li>calculating average <strong>net dollar value per litre for beverage categories gives unrealistically low numbers</strong> compared to retail prices in BC liquor stores. (<em>Beer at average $4/litre? Not even the cheapest beer on the <a href="https://www.bcliquorstores.com/product-catalogue?category=beer&amp;sort=currentPrice:desc&amp;page=1">BC Liquor Stores</a> website.</em>)</li>
<li>there is likely additional factors related to BC LDB pricing structure, wholesaling, etc.</li>
<li>best to <strong>consider average net dollar value per litre referred to above as relative indicator</strong>.</li>
</ul>
</section>
<section id="section" class="level2">
<h2 class="anchored" data-anchor-id="section"></h2>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">

<div class="cookie-consent-footer"><a href="#" id="open_preferences_center">Cookie Preferences</a></div></div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>