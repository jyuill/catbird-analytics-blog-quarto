{
  "hash": "84bf0711444b2416f9898d14d98e0dbb",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"BC Liquor Sales Analysis: Beer 2016-2022\"\nauthor: John Yuill\ndate: '2023-11-26'\ncategories: [liquor stats, reporting, analysis]\ndescription-meta: BC Liquor Market Review beer sales data exploration and analysis covering the years 2016 to 2022 with trends, patterns and observations.\ndraft: true\n#image: .png \ntoc: true\ntoc-depth: 4\ntoc-location: left\ndate-modified: '2024-02-19'\nfig-height: 4\nfig-width: 6\ncode-fold: true\nexecute:\n  echo: true\n  error: false\n  warning: false\n---\n\n\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# function for determining how many complete yrs of data, used in \nfn_yr_qtr <- function(data) {\n  # create variable to identify/remove partial yrs by counting qtrs and select yrs with 4\n  yr_qtr <- data %>% group_by(year, qtr) %>% summarize(count=1)\n  yr_qtr <- yr_qtr %>% group_by(year) %>% summarize(count=n()) %>% filter(count==4)\n  data_cy <- data %>% filter(year %in% yr_qtr$year)\n  return(data_cy)\n}\nlmr_data_cy <- fn_yr_qtr(lmr_data)\n```\n:::\n\n\nThis is a continuation of a previous analysis of [annual liquor sales in British Columbia](../bc-liquor-market-review-2023-06-pt01-annual-trends) and [quarter-of-year patterns in BC liquor sales](../bc-liquor-market-review-2023-06-pt02-quarterly-trends), based on data from **British Columbia Liquor Distribution Board** '[**Liquor Market Review**](https://www.bcldb.com/publications/liquor-market-review)'. The Liquor Market Review is released on a quarterly basis, covering dollar and litre sales across major alcoholic beverage categories: here we focus on **BEER**!\n\nData shown here goes back to beginning of 2016 (BC LDB fiscal yr 2016 Q4).\n\n::: {.callout-note icon=\"false\"}\n**As mentioned in previous articles:** *my expertise is in data analysis, not the liquor industry, so the emphasis is on exploring what the data can tell us. Industry-insider context may be lacking. In the interest of promoting data analysis and learning, I am sharing most of the R code used to process the data - hence the expandable 'Code' options.*\n:::\n\n## Beer Sales Trends in BC\n\n### Overview\n\nWe'll start with an annual overview across all beer categories and then look at trends for individual categories further down below.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n## function for summarizing data on various dimensions\nfn_trend_yr_smry <- function(data, grp1=year, grp2) {\n  grp1 <- enquo(grp1)\n  grp2 <- enquo(grp2)\n\n  # ttls for yr to use for % of ttl calcs used with various dimensions\n  trend_yr_ttl <- data %>% group_by(!!grp1) %>% summarize(\n    ttl_netsales=sum(netsales),\n    ttl_litres=sum(litres)\n  )\n  \n  # summarize data by cal. yr & secondary dimension - if available\n  trend_yr <- data %>% group_by(!!grp1, !!grp2) %>% summarize(\n    netsales=sum(netsales),\n    litres=sum(litres)\n  )\n  \n  # add % chg YoY, $/l\n  # determine lag based on how many items in dimension (must be consistent)\n  trend_yr <- trend_yr %>% ungroup()\n  if(!is.null(grp2)) {\n    grp <- trend_yr %>% group_by(!!grp2) %>% summarize(count=n())\n    n_items <- nrow(grp)\n  } else {\n    n_items <- 1\n  }\n  # calc % chg YoY, by dimension if applicable\n  trend_yr <- trend_yr %>% mutate(\n    pc_chg_sales=netsales/lag(netsales, n=n_items)-1,\n    pc_chg_litres=litres/lag(litres, n=n_items)-1,\n    dollar_per_litre=netsales/litres,\n    pc_chg_d_per_l=dollar_per_litre/lag(dollar_per_litre)-1\n  )\n  \n  # calc cumulative chg over period - based on no. of periods and dimensions (if applciable)\n  n_yrs <- max(trend_yr$year)-min(trend_yr$year)\n  trend_yr <- trend_yr %>% mutate(\n    pc_chg_sales_cum = netsales/lag(netsales, n=(n_yrs*n_items))-1,\n    pc_chg_lt_cum =  litres/lag(litres, n=(n_yrs*n_items))-1\n  )\n  \n  # calc % of annual total for each dimension (will be 1 for yr, if no additional dimensions)\n  trend_yr <- left_join(trend_yr, trend_yr_ttl, by='year')\n  # calc %\n  trend_yr <- trend_yr %>% mutate(\n    litres_pc=litres/ttl_litres,\n    netsales_pc=netsales/ttl_netsales\n)\n  return(trend_yr)\n}\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ntrend_yr <- fn_trend_yr_smry(data=lmr_data_cy)\n```\n:::\n\n\nBeer sales have been pretty stable over the last few years, with net \\$ sales peaking in 2017, recovering in 2022 in line with inflation. Overall **slight downward trend**, most noticeable in litre consumption.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# dual axis - not usually recommended but works ok here \n# - using ggplot because doesn't work well with ggplotly\nch_title <- \"BC Beer: Net Sales $ + Litre Sales trend\"\nplot <- trend_yr %>% ggplot(aes(x=as.factor(year), y=netsales, group=1))+\n  geom_line(color=bar_col, size=2)+\n  geom_smooth(aes(y=netsales), method='lm', se=FALSE, color='brown', linetype='solid', size=1)+\n  geom_point(aes(y=netsales), color=bar_col, size=3)+\n  geom_line(aes(x=as.factor(year), y=litres*3), size=2, color='royalblue')+\n  geom_smooth(aes(y=litres*3), method='lm', se=FALSE, color='brown')+\n  geom_point(aes(x=as.factor(year), y=litres*3), size=3, color='royalblue')+\n  scale_y_continuous(name='net $ sales',\n                      labels=comma_format(prefix=\"$\", scale=1e-9,suffix=\"B\"), \n                     expand=expansion(mult=c(0,0.1)), \n                     limits=c(0,max(trend_yr$netsales)),\n                     sec.axis = sec_axis(trans=~./3, name='litres',\n                                         labels=comma_format(scale=1e-6, \n                                                             suffix=\"M\")))+\n  labs(title=ch_title, x=\"\")+\n  theme_classic()+\n  theme(\n    axis.title.y = element_text(color = bar_col, size=13),\n    axis.title.y.right = element_text(color = 'royalblue', size=13)\n  )\n\nplot\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/sales dual-axis-1.png){width=576}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n## aggregate data by quarter\ntrend_yr_qtr <- lmr_data_cy %>% group_by(end_qtr_dt) %>% summarize(\n  netsales=sum(netsales),\n  litres=sum(litres)\n) \n```\n:::\n\n\nBreaking out **litre sales** by quarter confirms the steady **downward trend** within seasonal cycles**.**\n\n\n::: {.cell}\n\n```{.r .cell-code}\nch_title <- \"BC Beer Litre Sales by Qtr, with Trend\"\nplot <- trend_yr_qtr %>% ggplot(aes(x=end_qtr_dt, y=litres, group=1))+\n  geom_line(color=bar_col, size=1.4)+\n  #geom_point(aes(y=litres), color=bar_col, size=3)+\n  geom_smooth(method='lm', se=FALSE)+\n  scale_y_continuous(labels=comma_format(scale=1e-6,suffix=\"M\"), \n                     expand=expansion(mult=c(0,0.1)), \n                     limits=c(0,max(trend_yr_qtr$litres)))+\n  labs(title=ch_title, x=\"\")\nggplotly(plot)\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"plotly html-widget html-fill-item\" id=\"htmlwidget-5dc76e1990dfcb2d10d3\" style=\"width:100%;height:433px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-5dc76e1990dfcb2d10d3\">{\"x\":{\"data\":[{\"x\":[16891,16955,17074,17166,17256,17347,17439,17531,17621,17712,17804,17896,17986,18077,18169,18261,18352,18443,18535,18627,18717,18808,18900,18992,19082,19173,19265,19357],\"y\":[61322665,83049030,82507823,68380700,60411330,83025876,83041441,71555489,62061657,82184724,82590238,67860955,60160295,80403293,78094657,65853206,60526961,75782253,78733642,60340893,56628557,76236196,74701340,62437557,56746085,73520144,77363167,60246610],\"text\":[\"end_qtr_dt: 2016-03-31<br />litres: 61322665\",\"end_qtr_dt: 2016-06-03<br />litres: 83049030\",\"end_qtr_dt: 2016-09-30<br />litres: 82507823\",\"end_qtr_dt: 2016-12-31<br />litres: 68380700\",\"end_qtr_dt: 2017-03-31<br />litres: 60411330\",\"end_qtr_dt: 2017-06-30<br />litres: 83025876\",\"end_qtr_dt: 2017-09-30<br />litres: 83041441\",\"end_qtr_dt: 2017-12-31<br />litres: 71555489\",\"end_qtr_dt: 2018-03-31<br />litres: 62061657\",\"end_qtr_dt: 2018-06-30<br />litres: 82184724\",\"end_qtr_dt: 2018-09-30<br />litres: 82590238\",\"end_qtr_dt: 2018-12-31<br />litres: 67860955\",\"end_qtr_dt: 2019-03-31<br />litres: 60160295\",\"end_qtr_dt: 2019-06-30<br />litres: 80403293\",\"end_qtr_dt: 2019-09-30<br />litres: 78094657\",\"end_qtr_dt: 2019-12-31<br />litres: 65853206\",\"end_qtr_dt: 2020-03-31<br />litres: 60526961\",\"end_qtr_dt: 2020-06-30<br />litres: 75782253\",\"end_qtr_dt: 2020-09-30<br />litres: 78733642\",\"end_qtr_dt: 2020-12-31<br />litres: 60340893\",\"end_qtr_dt: 2021-03-31<br />litres: 56628557\",\"end_qtr_dt: 2021-06-30<br />litres: 76236196\",\"end_qtr_dt: 2021-09-30<br />litres: 74701340\",\"end_qtr_dt: 2021-12-31<br />litres: 62437557\",\"end_qtr_dt: 2022-03-31<br />litres: 56746085\",\"end_qtr_dt: 2022-06-30<br />litres: 73520144\",\"end_qtr_dt: 2022-09-30<br />litres: 77363167\",\"end_qtr_dt: 2022-12-31<br />litres: 60246610\"],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"width\":5.2913385826771648,\"color\":\"rgba(8,29,88,1)\",\"dash\":\"solid\"},\"hoveron\":\"points\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[16891,16922.215189873419,16953.430379746835,16984.645569620254,17015.860759493669,17047.075949367088,17078.291139240508,17109.506329113923,17140.721518987342,17171.936708860758,17203.151898734177,17234.367088607596,17265.582278481012,17296.797468354431,17328.012658227846,17359.227848101265,17390.443037974685,17421.6582278481,17452.873417721519,17484.088607594938,17515.303797468354,17546.518987341773,17577.734177215189,17608.949367088608,17640.164556962027,17671.379746835442,17702.594936708861,17733.810126582277,17765.025316455696,17796.240506329115,17827.455696202531,17858.67088607595,17889.886075949365,17921.101265822785,17952.316455696204,17983.531645569619,18014.746835443038,18045.962025316454,18077.177215189873,18108.392405063292,18139.607594936708,18170.822784810127,18202.037974683546,18233.253164556962,18264.468354430381,18295.683544303796,18326.898734177215,18358.113924050635,18389.32911392405,18420.544303797469,18451.759493670885,18482.974683544304,18514.189873417723,18545.405063291139,18576.620253164558,18607.835443037973,18639.050632911392,18670.265822784811,18701.481012658227,18732.696202531646,18763.911392405062,18795.126582278481,18826.3417721519,18857.556962025315,18888.772151898735,18919.987341772154,18951.202531645569,18982.417721518988,19013.632911392404,19044.848101265823,19076.063291139239,19107.278481012658,19138.493670886077,19169.708860759492,19200.924050632912,19232.139240506331,19263.354430379746,19294.569620253165,19325.784810126581,19357],\"y\":[75144303.360742614,75037253.479107559,74930203.597472504,74823153.715837449,74716103.834202394,74609053.952567339,74502004.070932269,74394954.189297229,74287904.307662159,74180854.426027119,74073804.544392049,73966754.662756994,73859704.781121939,73752654.899486884,73645605.01785183,73538555.136216775,73431505.254581705,73324455.372946665,73217405.491311595,73110355.60967654,73003305.728041485,72896255.84640643,72789205.964771375,72682156.08313632,72575106.20150125,72468056.319866195,72361006.43823114,72253956.556596085,72146906.67496103,72039856.793325976,71932806.911690921,71825757.030055851,71718707.148420811,71611657.266785741,71504607.385150686,71397557.503515631,71290507.621880576,71183457.740245521,71076407.858610466,70969357.976975396,70862308.095340356,70755258.213705286,70648208.332070231,70541158.450435176,70434108.568800122,70327058.687165067,70220008.805530012,70112958.923894942,70005909.042259902,69898859.160624832,69791809.278989792,69684759.397354722,69577709.515719667,69470659.634084612,69363609.752449557,69256559.870814502,69149509.989179447,69042460.107544377,68935410.225909323,68828360.344274268,68721310.462639213,68614260.581004158,68507210.699369088,68400160.817734048,68293110.936098978,68186061.054463923,68079011.172828868,67971961.291193813,67864911.409558758,67757861.527923703,67650811.646288648,67543761.764653593,67436711.883018523,67329662.001383483,67222612.119748414,67115562.238113359,67008512.356478304,66901462.474843241,66794412.593208194,66687362.711573131],\"text\":[\"end_qtr_dt: 16891.00<br />litres: 75144303\",\"end_qtr_dt: 16922.22<br />litres: 75037253\",\"end_qtr_dt: 16953.43<br />litres: 74930204\",\"end_qtr_dt: 16984.65<br />litres: 74823154\",\"end_qtr_dt: 17015.86<br />litres: 74716104\",\"end_qtr_dt: 17047.08<br />litres: 74609054\",\"end_qtr_dt: 17078.29<br />litres: 74502004\",\"end_qtr_dt: 17109.51<br />litres: 74394954\",\"end_qtr_dt: 17140.72<br />litres: 74287904\",\"end_qtr_dt: 17171.94<br />litres: 74180854\",\"end_qtr_dt: 17203.15<br />litres: 74073805\",\"end_qtr_dt: 17234.37<br />litres: 73966755\",\"end_qtr_dt: 17265.58<br />litres: 73859705\",\"end_qtr_dt: 17296.80<br />litres: 73752655\",\"end_qtr_dt: 17328.01<br />litres: 73645605\",\"end_qtr_dt: 17359.23<br />litres: 73538555\",\"end_qtr_dt: 17390.44<br />litres: 73431505\",\"end_qtr_dt: 17421.66<br />litres: 73324455\",\"end_qtr_dt: 17452.87<br />litres: 73217405\",\"end_qtr_dt: 17484.09<br />litres: 73110356\",\"end_qtr_dt: 17515.30<br />litres: 73003306\",\"end_qtr_dt: 17546.52<br />litres: 72896256\",\"end_qtr_dt: 17577.73<br />litres: 72789206\",\"end_qtr_dt: 17608.95<br />litres: 72682156\",\"end_qtr_dt: 17640.16<br />litres: 72575106\",\"end_qtr_dt: 17671.38<br />litres: 72468056\",\"end_qtr_dt: 17702.59<br />litres: 72361006\",\"end_qtr_dt: 17733.81<br />litres: 72253957\",\"end_qtr_dt: 17765.03<br />litres: 72146907\",\"end_qtr_dt: 17796.24<br />litres: 72039857\",\"end_qtr_dt: 17827.46<br />litres: 71932807\",\"end_qtr_dt: 17858.67<br />litres: 71825757\",\"end_qtr_dt: 17889.89<br />litres: 71718707\",\"end_qtr_dt: 17921.10<br />litres: 71611657\",\"end_qtr_dt: 17952.32<br />litres: 71504607\",\"end_qtr_dt: 17983.53<br />litres: 71397558\",\"end_qtr_dt: 18014.75<br />litres: 71290508\",\"end_qtr_dt: 18045.96<br />litres: 71183458\",\"end_qtr_dt: 18077.18<br />litres: 71076408\",\"end_qtr_dt: 18108.39<br />litres: 70969358\",\"end_qtr_dt: 18139.61<br />litres: 70862308\",\"end_qtr_dt: 18170.82<br />litres: 70755258\",\"end_qtr_dt: 18202.04<br />litres: 70648208\",\"end_qtr_dt: 18233.25<br />litres: 70541158\",\"end_qtr_dt: 18264.47<br />litres: 70434109\",\"end_qtr_dt: 18295.68<br />litres: 70327059\",\"end_qtr_dt: 18326.90<br />litres: 70220009\",\"end_qtr_dt: 18358.11<br />litres: 70112959\",\"end_qtr_dt: 18389.33<br />litres: 70005909\",\"end_qtr_dt: 18420.54<br />litres: 69898859\",\"end_qtr_dt: 18451.76<br />litres: 69791809\",\"end_qtr_dt: 18482.97<br />litres: 69684759\",\"end_qtr_dt: 18514.19<br />litres: 69577710\",\"end_qtr_dt: 18545.41<br />litres: 69470660\",\"end_qtr_dt: 18576.62<br />litres: 69363610\",\"end_qtr_dt: 18607.84<br />litres: 69256560\",\"end_qtr_dt: 18639.05<br />litres: 69149510\",\"end_qtr_dt: 18670.27<br />litres: 69042460\",\"end_qtr_dt: 18701.48<br />litres: 68935410\",\"end_qtr_dt: 18732.70<br />litres: 68828360\",\"end_qtr_dt: 18763.91<br />litres: 68721310\",\"end_qtr_dt: 18795.13<br />litres: 68614261\",\"end_qtr_dt: 18826.34<br />litres: 68507211\",\"end_qtr_dt: 18857.56<br />litres: 68400161\",\"end_qtr_dt: 18888.77<br />litres: 68293111\",\"end_qtr_dt: 18919.99<br />litres: 68186061\",\"end_qtr_dt: 18951.20<br />litres: 68079011\",\"end_qtr_dt: 18982.42<br />litres: 67971961\",\"end_qtr_dt: 19013.63<br />litres: 67864911\",\"end_qtr_dt: 19044.85<br />litres: 67757862\",\"end_qtr_dt: 19076.06<br />litres: 67650812\",\"end_qtr_dt: 19107.28<br />litres: 67543762\",\"end_qtr_dt: 19138.49<br />litres: 67436712\",\"end_qtr_dt: 19169.71<br />litres: 67329662\",\"end_qtr_dt: 19200.92<br />litres: 67222612\",\"end_qtr_dt: 19232.14<br />litres: 67115562\",\"end_qtr_dt: 19263.35<br />litres: 67008512\",\"end_qtr_dt: 19294.57<br />litres: 66901462\",\"end_qtr_dt: 19325.78<br />litres: 66794413\",\"end_qtr_dt: 19357.00<br />litres: 66687363\"],\"type\":\"scatter\",\"mode\":\"lines\",\"name\":\"fitted values\",\"line\":{\"width\":3.7795275590551185,\"color\":\"rgba(51,102,255,1)\",\"dash\":\"solid\"},\"hoveron\":\"points\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null}],\"layout\":{\"margin\":{\"t\":44.493150684931507,\"r\":7.3059360730593621,\"b\":26.301369863013704,\"l\":43.105022831050235},\"plot_bgcolor\":\"rgba(255,255,255,1)\",\"paper_bgcolor\":\"rgba(255,255,255,1)\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724},\"title\":{\"text\":\"BC Beer Litre Sales by Qtr, with Trend\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":17.534246575342465},\"x\":0,\"xref\":\"paper\"},\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[16767.700000000001,19480.299999999999],\"tickmode\":\"array\",\"ticktext\":[\"2016\",\"2018\",\"2020\",\"2022\"],\"tickvals\":[16801,17532,18262,18993],\"categoryorder\":\"array\",\"categoryarray\":[\"2016\",\"2018\",\"2020\",\"2022\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.6529680365296811,\"tickwidth\":0.66417600664176002,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":true,\"linecolor\":\"rgba(0,0,0,1)\",\"linewidth\":0.66417600664176002,\"showgrid\":false,\"gridcolor\":null,\"gridwidth\":0,\"zeroline\":false,\"anchor\":\"y\",\"title\":{\"text\":\"\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\"},\"yaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[0,91353933],\"tickmode\":\"array\",\"ticktext\":[\"0M\",\"25M\",\"50M\",\"75M\"],\"tickvals\":[0,25000000,50000000,75000000],\"categoryorder\":\"array\",\"categoryarray\":[\"0M\",\"25M\",\"50M\",\"75M\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.6529680365296811,\"tickwidth\":0.66417600664176002,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":true,\"linecolor\":\"rgba(0,0,0,1)\",\"linewidth\":0.66417600664176002,\"showgrid\":false,\"gridcolor\":null,\"gridwidth\":0,\"zeroline\":false,\"anchor\":\"x\",\"title\":{\"text\":\"litres\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\"},\"shapes\":[{\"type\":\"rect\",\"fillcolor\":null,\"line\":{\"color\":null,\"width\":0,\"linetype\":[]},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0,\"x1\":1,\"y0\":0,\"y1\":1}],\"showlegend\":false,\"legend\":{\"bgcolor\":\"rgba(255,255,255,1)\",\"bordercolor\":\"transparent\",\"borderwidth\":1.8897637795275593,\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":11.68949771689498}},\"hovermode\":\"closest\",\"barmode\":\"relative\"},\"config\":{\"doubleClick\":\"reset\",\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"source\":\"A\",\"attrs\":{\"81b95ccb0551\":{\"x\":{},\"y\":{},\"type\":\"scatter\"},\"81b914ca386f\":{\"x\":{},\"y\":{}}},\"cur_data\":\"81b95ccb0551\",\"visdat\":{\"81b95ccb0551\":[\"function (y) \",\"x\"],\"81b914ca386f\":[\"function (y) \",\"x\"]},\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.20000000000000001,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n\nThe flat trend/recent increase in net \\$ sales vs downward trend in litre sales shows up in gradual uptrend in net \\$ per litre sales. Brewers are selling fewer litres but getting more money for each of them (on average).\n\n\n::: {.cell}\n\n```{.r .cell-code}\nch_title <- \"BC Beer: Net $/Litre trend\"\nplot <- trend_yr %>% ggplot(aes(x=as.factor(year), y=dollar_per_litre, group=1))+\n  geom_line(color=bar_col, size=2)+\n  geom_smooth(aes(y=dollar_per_litre), method='lm', se=FALSE, color='brown', linetype='solid', size=1)+\n  geom_point(aes(y=dollar_per_litre), color=bar_col, size=3)+\n  scale_y_continuous(name='Net $/litre',\n                      labels=comma_format(prefix=\"$\"), \n                     expand=expansion(mult=c(0,0.1)), \n                     limits=c(0,max(trend_yr$dollar_per_litre)))+\n  labs(title=ch_title, x=\"\")+\n  theme_classic()+\n  theme(\n    axis.title.y = element_text(color = bar_col, size=13)\n  )\n\nplot\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-6-1.png){width=576}\n:::\n:::\n\n\n### Sales by Category\n\nBC LDB puts beer into 3 major categories for purposes of the Liquor Market Report:\n\n-   **Domestic - BC Beer:** beer produced in BC.\n-   **Domestic - Other Province Beer:** beer produced in Canada outside BC.\n-   **Import Beer:** beer imported from outside Canada.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# summarize data by year and major category - using function\ntrend_yr_cat <- fn_trend_yr_smry(data=lmr_data_cy, grp2=category)\n\n## simplify category names\n#unique(trend_yr_cat$category)\ntrend_yr_cat <- trend_yr_cat %>% mutate(\n  category=case_when(\n    category=='Domestic - BC Beer' ~ 'BC',\n    category=='Domestic - Other Province Beer' ~ 'Other Prov.',\n    category=='Import Beer' ~ 'Import'\n  )\n)\n```\n:::\n\n\n#### Litre sales\n\nLooking at **litre consumption** for these 3 main categories:\n\n-   volume drops in the BC and Import beer, with **other province beer actually increasing**.\n-   in % terms, litre market share for BC remained steady just under 80%, while **other provinces took their market share out of imports**.\n\n\n::: {.cell layout-ncol=\"2\"}\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"plotly html-widget html-fill-item\" id=\"htmlwidget-909d8a492d02574f4146\" style=\"width:100%;height:325px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-909d8a492d02574f4146\">{\"x\":{\"data\":[{\"orientation\":\"v\",\"width\":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036],\"base\":[276228271,279503235,272244392,260747188,248667911,232790016,231209796],\"x\":[1,2,3,4,5,6,7],\"y\":[19031947,18530901,22453182,23764263,26715838,37213634,36666210],\"text\":[\"litres:  19,031,947 <br>cat: Other Prov.\",\"litres:  18,530,901 <br>cat: Other Prov.\",\"litres:  22,453,182 <br>cat: Other Prov.\",\"litres:  23,764,263 <br>cat: Other Prov.\",\"litres:  26,715,838 <br>cat: Other Prov.\",\"litres:  37,213,634 <br>cat: Other Prov.\",\"litres:  36,666,210 <br>cat: Other Prov.\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(248,118,109,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Other Prov.\",\"legendgroup\":\"Other Prov.\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036],\"base\":[229971335,232837354,230809520,221197743,214899460,210304493,209073308],\"x\":[1,2,3,4,5,6,7],\"y\":[46256936,46665881,41434872,39549445,33768451,22485523,22136488],\"text\":[\"litres:  46,256,936 <br>cat: Import\",\"litres:  46,665,881 <br>cat: Import\",\"litres:  41,434,872 <br>cat: Import\",\"litres:  39,549,445 <br>cat: Import\",\"litres:  33,768,451 <br>cat: Import\",\"litres:  22,485,523 <br>cat: Import\",\"litres:  22,136,488 <br>cat: Import\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(0,186,56,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Import\",\"legendgroup\":\"Import\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036],\"base\":[0,0,0,0,0,0,0],\"x\":[1,2,3,4,5,6,7],\"y\":[229971335,232837354,230809520,221197743,214899460,210304493,209073308],\"text\":[\"litres: 229,971,335 <br>cat: BC\",\"litres: 232,837,354 <br>cat: BC\",\"litres: 230,809,520 <br>cat: BC\",\"litres: 221,197,743 <br>cat: BC\",\"litres: 214,899,460 <br>cat: BC\",\"litres: 210,304,493 <br>cat: BC\",\"litres: 209,073,308 <br>cat: BC\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(97,156,255,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"BC\",\"legendgroup\":\"BC\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null}],\"layout\":{\"margin\":{\"t\":48.146118721461193,\"r\":7.3059360730593621,\"b\":31.995975037917269,\"l\":34.337899543379002},\"plot_bgcolor\":\"rgba(255,255,255,1)\",\"paper_bgcolor\":\"rgba(255,255,255,1)\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724},\"title\":{\"text\":\"Beer Litre Sales by Cat.\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":17.534246575342465},\"x\":0,\"xref\":\"paper\"},\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[0.40000000000000002,7.5999999999999996],\"tickmode\":\"array\",\"ticktext\":[\"2016\",\"2017\",\"2018\",\"2019\",\"2020\",\"2021\",\"2022\"],\"tickvals\":[1,2,3,4.0000000000000009,5,6,7],\"categoryorder\":\"array\",\"categoryarray\":[\"2016\",\"2017\",\"2018\",\"2019\",\"2020\",\"2021\",\"2022\"],\"nticks\":null,\"ticks\":\"\",\"tickcolor\":null,\"ticklen\":3.6529680365296811,\"tickwidth\":0,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-45,\"showline\":true,\"linecolor\":\"rgba(0,0,0,1)\",\"linewidth\":0.66417600664176002,\"showgrid\":false,\"gridcolor\":null,\"gridwidth\":0,\"zeroline\":false,\"anchor\":\"y\",\"title\":{\"text\":\"\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\"},\"yaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[0,298034136.10000002],\"tickmode\":\"array\",\"ticktext\":[\"0M\",\"100M\",\"200M\"],\"tickvals\":[0,100000000,200000000],\"categoryorder\":\"array\",\"categoryarray\":[\"0M\",\"100M\",\"200M\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.6529680365296811,\"tickwidth\":0.66417600664176002,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":true,\"linecolor\":\"rgba(0,0,0,1)\",\"linewidth\":0.66417600664176002,\"showgrid\":false,\"gridcolor\":null,\"gridwidth\":0,\"zeroline\":false,\"anchor\":\"x\",\"title\":{\"text\":\"\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\"},\"shapes\":[{\"type\":\"rect\",\"fillcolor\":null,\"line\":{\"color\":null,\"width\":0,\"linetype\":[]},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0,\"x1\":1,\"y0\":0,\"y1\":1}],\"showlegend\":true,\"legend\":{\"bgcolor\":\"rgba(255,255,255,1)\",\"bordercolor\":\"transparent\",\"borderwidth\":1.8897637795275593,\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":11.68949771689498},\"title\":{\"text\":\"category\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}}},\"hovermode\":\"closest\",\"barmode\":\"relative\"},\"config\":{\"doubleClick\":\"reset\",\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"source\":\"A\",\"attrs\":{\"81b96d31f613\":{\"x\":{},\"y\":{},\"fill\":{},\"text\":{},\"type\":\"bar\"}},\"cur_data\":\"81b96d31f613\",\"visdat\":{\"81b96d31f613\":[\"function (y) \",\"x\"]},\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.20000000000000001,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"plotly html-widget html-fill-item\" id=\"htmlwidget-797660a6eefe3eb6a1be\" style=\"width:100%;height:325px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-797660a6eefe3eb6a1be\">{\"x\":{\"data\":[{\"orientation\":\"v\",\"width\":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036],\"base\":[0.93554178368858343,0.93782289086509207,0.92380941011750584,0.91647343923601865,0.90298687523496535,0.86217358913481357,0.8631224552452077],\"x\":[1,2,3,4,5,6,7],\"y\":[0.064458216311416572,0.062177109134907926,0.076190589882494164,0.08352656076398135,0.097013124765034653,0.13782641086518643,0.1368775447547923],\"text\":[\"share: 6%<br>cat: Other Prov.\",\"share: 6%<br>cat: Other Prov.\",\"share: 8%<br>cat: Other Prov.\",\"share: 8%<br>cat: Other Prov.\",\"share: 10%<br>cat: Other Prov.\",\"share: 14%<br>cat: Other Prov.\",\"share: 14%<br>cat: Other Prov.\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(248,118,109,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Other Prov.\",\"legendgroup\":\"Other Prov.\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036],\"base\":[0.77887680418904248,0.78124391093240408,0.78320807622257527,0.77746516782552977,0.78036362269147563,0.7788950001231465,0.78048538621260466],\"x\":[1,2,3,4,5,6,7],\"y\":[0.15666497949954095,0.15657897993268799,0.14060133389493057,0.13900827141048888,0.12262325254348971,0.08327858901166707,0.082637069032603039],\"text\":[\"share: 16%<br>cat: Import\",\"share: 16%<br>cat: Import\",\"share: 14%<br>cat: Import\",\"share: 14%<br>cat: Import\",\"share: 12%<br>cat: Import\",\"share: 8%<br>cat: Import\",\"share: 8%<br>cat: Import\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(0,186,56,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Import\",\"legendgroup\":\"Import\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036],\"base\":[0,0,0,0,0,0,0],\"x\":[1,2,3,4,5,6,7],\"y\":[0.77887680418904248,0.78124391093240408,0.78320807622257527,0.77746516782552977,0.78036362269147563,0.7788950001231465,0.78048538621260466],\"text\":\"share: 78%<br>cat: BC\",\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(97,156,255,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"BC\",\"legendgroup\":\"BC\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null}],\"layout\":{\"margin\":{\"t\":48.146118721461193,\"r\":7.3059360730593621,\"b\":31.995975037917269,\"l\":34.337899543379002},\"plot_bgcolor\":\"rgba(255,255,255,1)\",\"paper_bgcolor\":\"rgba(255,255,255,1)\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724},\"title\":{\"text\":\"Beer % Litre Sales by Cat.\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":17.534246575342465},\"x\":0,\"xref\":\"paper\"},\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[0.40000000000000002,7.5999999999999996],\"tickmode\":\"array\",\"ticktext\":[\"2016\",\"2017\",\"2018\",\"2019\",\"2020\",\"2021\",\"2022\"],\"tickvals\":[1,2,3,4.0000000000000009,5,6,7],\"categoryorder\":\"array\",\"categoryarray\":[\"2016\",\"2017\",\"2018\",\"2019\",\"2020\",\"2021\",\"2022\"],\"nticks\":null,\"ticks\":\"\",\"tickcolor\":null,\"ticklen\":3.6529680365296811,\"tickwidth\":0,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-45,\"showline\":true,\"linecolor\":\"rgba(0,0,0,1)\",\"linewidth\":0.66417600664176002,\"showgrid\":false,\"gridcolor\":null,\"gridwidth\":0,\"zeroline\":false,\"anchor\":\"y\",\"title\":{\"text\":\"\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\"},\"yaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[0,1],\"tickmode\":\"array\",\"ticktext\":[\"0%\",\"25%\",\"50%\",\"75%\",\"100%\"],\"tickvals\":[0,0.25,0.5,0.75,1],\"categoryorder\":\"array\",\"categoryarray\":[\"0%\",\"25%\",\"50%\",\"75%\",\"100%\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.6529680365296811,\"tickwidth\":0.66417600664176002,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":true,\"linecolor\":\"rgba(0,0,0,1)\",\"linewidth\":0.66417600664176002,\"showgrid\":false,\"gridcolor\":null,\"gridwidth\":0,\"zeroline\":false,\"anchor\":\"x\",\"title\":{\"text\":\"\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\"},\"shapes\":[{\"type\":\"rect\",\"fillcolor\":null,\"line\":{\"color\":null,\"width\":0,\"linetype\":[]},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0,\"x1\":1,\"y0\":0,\"y1\":1}],\"showlegend\":true,\"legend\":{\"bgcolor\":\"rgba(255,255,255,1)\",\"bordercolor\":\"transparent\",\"borderwidth\":1.8897637795275593,\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":11.68949771689498},\"title\":{\"text\":\"category\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}}},\"hovermode\":\"closest\",\"barmode\":\"relative\"},\"config\":{\"doubleClick\":\"reset\",\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"source\":\"A\",\"attrs\":{\"81b97ac5838b\":{\"x\":{},\"y\":{},\"fill\":{},\"text\":{},\"type\":\"bar\"}},\"cur_data\":\"81b97ac5838b\",\"visdat\":{\"81b97ac5838b\":[\"function (y) \",\"x\"]},\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.20000000000000001,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n\n#### Year-over-Year % Changes\n\nThe year-over-year dynamics in litre consumption stand out even clearer when looking at % change:\n\n-   mostly stable for BC producers.\n-   BIG gains by other provinces - as high as almost 40% growth in 2021. Pandemic effect?\n-   Imports as the big losers, with over 30% loss in 2021. Possibly related to pandemic and related supply chain issues.\n\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# YoY % chg chart\nch_title <- \"Year-over-Year % change in Litre Sales\"\nplot <- trend_yr_cat %>% ggplot(aes(x=year, y=pc_chg_litres, fill=category,\n                                    text=paste0(year,\": \",\n                                                round(pc_chg_litres*100),\"%\")))+\n  geom_col(show.legend = FALSE)+\n  facet_grid(.~category)+\n  scale_y_continuous(labels=percent_format())+\n  geom_hline(yintercept=0)+\n  labs(title=ch_title, x=\"\", y=\"Litre sales - % chg\")+\n  theme_bw()+\n  theme(panel.grid = element_blank(),\n        strip.background = element_rect(fill=\"lightblue\"),\n        legend.position = \"none\")\nggplotly(plot, tooltip=\"text\")\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"plotly html-widget html-fill-item\" id=\"htmlwidget-6f572e6eee180eb3046e\" style=\"width:100%;height:433px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-6f572e6eee180eb3046e\">{\"x\":{\"data\":[{\"orientation\":\"v\",\"width\":[0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095],\"base\":[0,-0.0087092297054707224,-0.041643763220858498,-0.028473540980027079,-0.021381938325950145,-0.0058542971785201514],\"x\":[2017,2018,2019,2020,2021,2022],\"y\":[0.012462505381377165,0.0087092297054707224,0.041643763220858498,0.028473540980027079,0.021381938325950145,0.0058542971785201514],\"text\":[\"2017: 1%\",\"2018: -1%\",\"2019: -4%\",\"2020: -3%\",\"2021: -2%\",\"2022: -1%\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(248,118,109,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"BC\",\"legendgroup\":\"BC\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":[0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095],\"base\":[-0.026326576046055594,0,0,0,0,-0.014710307517938226],\"x\":[2017,2018,2019,2020,2021,2022],\"y\":[0.026326576046055594,0.211661645594027,0.058391768258058141,0.1242022527692106,0.39294279296049028,0.014710307517938226],\"text\":[\"2017: -3%\",\"2018: 21%\",\"2019: 6%\",\"2020: 12%\",\"2021: 39%\",\"2022: -1%\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(0,186,56,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Other Prov.\",\"legendgroup\":\"Other Prov.\",\"showlegend\":true,\"xaxis\":\"x2\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":[0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095],\"base\":[0,-0.11209493719833552,-0.045503386615988628,-0.14617130531161693,-0.33412631216042454,-0.015522654287383086],\"x\":[2017,2018,2019,2020,2021,2022],\"y\":[0.0088407282315456914,0.11209493719833552,0.045503386615988628,0.14617130531161693,0.33412631216042454,0.015522654287383086],\"text\":[\"2017: 1%\",\"2018: -11%\",\"2019: -5%\",\"2020: -15%\",\"2021: -33%\",\"2022: -2%\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(97,156,255,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Import\",\"legendgroup\":\"Import\",\"showlegend\":true,\"xaxis\":\"x3\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[2016.2549999999999,2022.7450000000001],\"y\":[0,0],\"text\":\"\",\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(0,0,0,1)\",\"dash\":\"solid\"},\"hoveron\":\"points\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[2016.2549999999999,2022.7450000000001],\"y\":[0,0],\"text\":\"\",\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(0,0,0,1)\",\"dash\":\"solid\"},\"hoveron\":\"points\",\"showlegend\":false,\"xaxis\":\"x2\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[2016.2549999999999,2022.7450000000001],\"y\":[0,0],\"text\":\"\",\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(0,0,0,1)\",\"dash\":\"solid\"},\"hoveron\":\"points\",\"showlegend\":false,\"xaxis\":\"x3\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null}],\"layout\":{\"margin\":{\"t\":56.182648401826484,\"r\":18.99543378995434,\"b\":26.301369863013704,\"l\":48.949771689497723},\"plot_bgcolor\":\"rgba(255,255,255,1)\",\"paper_bgcolor\":\"rgba(255,255,255,1)\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724},\"title\":{\"text\":\"Year-over-Year % change in Litre Sales\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":17.534246575342465},\"x\":0,\"xref\":\"paper\"},\"xaxis\":{\"domain\":[0,0.32064941653982748],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[2016.2549999999999,2022.7450000000001],\"tickmode\":\"array\",\"ticktext\":[\"2018\",\"2020\",\"2022\"],\"tickvals\":[2018,2020,2022],\"categoryorder\":\"array\",\"categoryarray\":[\"2018\",\"2020\",\"2022\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.6529680365296811,\"tickwidth\":0.66417600664176002,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":false,\"gridcolor\":null,\"gridwidth\":0,\"zeroline\":false,\"anchor\":\"y\",\"title\":\"\",\"hoverformat\":\".2f\"},\"yaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[-0.37047976741647026,0.429296248216536],\"tickmode\":\"array\",\"ticktext\":[\"-20%\",\"0%\",\"20%\",\"40%\"],\"tickvals\":[-0.20000000000000001,0,0.20000000000000007,0.40000000000000002],\"categoryorder\":\"array\",\"categoryarray\":[\"-20%\",\"0%\",\"20%\",\"40%\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.6529680365296811,\"tickwidth\":0.66417600664176002,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":false,\"gridcolor\":null,\"gridwidth\":0,\"zeroline\":false,\"anchor\":\"x\",\"title\":\"\",\"hoverformat\":\".2f\"},\"annotations\":[{\"text\":\"Litre sales - % chg\",\"x\":0,\"y\":0.5,\"showarrow\":false,\"ax\":0,\"ay\":0,\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724},\"xref\":\"paper\",\"yref\":\"paper\",\"textangle\":-90,\"xanchor\":\"right\",\"yanchor\":\"center\",\"annotationType\":\"axis\",\"xshift\":-33.607305936073061},{\"text\":\"BC\",\"x\":0.16032470826991374,\"y\":1,\"showarrow\":false,\"ax\":0,\"ay\":0,\"font\":{\"color\":\"rgba(26,26,26,1)\",\"family\":\"\",\"size\":11.68949771689498},\"xref\":\"paper\",\"yref\":\"paper\",\"textangle\":-0,\"xanchor\":\"center\",\"yanchor\":\"bottom\"},{\"text\":\"Other Prov.\",\"x\":0.49999999999999994,\"y\":1,\"showarrow\":false,\"ax\":0,\"ay\":0,\"font\":{\"color\":\"rgba(26,26,26,1)\",\"family\":\"\",\"size\":11.68949771689498},\"xref\":\"paper\",\"yref\":\"paper\",\"textangle\":-0,\"xanchor\":\"center\",\"yanchor\":\"bottom\"},{\"text\":\"Import\",\"x\":0.83967529173008626,\"y\":1,\"showarrow\":false,\"ax\":0,\"ay\":0,\"font\":{\"color\":\"rgba(26,26,26,1)\",\"family\":\"\",\"size\":11.68949771689498},\"xref\":\"paper\",\"yref\":\"paper\",\"textangle\":-0,\"xanchor\":\"center\",\"yanchor\":\"bottom\"}],\"shapes\":[{\"type\":\"rect\",\"fillcolor\":\"transparent\",\"line\":{\"color\":\"rgba(51,51,51,1)\",\"width\":0.66417600664176002,\"linetype\":\"solid\"},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0,\"x1\":0.32064941653982748,\"y0\":0,\"y1\":1},{\"type\":\"rect\",\"fillcolor\":\"rgba(173,216,230,1)\",\"line\":{\"color\":\"rgba(51,51,51,1)\",\"width\":0.66417600664176002,\"linetype\":\"solid\"},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0,\"x1\":0.32064941653982748,\"y0\":0,\"y1\":23.37899543378996,\"yanchor\":1,\"ysizemode\":\"pixel\"},{\"type\":\"rect\",\"fillcolor\":\"transparent\",\"line\":{\"color\":\"rgba(51,51,51,1)\",\"width\":0.66417600664176002,\"linetype\":\"solid\"},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0.34601725012683915,\"x1\":0.65398274987316074,\"y0\":0,\"y1\":1},{\"type\":\"rect\",\"fillcolor\":\"rgba(173,216,230,1)\",\"line\":{\"color\":\"rgba(51,51,51,1)\",\"width\":0.66417600664176002,\"linetype\":\"solid\"},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0.34601725012683915,\"x1\":0.65398274987316074,\"y0\":0,\"y1\":23.37899543378996,\"yanchor\":1,\"ysizemode\":\"pixel\"},{\"type\":\"rect\",\"fillcolor\":\"transparent\",\"line\":{\"color\":\"rgba(51,51,51,1)\",\"width\":0.66417600664176002,\"linetype\":\"solid\"},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0.67935058346017252,\"x1\":1,\"y0\":0,\"y1\":1},{\"type\":\"rect\",\"fillcolor\":\"rgba(173,216,230,1)\",\"line\":{\"color\":\"rgba(51,51,51,1)\",\"width\":0.66417600664176002,\"linetype\":\"solid\"},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0.67935058346017252,\"x1\":1,\"y0\":0,\"y1\":23.37899543378996,\"yanchor\":1,\"ysizemode\":\"pixel\"}],\"xaxis2\":{\"type\":\"linear\",\"autorange\":false,\"range\":[2016.2549999999999,2022.7450000000001],\"tickmode\":\"array\",\"ticktext\":[\"2018\",\"2020\",\"2022\"],\"tickvals\":[2018,2020,2022],\"categoryorder\":\"array\",\"categoryarray\":[\"2018\",\"2020\",\"2022\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.6529680365296811,\"tickwidth\":0.66417600664176002,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":false,\"domain\":[0.34601725012683915,0.65398274987316074],\"gridcolor\":null,\"gridwidth\":0,\"zeroline\":false,\"anchor\":\"y\",\"title\":\"\",\"hoverformat\":\".2f\"},\"xaxis3\":{\"type\":\"linear\",\"autorange\":false,\"range\":[2016.2549999999999,2022.7450000000001],\"tickmode\":\"array\",\"ticktext\":[\"2018\",\"2020\",\"2022\"],\"tickvals\":[2018,2020,2022],\"categoryorder\":\"array\",\"categoryarray\":[\"2018\",\"2020\",\"2022\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.6529680365296811,\"tickwidth\":0.66417600664176002,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":false,\"domain\":[0.67935058346017252,1],\"gridcolor\":null,\"gridwidth\":0,\"zeroline\":false,\"anchor\":\"y\",\"title\":\"\",\"hoverformat\":\".2f\"},\"showlegend\":false,\"legend\":{\"bgcolor\":\"rgba(255,255,255,1)\",\"bordercolor\":\"transparent\",\"borderwidth\":1.8897637795275593,\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":11.68949771689498}},\"hovermode\":\"closest\",\"barmode\":\"relative\"},\"config\":{\"doubleClick\":\"reset\",\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"source\":\"A\",\"attrs\":{\"81b976ea79\":{\"x\":{},\"y\":{},\"fill\":{},\"text\":{},\"type\":\"bar\"},\"81b97f1bae2b\":{\"yintercept\":{}}},\"cur_data\":\"81b976ea79\",\"visdat\":{\"81b976ea79\":[\"function (y) \",\"x\"],\"81b97f1bae2b\":[\"function (y) \",\"x\"]},\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.20000000000000001,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n\n#### Cumulative % Change\n\nAll these year-over-year changes add up - especially for Other Province beer and Imports:\n\n-   Other Province beer **almost doubled** over the period!\n-   Imports **dropped in half**\n-   BC-produced beer saw modest decline.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nch_title <- paste0(\"Total % chg: \", min(trend_yr_cat$year), \" - \", max(trend_yr_cat$year))\n\nplot <- trend_yr_cat %>% ggplot(aes(x=fct_rev(category), y=pc_chg_lt_cum, label=))+geom_col()+\n  geom_text(\n      aes(label=percent(pc_chg_lt_cum, accuracy=1),\n      hjust=ifelse(pc_chg_lt_cum>0, -0.1, 1.1)),\n      size=3)+\n  scale_y_continuous(limits=c(-1,1), expand=expansion(add=c(0.3,0.3)))+\n  geom_hline(yintercept=0, linetype='solid')+\n  coord_flip()+\n  labs(title=ch_title, x=\"\", y=\"\")+\n  theme(axis.text.x = element_blank(),\n        axis.ticks = element_blank(),\n        axis.line = element_blank(),\n        panel.border = element_rect(fill=NA, size=0.3))\nplot\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-11-1.png){width=576}\n:::\n:::\n\n\nAs shown earlier, **BC-produced beer makes up almost 80%** of consumption, so beer coming from Other Provinces or Imported from other countries are **fighting over the remaining 20%**. Clearly, breweries in other provinces are winning that battle over the imported beer.\n\n### Regional View\n\nA look at BC beer sales by global region of production.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# need a new field for region\n# - have to go back to lmr_data\nlmr_data_reg <- lmr_data_cy %>% mutate(\n  region=ifelse(str_detect(subcategory, 'Domestic - BC'),'Canada - BC',\n                ifelse(str_detect(subcategory, 'Domestic - Other'), 'Canada - Other', subcategory))\n)\n\n# summarize data by year and region\ntrend_yr_reg <- fn_trend_yr_smry(data=lmr_data_reg, grp2=region)\n  \n## remove 'beer' from region names for brevity\ntrend_yr_reg <- trend_yr_reg %>% mutate(\n  region=str_replace_all(region, ' Beer','')\n)\n```\n:::\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# function for stacked bar chart: absolute numbers and % \n# assumes % metric available; hover text format based on values > or < 1\nstack_col_chart <- function(title=ch_title, data, x_var, y_var, fill_var, \n                            sci_scale=1e-6, ylab_suffix='M') {\n  # convert vars\n  x_var <- enquo(x_var)\n  y_var <- enquo(y_var)\n  fill_var <- enquo(fill_var)\n\n  # plot\n  plot <- data %>% mutate(\n    # create formatted variable for hover text\n      var_f = ifelse(!!y_var>1, format(!!y_var, big.mark=\",\"),\n                     paste0(round(!!y_var*100,0),\"%\"))\n    ) %>%\n    ggplot(aes(x=as.factor(!!x_var), y=!!y_var, fill=!!fill_var,\n                              text=paste0(var_f, \"<br>\", !!fill_var))) +\n      geom_col() +\n      scale_y_continuous(labels=comma_format(scale=sci_scale,suffix=ylab_suffix), \n                       expand=expansion(add=c(0,0.1)))+\n      labs(title=ch_title, x=\"\",y=\"\")+\n      theme(axis.ticks.x = element_blank(),\n            axis.text.x = element_text(angle=45, vjust=0.5))\n  \n  return(plot)\n}\n```\n:::\n\n::: {.cell layout-ncol=\"2\"}\n\n```{.r .cell-code}\nch_title <- \"Beer Litre Sales by Region\"\nplot_left <- stack_col_chart(title=ch_title, data=trend_yr_reg, x_var=year, y_var=litres, fill_var=region)\n\nch_title <- \"Beer Litre Sales % by Region\"\nplot_right <- stack_col_chart(title=ch_title, data=trend_yr_reg, x_var=year, y_var=litres_pc, fill_var=region, sci_scale=1e+2, ylab_suffix=\"%\")\n\nggplotly(plot_left, tooltip = \"text\")\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"plotly html-widget html-fill-item\" id=\"htmlwidget-8caac6a194416ed2e27b\" style=\"width:100%;height:325px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-8caac6a194416ed2e27b\">{\"x\":{\"data\":[{\"orientation\":\"v\",\"width\":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036],\"base\":[295212744,297971385,294544161,284410479,275323149,269899439,267642389],\"x\":[1,2,3,4,5,6,7],\"y\":[47474,62751,153413,100972,60600,104211,233617],\"text\":[\"     47,474<br>Other Country\",\"     62,751<br>Other Country\",\"    153,413<br>Other Country\",\"    100,972<br>Other Country\",\"     60,600<br>Other Country\",\"    104,211<br>Other Country\",\"    233,617<br>Other Country\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(248,118,109,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Other Country\",\"legendgroup\":\"Other Country\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036],\"base\":[293800244,296572872,293256759,283091060,274326440,268917277,266730724],\"x\":[1,2,3,4,5,6,7],\"y\":[1412500,1398513,1287402,1319419,996709,982162,911665],\"text\":[\"  1,412,500<br>Asia And South Pacific\",\"  1,398,513<br>Asia And South Pacific\",\"  1,287,402<br>Asia And South Pacific\",\"  1,319,419<br>Asia And South Pacific\",\"    996,709<br>Asia And South Pacific\",\"    982,162<br>Asia And South Pacific\",\"    911,665<br>Asia And South Pacific\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(196,154,0,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Asia And South Pacific\",\"legendgroup\":\"Asia And South Pacific\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036],\"base\":[281659748,284514086,286799017,277615599,272561091,267533645,265229818],\"x\":[1,2,3,4,5,6,7],\"y\":[12140496,12058786,6457742,5475461,1765349,1383632,1500906],\"text\":[\" 12,140,496<br>USA\",\" 12,058,786<br>USA\",\"  6,457,742<br>USA\",\"  5,475,461<br>USA\",\"  1,765,349<br>USA\",\"  1,383,632<br>USA\",\"  1,500,906<br>USA\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(83,180,0,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"USA\",\"legendgroup\":\"USA\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036],\"base\":[273062535,275721992,277662354,268492084,262986779,265340938,263125466],\"x\":[1,2,3,4,5,6,7],\"y\":[8597213,8792094,9136663,9123515,9574312,2192707,2104352],\"text\":[\"  8,597,213<br>Mexico And Caribbean\",\"  8,792,094<br>Mexico And Caribbean\",\"  9,136,663<br>Mexico And Caribbean\",\"  9,123,515<br>Mexico And Caribbean\",\"  9,574,312<br>Mexico And Caribbean\",\"  2,192,707<br>Mexico And Caribbean\",\"  2,104,352<br>Mexico And Caribbean\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(0,192,148,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Mexico And Caribbean\",\"legendgroup\":\"Mexico And Caribbean\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036],\"base\":[249003282,251368255,253262702,244962006,241615298,247518127,245739518],\"x\":[1,2,3,4,5,6,7],\"y\":[24059253,24353737,24399652,23530078,21371481,17822811,17385948],\"text\":[\" 24,059,253<br>Europe\",\" 24,353,737<br>Europe\",\" 24,399,652<br>Europe\",\" 23,530,078<br>Europe\",\" 21,371,481<br>Europe\",\" 17,822,811<br>Europe\",\" 17,385,948<br>Europe\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(0,182,235,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Europe\",\"legendgroup\":\"Europe\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036],\"base\":[229971335,232837354,230809520,221197743,214899460,210304493,209073308],\"x\":[1,2,3,4,5,6,7],\"y\":[19031947,18530901,22453182,23764263,26715838,37213634,36666210],\"text\":[\" 19,031,947<br>Canada - Other\",\" 18,530,901<br>Canada - Other\",\" 22,453,182<br>Canada - Other\",\" 23,764,263<br>Canada - Other\",\" 26,715,838<br>Canada - Other\",\" 37,213,634<br>Canada - Other\",\" 36,666,210<br>Canada - Other\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(165,138,255,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Canada - Other\",\"legendgroup\":\"Canada - Other\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036],\"base\":[0,0,0,0,0,0,0],\"x\":[1,2,3,4,5,6,7],\"y\":[229971335,232837354,230809520,221197743,214899460,210304493,209073308],\"text\":[\"229,971,335<br>Canada - BC\",\"232,837,354<br>Canada - BC\",\"230,809,520<br>Canada - BC\",\"221,197,743<br>Canada - BC\",\"214,899,460<br>Canada - BC\",\"210,304,493<br>Canada - BC\",\"209,073,308<br>Canada - BC\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(251,97,215,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Canada - BC\",\"legendgroup\":\"Canada - BC\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null}],\"layout\":{\"margin\":{\"t\":48.146118721461193,\"r\":7.3059360730593621,\"b\":31.995975037917269,\"l\":34.337899543379002},\"plot_bgcolor\":\"rgba(255,255,255,1)\",\"paper_bgcolor\":\"rgba(255,255,255,1)\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724},\"title\":{\"text\":\"Beer Litre Sales by Region\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":17.534246575342465},\"x\":0,\"xref\":\"paper\"},\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[0.40000000000000002,7.5999999999999996],\"tickmode\":\"array\",\"ticktext\":[\"2016\",\"2017\",\"2018\",\"2019\",\"2020\",\"2021\",\"2022\"],\"tickvals\":[1,2,3,4.0000000000000009,5,6,7],\"categoryorder\":\"array\",\"categoryarray\":[\"2016\",\"2017\",\"2018\",\"2019\",\"2020\",\"2021\",\"2022\"],\"nticks\":null,\"ticks\":\"\",\"tickcolor\":null,\"ticklen\":3.6529680365296811,\"tickwidth\":0,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-45,\"showline\":true,\"linecolor\":\"rgba(0,0,0,1)\",\"linewidth\":0.66417600664176002,\"showgrid\":false,\"gridcolor\":null,\"gridwidth\":0,\"zeroline\":false,\"anchor\":\"y\",\"title\":{\"text\":\"\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\"},\"yaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[0,298034136.10000002],\"tickmode\":\"array\",\"ticktext\":[\"0M\",\"100M\",\"200M\"],\"tickvals\":[0,100000000,200000000],\"categoryorder\":\"array\",\"categoryarray\":[\"0M\",\"100M\",\"200M\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.6529680365296811,\"tickwidth\":0.66417600664176002,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":true,\"linecolor\":\"rgba(0,0,0,1)\",\"linewidth\":0.66417600664176002,\"showgrid\":false,\"gridcolor\":null,\"gridwidth\":0,\"zeroline\":false,\"anchor\":\"x\",\"title\":{\"text\":\"\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\"},\"shapes\":[{\"type\":\"rect\",\"fillcolor\":null,\"line\":{\"color\":null,\"width\":0,\"linetype\":[]},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0,\"x1\":1,\"y0\":0,\"y1\":1}],\"showlegend\":true,\"legend\":{\"bgcolor\":\"rgba(255,255,255,1)\",\"bordercolor\":\"transparent\",\"borderwidth\":1.8897637795275593,\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":11.68949771689498},\"title\":{\"text\":\"region\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}}},\"hovermode\":\"closest\",\"barmode\":\"relative\"},\"config\":{\"doubleClick\":\"reset\",\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"source\":\"A\",\"attrs\":{\"81b92b575c21\":{\"x\":{},\"y\":{},\"fill\":{},\"text\":{},\"type\":\"bar\"}},\"cur_data\":\"81b92b575c21\",\"visdat\":{\"81b92b575c21\":[\"function (y) \",\"x\"]},\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.20000000000000001,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n\n```{.r .cell-code}\nggplotly(plot_right, tooltip = \"text\")\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"plotly html-widget html-fill-item\" id=\"htmlwidget-c5cb8a94c82a25481c19\" style=\"width:100%;height:325px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-c5cb8a94c82a25481c19\">{\"x\":{\"data\":[{\"orientation\":\"v\",\"width\":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036],\"base\":[0.9998392130158219,0.99978945029303612,0.99947942225001152,0.99964510391534289,0.99977994344176047,0.99961403855096032,0.99912789128265567],\"x\":[1,2,3,4,5,6,7],\"y\":[0.00016078698417809623,0.00021054970696376962,0.00052057774998848227,0.00035489608465710809,0.00022005655823942316,0.00038596144903968455,0.00087210871734433315],\"text\":\"0%<br>Other Country\",\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(248,118,109,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Other Country\",\"legendgroup\":\"Other Country\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036],\"base\":[0.99505529729033804,0.99509699117150785,0.9951108691515731,0.99500761394661752,0.99616059769743337,0.9959764506887222,0.99572458161855681],\"x\":[1,2,3,4,5,6,7],\"y\":[0.0047839157254838671,0.0046924591215282696,0.0043685530984384213,0.0046374899687253723,0.003619345744327096,0.0036375878622381119,0.0034033096640988525],\"text\":\"0%<br>Asia And South Pacific\",\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(196,154,0,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Asia And South Pacific\",\"legendgroup\":\"Asia And South Pacific\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036],\"base\":[0.953937343499489,0.95463590117073027,0.97319775357227756,0.9757624799432062,0.98975009233387978,0.990851957001322,0.99012159379440656],\"x\":[1,2,3,4,5,6,7],\"y\":[0.041117953790849038,0.040461090000777578,0.021913115579295539,0.019245134003411324,0.0064105053635535869,0.0051244936874002001,0.0056029878241502518],\"text\":[\"4%<br>USA\",\"4%<br>USA\",\"2%<br>USA\",\"2%<br>USA\",\"1%<br>USA\",\"1%<br>USA\",\"1%<br>USA\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(83,180,0,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"USA\",\"legendgroup\":\"USA\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036],\"base\":[0.92481993290406639,0.92513560929812411,0.94219423061826779,0.94369517661347135,0.95498292820467046,0.98273092974854226,0.98226589954458265],\"x\":[1,2,3,4,5,6,7],\"y\":[0.02911741059542261,0.029500291872606166,0.031003522954009766,0.032067303329734842,0.034767164129209327,0.0081210272527797445,0.007855694249823908],\"text\":[\"3%<br>Mexico And Caribbean\",\"3%<br>Mexico And Caribbean\",\"3%<br>Mexico And Caribbean\",\"3%<br>Mexico And Caribbean\",\"3%<br>Mexico And Caribbean\",\"1%<br>Mexico And Caribbean\",\"1%<br>Mexico And Caribbean\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(0,192,148,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Mexico And Caribbean\",\"legendgroup\":\"Mexico And Caribbean\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036],\"base\":[0.84333502050045905,0.84342102006731201,0.85939866610506954,0.86099172858951112,0.87737674745651018,0.91672141098833293,0.91736293096739696],\"x\":[1,2,3,4,5,6,7],\"y\":[0.081484912403607335,0.081714589230812096,0.08279556451319825,0.082703448023960235,0.077606180748160281,0.066009518760209329,0.064902968577185693],\"text\":[\"8%<br>Europe\",\"8%<br>Europe\",\"8%<br>Europe\",\"8%<br>Europe\",\"8%<br>Europe\",\"7%<br>Europe\",\"6%<br>Europe\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(0,182,235,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Europe\",\"legendgroup\":\"Europe\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036],\"base\":[0.77887680418904248,0.78124391093240408,0.78320807622257527,0.77746516782552977,0.78036362269147552,0.7788950001231465,0.78048538621260466],\"x\":[1,2,3,4,5,6,7],\"y\":[0.064458216311416572,0.062177109134907926,0.076190589882494275,0.08352656076398135,0.097013124765034653,0.13782641086518643,0.1368775447547923],\"text\":[\"6%<br>Canada - Other\",\"6%<br>Canada - Other\",\"8%<br>Canada - Other\",\"8%<br>Canada - Other\",\"10%<br>Canada - Other\",\"14%<br>Canada - Other\",\"14%<br>Canada - Other\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(165,138,255,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Canada - Other\",\"legendgroup\":\"Canada - Other\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036],\"base\":[0,0,0,0,0,0,0],\"x\":[1,2,3,4,5,6,7],\"y\":[0.77887680418904248,0.78124391093240408,0.78320807622257527,0.77746516782552977,0.78036362269147552,0.7788950001231465,0.78048538621260466],\"text\":\"78%<br>Canada - BC\",\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(251,97,215,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Canada - BC\",\"legendgroup\":\"Canada - BC\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null}],\"layout\":{\"margin\":{\"t\":48.146118721461193,\"r\":7.3059360730593621,\"b\":31.995975037917269,\"l\":34.337899543379002},\"plot_bgcolor\":\"rgba(255,255,255,1)\",\"paper_bgcolor\":\"rgba(255,255,255,1)\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724},\"title\":{\"text\":\"Beer Litre Sales % by Region\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":17.534246575342465},\"x\":0,\"xref\":\"paper\"},\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[0.40000000000000002,7.5999999999999996],\"tickmode\":\"array\",\"ticktext\":[\"2016\",\"2017\",\"2018\",\"2019\",\"2020\",\"2021\",\"2022\"],\"tickvals\":[1,2,3,4.0000000000000009,5,6,7],\"categoryorder\":\"array\",\"categoryarray\":[\"2016\",\"2017\",\"2018\",\"2019\",\"2020\",\"2021\",\"2022\"],\"nticks\":null,\"ticks\":\"\",\"tickcolor\":null,\"ticklen\":3.6529680365296811,\"tickwidth\":0,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-45,\"showline\":true,\"linecolor\":\"rgba(0,0,0,1)\",\"linewidth\":0.66417600664176002,\"showgrid\":false,\"gridcolor\":null,\"gridwidth\":0,\"zeroline\":false,\"anchor\":\"y\",\"title\":{\"text\":\"\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\"},\"yaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[0,1.1000000000000001],\"tickmode\":\"array\",\"ticktext\":[\"0%\",\"25%\",\"50%\",\"75%\",\"100%\"],\"tickvals\":[0,0.25,0.5,0.75,1],\"categoryorder\":\"array\",\"categoryarray\":[\"0%\",\"25%\",\"50%\",\"75%\",\"100%\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.6529680365296811,\"tickwidth\":0.66417600664176002,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":true,\"linecolor\":\"rgba(0,0,0,1)\",\"linewidth\":0.66417600664176002,\"showgrid\":false,\"gridcolor\":null,\"gridwidth\":0,\"zeroline\":false,\"anchor\":\"x\",\"title\":{\"text\":\"\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\"},\"shapes\":[{\"type\":\"rect\",\"fillcolor\":null,\"line\":{\"color\":null,\"width\":0,\"linetype\":[]},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0,\"x1\":1,\"y0\":0,\"y1\":1}],\"showlegend\":true,\"legend\":{\"bgcolor\":\"rgba(255,255,255,1)\",\"bordercolor\":\"transparent\",\"borderwidth\":1.8897637795275593,\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":11.68949771689498},\"title\":{\"text\":\"region\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}}},\"hovermode\":\"closest\",\"barmode\":\"relative\"},\"config\":{\"doubleClick\":\"reset\",\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"source\":\"A\",\"attrs\":{\"81b94b49fa7e\":{\"x\":{},\"y\":{},\"fill\":{},\"text\":{},\"type\":\"bar\"}},\"cur_data\":\"81b94b49fa7e\",\"visdat\":{\"81b94b49fa7e\":[\"function (y) \",\"x\"]},\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.20000000000000001,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n\n### Regional breakout by litres, % change, \\$/litre\n\nWe can do a deeper dive on regional differences by comparing not only litre sales but also % change over time, and \\$/litre (proxy for price):\n\n-   **negative growth** over the period, with the **strong exception of 'Other Country'** and '**Canada - other provinces'** to lesser extent.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot <- trend_yr_reg %>% filter(year==max(trend_yr_reg$year)) %>% \n  ggplot(aes(x=litres, y=pc_chg_lt_cum, color=region, size=dollar_per_litre))+\n           geom_point()+\n  scale_x_continuous(labels=label_comma())+\n  scale_y_continuous(labels=percent_format())+\n  geom_hline(yintercept = 0, linetype='solid')+\n  theme(axis.line.x = element_blank())+\n  labs(y=\"% chg over period\", x=\"litres sold\")\nggplotly(plot)\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"plotly html-widget html-fill-item\" id=\"htmlwidget-35d0d3f01ca441439c46\" style=\"width:100%;height:433px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-35d0d3f01ca441439c46\">{\"x\":{\"data\":[{\"x\":[233617],\"y\":[3.9209462021316934],\"text\":\"litres:    233617<br />pc_chg_lt_cum:  3.92094620<br />region: Other Country<br />dollar_per_litre: 5.927908\",\"type\":\"scatter\",\"mode\":\"markers\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(248,118,109,1)\",\"opacity\":1,\"size\":22.677165354330711,\"symbol\":\"circle\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(248,118,109,1)\"}},\"hoveron\":\"points\",\"name\":\"Other Country\",\"legendgroup\":\"Other Country\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[911665],\"y\":[-0.35457345132743368],\"text\":\"litres:    911665<br />pc_chg_lt_cum: -0.35457345<br />region: Asia And South Pacific<br />dollar_per_litre: 5.547459\",\"type\":\"scatter\",\"mode\":\"markers\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(196,154,0,1)\",\"opacity\":1,\"size\":20.833788922257494,\"symbol\":\"circle\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(196,154,0,1)\"}},\"hoveron\":\"points\",\"name\":\"Asia And South Pacific\",\"legendgroup\":\"Asia And South Pacific\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[1500906],\"y\":[-0.87637193735741936],\"text\":\"litres:   1500906<br />pc_chg_lt_cum: -0.87637194<br />region: USA<br />dollar_per_litre: 4.622016\",\"type\":\"scatter\",\"mode\":\"markers\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(83,180,0,1)\",\"opacity\":1,\"size\":15.165437251395796,\"symbol\":\"circle\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(83,180,0,1)\"}},\"hoveron\":\"points\",\"name\":\"USA\",\"legendgroup\":\"USA\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[2104352],\"y\":[-0.755228583960872],\"text\":\"litres:   2104352<br />pc_chg_lt_cum: -0.75522858<br />region: Mexico And Caribbean<br />dollar_per_litre: 5.402597\",\"type\":\"scatter\",\"mode\":\"markers\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(0,192,148,1)\",\"opacity\":1,\"size\":20.077178477224429,\"symbol\":\"circle\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(0,192,148,1)\"}},\"hoveron\":\"points\",\"name\":\"Mexico And Caribbean\",\"legendgroup\":\"Mexico And Caribbean\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[17385948],\"y\":[-0.27736958416788748],\"text\":\"litres:  17385948<br />pc_chg_lt_cum: -0.27736958<br />region: Europe<br />dollar_per_litre: 4.773432\",\"type\":\"scatter\",\"mode\":\"markers\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(0,182,235,1)\",\"opacity\":1,\"size\":16.270124714732646,\"symbol\":\"circle\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(0,182,235,1)\"}},\"hoveron\":\"points\",\"name\":\"Europe\",\"legendgroup\":\"Europe\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[36666210],\"y\":[0.92656116581240999],\"text\":\"litres:  36666210<br />pc_chg_lt_cum:  0.92656117<br />region: Canada - Other<br />dollar_per_litre: 4.380878\",\"type\":\"scatter\",\"mode\":\"markers\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(165,138,255,1)\",\"opacity\":1,\"size\":13.140805594304359,\"symbol\":\"circle\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(165,138,255,1)\"}},\"hoveron\":\"points\",\"name\":\"Canada - Other\",\"legendgroup\":\"Canada - Other\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[209073308],\"y\":[-0.090872312412327405],\"text\":\"litres: 209073308<br />pc_chg_lt_cum: -0.09087231<br />region: Canada - BC<br />dollar_per_litre: 3.877806\",\"type\":\"scatter\",\"mode\":\"markers\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(251,97,215,1)\",\"opacity\":1,\"size\":3.7795275590551185,\"symbol\":\"circle\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(251,97,215,1)\"}},\"hoveron\":\"points\",\"name\":\"Canada - BC\",\"legendgroup\":\"Canada - BC\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[-10208367.550000001,219515292.55000001],\"y\":[0,0],\"text\":\"yintercept: 0\",\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(0,0,0,1)\",\"dash\":\"solid\"},\"hoveron\":\"points\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null}],\"layout\":{\"margin\":{\"t\":26.958904109589042,\"r\":7.3059360730593621,\"b\":40.913242009132432,\"l\":54.794520547945211},\"plot_bgcolor\":\"rgba(255,255,255,1)\",\"paper_bgcolor\":\"rgba(255,255,255,1)\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724},\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[-10208367.550000001,219515292.55000001],\"tickmode\":\"array\",\"ticktext\":[\"0\",\"50,000,000\",\"100,000,000\",\"150,000,000\",\"200,000,000\"],\"tickvals\":[0,50000000,100000000,150000000,200000000],\"categoryorder\":\"array\",\"categoryarray\":[\"0\",\"50,000,000\",\"100,000,000\",\"150,000,000\",\"200,000,000\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.6529680365296811,\"tickwidth\":0.66417600664176002,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":false,\"gridcolor\":null,\"gridwidth\":0,\"zeroline\":false,\"anchor\":\"y\",\"title\":{\"text\":\"litres sold\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\"},\"yaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[-1.116237844331875,4.160812109106149],\"tickmode\":\"array\",\"ticktext\":[\"-100%\",\"0%\",\"100%\",\"200%\",\"300%\",\"400%\"],\"tickvals\":[-1,0,1,2,3.0000000000000004,4],\"categoryorder\":\"array\",\"categoryarray\":[\"-100%\",\"0%\",\"100%\",\"200%\",\"300%\",\"400%\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.6529680365296811,\"tickwidth\":0.66417600664176002,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":true,\"linecolor\":\"rgba(0,0,0,1)\",\"linewidth\":0.66417600664176002,\"showgrid\":false,\"gridcolor\":null,\"gridwidth\":0,\"zeroline\":false,\"anchor\":\"x\",\"title\":{\"text\":\"% chg over period\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\"},\"shapes\":[{\"type\":\"rect\",\"fillcolor\":null,\"line\":{\"color\":null,\"width\":0,\"linetype\":[]},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0,\"x1\":1,\"y0\":0,\"y1\":1}],\"showlegend\":true,\"legend\":{\"bgcolor\":\"rgba(255,255,255,1)\",\"bordercolor\":\"transparent\",\"borderwidth\":1.8897637795275593,\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":11.68949771689498},\"title\":{\"text\":\"dollar_per_litre<br />region\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}}},\"hovermode\":\"closest\",\"barmode\":\"relative\"},\"config\":{\"doubleClick\":\"reset\",\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"source\":\"A\",\"attrs\":{\"81b92fdbd151\":{\"x\":{},\"y\":{},\"colour\":{},\"size\":{},\"type\":\"scatter\"},\"81b988b3563\":{\"yintercept\":{}}},\"cur_data\":\"81b92fdbd151\",\"visdat\":{\"81b92fdbd151\":[\"function (y) \",\"x\"],\"81b988b3563\":[\"function (y) \",\"x\"]},\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.20000000000000001,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n\n-   BC beer is by far the most volume sold, and also by far the cheapest (smallest dot).\n-   Fastest growth by far over the period (400%) is from 'Other Countries' and is also the highest price beer.\n-   Europe, Asia, Mexico, and the US (in that order) have all had decreases in litres sold.\n-   US decline is particularly noteworthy, dropping over 80%! Possibly due to more US brands being produced within Canada, such as Budweiser being brewed in Canada by Labatt (AB InBev) and Coors being brewed by Molson (now Molson Coors).\n\nRemove BC to zoom in on others.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot <- trend_yr_reg %>% filter(year==max(trend_yr_reg$year) & region!='Canada - BC') %>% \n  ggplot(aes(x=litres, y=pc_chg_lt_cum, color=region, size=dollar_per_litre))+\n           geom_point()+\n  scale_x_continuous(labels=label_comma())+\n  scale_y_continuous(labels=percent_format())+\n  geom_hline(yintercept = 0, linetype='solid')+\n  theme(axis.line.x = element_blank())+\n  labs(y=\"% chg over period\", x=\"litres sold\")\nggplotly(plot)\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"plotly html-widget html-fill-item\" id=\"htmlwidget-603c12af0dd76267b0e4\" style=\"width:100%;height:433px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-603c12af0dd76267b0e4\">{\"x\":{\"data\":[{\"x\":[233617],\"y\":[3.9209462021316934],\"text\":\"litres:   233617<br />pc_chg_lt_cum:  3.9209462<br />region: Other Country<br />dollar_per_litre: 5.927908\",\"type\":\"scatter\",\"mode\":\"markers\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(248,118,109,1)\",\"opacity\":1,\"size\":22.677165354330711,\"symbol\":\"circle\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(248,118,109,1)\"}},\"hoveron\":\"points\",\"name\":\"Other Country\",\"legendgroup\":\"Other Country\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[911665],\"y\":[-0.35457345132743368],\"text\":\"litres:   911665<br />pc_chg_lt_cum: -0.3545735<br />region: Asia And South Pacific<br />dollar_per_litre: 5.547459\",\"type\":\"scatter\",\"mode\":\"markers\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(183,159,0,1)\",\"opacity\":1,\"size\":20.189792655515078,\"symbol\":\"circle\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(183,159,0,1)\"}},\"hoveron\":\"points\",\"name\":\"Asia And South Pacific\",\"legendgroup\":\"Asia And South Pacific\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[1500906],\"y\":[-0.87637193735741936],\"text\":\"litres:  1500906<br />pc_chg_lt_cum: -0.8763719<br />region: USA<br />dollar_per_litre: 4.622016\",\"type\":\"scatter\",\"mode\":\"markers\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(0,186,56,1)\",\"opacity\":1,\"size\":11.240425332130245,\"symbol\":\"circle\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(0,186,56,1)\"}},\"hoveron\":\"points\",\"name\":\"USA\",\"legendgroup\":\"USA\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[2104352],\"y\":[-0.755228583960872],\"text\":\"litres:  2104352<br />pc_chg_lt_cum: -0.7552286<br />region: Mexico And Caribbean<br />dollar_per_litre: 5.402597\",\"type\":\"scatter\",\"mode\":\"markers\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(0,191,196,1)\",\"opacity\":1,\"size\":19.137148269728026,\"symbol\":\"circle\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(0,191,196,1)\"}},\"hoveron\":\"points\",\"name\":\"Mexico And Caribbean\",\"legendgroup\":\"Mexico And Caribbean\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[17385948],\"y\":[-0.27736958416788748],\"text\":\"litres: 17385948<br />pc_chg_lt_cum: -0.2773696<br />region: Europe<br />dollar_per_litre: 4.773432\",\"type\":\"scatter\",\"mode\":\"markers\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(97,156,255,1)\",\"opacity\":1,\"size\":13.298887360758052,\"symbol\":\"circle\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(97,156,255,1)\"}},\"hoveron\":\"points\",\"name\":\"Europe\",\"legendgroup\":\"Europe\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[36666210],\"y\":[0.92656116581240999],\"text\":\"litres: 36666210<br />pc_chg_lt_cum:  0.9265612<br />region: Canada - Other<br />dollar_per_litre: 4.380878\",\"type\":\"scatter\",\"mode\":\"markers\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(245,100,227,1)\",\"opacity\":1,\"size\":3.7795275590551185,\"symbol\":\"circle\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(245,100,227,1)\"}},\"hoveron\":\"points\",\"name\":\"Canada - Other\",\"legendgroup\":\"Canada - Other\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[-1588012.6500000001,38487839.649999999],\"y\":[0,0],\"text\":\"yintercept: 0\",\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(0,0,0,1)\",\"dash\":\"solid\"},\"hoveron\":\"points\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null}],\"layout\":{\"margin\":{\"t\":26.958904109589042,\"r\":7.3059360730593621,\"b\":40.913242009132432,\"l\":54.794520547945211},\"plot_bgcolor\":\"rgba(255,255,255,1)\",\"paper_bgcolor\":\"rgba(255,255,255,1)\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724},\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[-1588012.6500000001,38487839.649999999],\"tickmode\":\"array\",\"ticktext\":[\"0\",\"10,000,000\",\"20,000,000\",\"30,000,000\"],\"tickvals\":[0,10000000,20000000,30000000],\"categoryorder\":\"array\",\"categoryarray\":[\"0\",\"10,000,000\",\"20,000,000\",\"30,000,000\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.6529680365296811,\"tickwidth\":0.66417600664176002,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":false,\"gridcolor\":null,\"gridwidth\":0,\"zeroline\":false,\"anchor\":\"y\",\"title\":{\"text\":\"litres sold\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\"},\"yaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[-1.116237844331875,4.160812109106149],\"tickmode\":\"array\",\"ticktext\":[\"-100%\",\"0%\",\"100%\",\"200%\",\"300%\",\"400%\"],\"tickvals\":[-1,0,1,2,3.0000000000000004,4],\"categoryorder\":\"array\",\"categoryarray\":[\"-100%\",\"0%\",\"100%\",\"200%\",\"300%\",\"400%\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.6529680365296811,\"tickwidth\":0.66417600664176002,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":true,\"linecolor\":\"rgba(0,0,0,1)\",\"linewidth\":0.66417600664176002,\"showgrid\":false,\"gridcolor\":null,\"gridwidth\":0,\"zeroline\":false,\"anchor\":\"x\",\"title\":{\"text\":\"% chg over period\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\"},\"shapes\":[{\"type\":\"rect\",\"fillcolor\":null,\"line\":{\"color\":null,\"width\":0,\"linetype\":[]},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0,\"x1\":1,\"y0\":0,\"y1\":1}],\"showlegend\":true,\"legend\":{\"bgcolor\":\"rgba(255,255,255,1)\",\"bordercolor\":\"transparent\",\"borderwidth\":1.8897637795275593,\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":11.68949771689498},\"title\":{\"text\":\"dollar_per_litre<br />region\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}}},\"hovermode\":\"closest\",\"barmode\":\"relative\"},\"config\":{\"doubleClick\":\"reset\",\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"source\":\"A\",\"attrs\":{\"81b9625b272c\":{\"x\":{},\"y\":{},\"colour\":{},\"size\":{},\"type\":\"scatter\"},\"81b94e68ec26\":{\"yintercept\":{}}},\"cur_data\":\"81b9625b272c\",\"visdat\":{\"81b9625b272c\":[\"function (y) \",\"x\"],\"81b94e68ec26\":[\"function (y) \",\"x\"]},\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.20000000000000001,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n\nPatterns even more apparent with in zoomed-in view.\n\nANIMATE TO SHOW CHANGES OVER TIME\n\n#### Animation of Regional Growth\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_anim <- trend_yr_reg %>% \n  ggplot(aes(x=litres, y=pc_chg_litres, color=region, size=dollar_per_litre))+\n           geom_point()+\n  transition_time(year)+\n  scale_x_continuous(labels=label_comma())+\n  scale_y_continuous(labels=percent_format())+\n  geom_hline(yintercept = 0, linetype='solid')+\n  theme(axis.line.x = element_blank())+\n  labs(y=\"% chg over period\", x=\"litres sold\")\nanimate(plot_anim, duration=10, fps=5)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-18-1.gif)\n:::\n\n```{.r .cell-code}\n#anim_save(\"animated_bubble_chart.gif\")\n```\n:::\n\n\n## questions\n\n-   similar analysis but for:\n\n    -   \\$\n\n    -   \\$/litre\n\n    -   look at relationships between dollars/litre (price) and volume sold\n\n        -   does cheaper drive volume?\n\n        -   are declining prices associated with increase volume sales?\n\n-   preview of region\n\n    -   group in BC, Other Canada Prov, import country\n\n        -   Canada\n\n        -   Asia and South Pacific\n\n        -   Europe\n\n        -   Mexico and Caribbean\n\n        -   USA\n\n        -   other country\n\n        -   BUBBLE CHART:\n\n            -   x=litres, y=growth rate, color = region, size=rev/litre\n\n### Beer: Wrap-up and Next Up\n\n## == old info\n\nThis concludes our look at quarter patterns, including quarters from mid-2015 to mid-2023.\n\n#### Next-up:\n\n1.  **Category trends and patterns:** closer look at each of the major beverage types, exploring categories and sub-categories within them, as reported in the Liquor Market Review.\n2.  **Category 1: Beer:** start with beer, because...beer. ;)\n\n### Footnotes\n\nNotes on 'net \\$ sales':\n\n-   the report says \"**Net dollar value is based on the price paid by the customer** and excludes any applicable taxes.\"\n-   calculating average **net dollar value per litre for beverage categories gives unrealistically low numbers** compared to retail prices in BC liquor stores. (*Beer at average \\$4/litre? Not even the cheapest beer on the [BC Liquor Stores](https://www.bcliquorstores.com/product-catalogue?category=beer&sort=currentPrice:desc&page=1) website.*)\n-   there is likely additional factors related to BC LDB pricing structure, wholesaling, etc.\n-   best to **consider average net dollar value per litre referred to below as relative indicator**.\n\n## \n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../../site_libs/htmlwidgets-1.6.4/htmlwidgets.js\"></script>\n<script src=\"../../site_libs/plotly-binding-4.10.4/plotly.js\"></script>\n<script src=\"../../site_libs/typedarray-0.1/typedarray.min.js\"></script>\n<script src=\"../../site_libs/jquery-3.5.1/jquery.min.js\"></script>\n<link href=\"../../site_libs/crosstalk-1.2.1/css/crosstalk.min.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/crosstalk-1.2.1/js/crosstalk.min.js\"></script>\n<link href=\"../../site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/plotly-main-2.11.1/plotly-latest.min.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}