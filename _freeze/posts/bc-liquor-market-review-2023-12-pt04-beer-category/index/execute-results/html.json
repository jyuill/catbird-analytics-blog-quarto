{
  "hash": "5e4efadc6ae85160020fd5fbb17d0c4b",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"BC Beer Sales Analysis: Commercial, Regional, Micro Brew  2016-2023\"\nauthor: John Yuill\ndate: '2024-06-30'\ncategories: [liquor stats, reporting, analysis]\ndescription-meta: BC Liquor Market Review data exploration and analysis covering the categories of beer producers during years 2016 to 2023, focusing on quarter-level trends, patterns and observations.\ndraft: false\nimage: beer_src_cat_chg.png \ntoc: true\ntoc-depth: 4\ntoc-location: left\ndate-modified: '2024-08-04'\nfig-height: 4\nfig-width: 6\ncode-fold: true\nexecute:\n  echo: true\n  error: false\n  warning: false\n---\n\n\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# refine data for current purposes\n# save orig lmr_data\nlmr_data_orig <- lmr_data\n# add filter for Canadian categorized beer only\nlmr_data <- lmr_data %>% filter(str_starts(category, 'Domestic'))\n# clean-up, simplify cat/subcat names\nlmr_data <- lmr_data %>% mutate(\n  category = str_remove_all(category, \"Domestic - \"),\n  category = str_remove(category, \" Beer\"),\n  subcategory = str_remove_all(subcategory, \"Domestic - \"),\n  subcategory = str_remove_all(subcategory, \"BC \"),\n  subcategory = str_remove(subcategory, \"Other Province \"),\n  subcategory = str_remove_all(subcategory, \" Beer\")\n) \n# further renaming for simplification - easier to work with category code carried \n# over from previous (and arguably 'source' and 'category' more applicable)\nlmr_data <- lmr_data %>% rename(\n  source = category,\n  category = subcategory\n)\n```\n:::\n\n\n## Intro\n\nThis is a continuation of a previous analysis of [annual liquor sales in British Columbia](../bc-liquor-market-review-2023-06-pt01-annual-trends) and [quarter-of-year patterns in BC liquor sales](../bc-liquor-market-review-2023-06-pt02-quarterly-trends), and [BC Liquor Sales Analysis: Beer](../bc-liquor-market-review-2023-06-pt03-beer/). These are all based on data from **British Columbia Liquor Distribution Board** '[**Liquor Market Review**](https://www.bcldb.com/publications/liquor-market-review)', a quarterly report on sales across major alcoholic beverage categories. Focus for this analysis is specifically on the **categories of beer produced by Canadian breweries**, as broken out in the report:\n\n-   'commercial'\n-   'regional'\n-   'micro brew'\n\nData shown here goes back to beginning of 2016 (BC LDB fiscal yr 2016 Q4).\n\n::: {.callout-note icon=\"false\"}\n**As mentioned in previous articles:** *my expertise is in data analysis, not the liquor industry, so the emphasis is on exploring what the data can tell us. Industry-insider context may be lacking. In the interest of promoting data analysis and learning, I am sharing most of the R code used to process the data - hence the expandable 'Code' options.*\n:::\n\n## Beer Sales Trends: Canadian Beer by Category\n\nBC LDB breaks out Canadian beer into two general categories based on location of production: **BC-produced** beer and **'Other province'-produced** beer. Then for each of these provides further breakdown by brewery size. Here are the definitions, taken from the 'Glossary' section of the report:\n\n-   **Commercial Beer:** Breweries with Annual Production **over 350,000HL**\n-   **Regional Beer:** Breweries with Annual Production over **15,000HL and up to 350,000HL**\n-   **Micro Brew Beer:** Breweries with Annual Production up to **15,000HL** (aka 'craft' beer)\n\nAs you can see, these categories are based strictly on production volume, which seems a bit of a crude measurement. I believe this is for determining tax rates. In any case, we work with what we have. ;)\n\n### Sales by Category\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# remove partial yrs by counting qtrs and identifying those with 4\nyr_qtr <- lmr_data %>% group_by(year, qtr) %>% summarize(count=1)\nyr_qtr <- yr_qtr %>% group_by(year) %>% summarize(count=n()) %>% filter(count==4)\n# remove partials yrs\nlmr_data <- lmr_data %>% filter(year %in% yr_qtr$year)\n\n# calculate annual ttls for % of ttl calculations later\ntrend_yr_ttl <- lmr_data %>% group_by(year) %>% summarize(\n  ttl_netsales=sum(netsales),\n  ttl_litres=sum(litres)\n)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# summarize data by year and category\ntrend_yr_cat <- lmr_data %>% group_by(year, category) %>% summarize(\n  netsales=sum(netsales),\n  litres=sum(litres)\n) %>% filter(year %in% yr_qtr$year) \n\n# join with trend_yr_cat to get yr total cols\ntrend_yr_cat <- left_join(trend_yr_cat, trend_yr_ttl, by='year')\n# calc %\ntrend_yr_cat <- trend_yr_cat %>% mutate(\n  litres_pc=litres/ttl_litres,\n  netsales_pc=netsales/ttl_netsales\n)\n\n# add % chg YoY, $/l\n# ungroup first; use n=3 to lag 3 rows to match categories\ntrend_yr_cat <- trend_yr_cat %>% ungroup() %>% mutate(\n  pc_chg_sales=netsales/lag(netsales, n=3)-1,\n  pc_chg_litres=litres/lag(litres, n=3)-1,\n  dollar_per_litre=netsales/litres,\n  pc_chg_d_per_l=dollar_per_litre/lag(dollar_per_litre, n=3)-1\n)\n```\n:::\n\n\n#### Litre sales\n\nLooking at **litre consumption** for these 3 main categories:\n\n-   as noted previously in [BC Liquor Sales Analysis: Beer](../bc-liquor-market-review-2023-06-pt03-beer/), overall beer sales are fairly stable (including imported beer not shown here), with slow downward trend.\n-   most of the downward trend in volume sales is accounted for by **lower commercial (big brewery) beer sales**.\n-   in % terms, litre market share has **picked up for regional breweries** (16% to 20%) at the expense of commercial beer, while the smaller **micro brew category has stabilized** in recent yrs at \\~12%.\n\n\n::: {.cell layout-ncol=\"2\"}\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"plotly html-widget html-fill-item\" id=\"htmlwidget-9e73597926d29155df6a\" style=\"width:100%;height:325px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-9e73597926d29155df6a\">{\"x\":{\"data\":[{\"orientation\":\"v\",\"width\":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.89999999999999947],\"base\":[227753463,224963115,222767315,215718043,215126905,217750201,215024469,208042944],\"x\":[1,2,3,4,5,6,7,8],\"y\":[21249819,26405140,30495387,29243963,26488393,29767926,30714976,28920403],\"text\":[\"litres:  21,249,819 <br>cat: Micro Brew\",\"litres:  26,405,140 <br>cat: Micro Brew\",\"litres:  30,495,387 <br>cat: Micro Brew\",\"litres:  29,243,963 <br>cat: Micro Brew\",\"litres:  26,488,393 <br>cat: Micro Brew\",\"litres:  29,767,926 <br>cat: Micro Brew\",\"litres:  30,714,976 <br>cat: Micro Brew\",\"litres:  28,920,403 <br>cat: Micro Brew\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(248,118,109,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Micro Brew\",\"legendgroup\":\"Micro Brew\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.89999999999999947],\"base\":[187832687,181630523,177543283,165235893,164299314,168084606,163676038,155993712],\"x\":[1,2,3,4,5,6,7,8],\"y\":[39920776,43332592,45224032,50482150,50827591,49665595,51348431,52049232],\"text\":[\"litres:  39,920,776 <br>cat: Regional\",\"litres:  43,332,592 <br>cat: Regional\",\"litres:  45,224,032 <br>cat: Regional\",\"litres:  50,482,150 <br>cat: Regional\",\"litres:  50,827,591 <br>cat: Regional\",\"litres:  49,665,595 <br>cat: Regional\",\"litres:  51,348,431 <br>cat: Regional\",\"litres:  52,049,232 <br>cat: Regional\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(0,186,56,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Regional\",\"legendgroup\":\"Regional\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.89999999999999947],\"base\":[0,0,0,0,0,0,0,0],\"x\":[1,2,3,4,5,6,7,8],\"y\":[187832687,181630523,177543283,165235893,164299314,168084606,163676038,155993712],\"text\":[\"litres: 187,832,687 <br>cat: Commercial\",\"litres: 181,630,523 <br>cat: Commercial\",\"litres: 177,543,283 <br>cat: Commercial\",\"litres: 165,235,893 <br>cat: Commercial\",\"litres: 164,299,314 <br>cat: Commercial\",\"litres: 168,084,606 <br>cat: Commercial\",\"litres: 163,676,038 <br>cat: Commercial\",\"litres: 155,993,712 <br>cat: Commercial\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(97,156,255,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Commercial\",\"legendgroup\":\"Commercial\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null}],\"layout\":{\"margin\":{\"t\":48.146118721461193,\"r\":7.3059360730593621,\"b\":31.995975037917269,\"l\":34.337899543379002},\"plot_bgcolor\":\"rgba(255,255,255,1)\",\"paper_bgcolor\":\"rgba(255,255,255,1)\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724},\"title\":{\"text\":\"Beer Litre Sales by Cat.\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":17.534246575342465},\"x\":0,\"xref\":\"paper\"},\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[0.40000000000000002,8.5999999999999996],\"tickmode\":\"array\",\"ticktext\":[\"2016\",\"2017\",\"2018\",\"2019\",\"2020\",\"2021\",\"2022\",\"2023\"],\"tickvals\":[1,2,3,4,5,6,7,8],\"categoryorder\":\"array\",\"categoryarray\":[\"2016\",\"2017\",\"2018\",\"2019\",\"2020\",\"2021\",\"2022\",\"2023\"],\"nticks\":null,\"ticks\":\"\",\"tickcolor\":null,\"ticklen\":3.6529680365296811,\"tickwidth\":0,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-45,\"showline\":true,\"linecolor\":\"rgba(0,0,0,1)\",\"linewidth\":0.66417600664176002,\"showgrid\":false,\"gridcolor\":null,\"gridwidth\":0,\"zeroline\":false,\"anchor\":\"y\",\"title\":{\"text\":\"\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\"},\"yaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[0,253262702.09999999],\"tickmode\":\"array\",\"ticktext\":[\"0M\",\"50M\",\"100M\",\"150M\",\"200M\",\"250M\"],\"tickvals\":[0,50000000,100000000,150000000,200000000,250000000],\"categoryorder\":\"array\",\"categoryarray\":[\"0M\",\"50M\",\"100M\",\"150M\",\"200M\",\"250M\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.6529680365296811,\"tickwidth\":0.66417600664176002,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":true,\"linecolor\":\"rgba(0,0,0,1)\",\"linewidth\":0.66417600664176002,\"showgrid\":false,\"gridcolor\":null,\"gridwidth\":0,\"zeroline\":false,\"anchor\":\"x\",\"title\":{\"text\":\"\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\"},\"shapes\":[{\"type\":\"rect\",\"fillcolor\":null,\"line\":{\"color\":null,\"width\":0,\"linetype\":[]},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0,\"x1\":1,\"y0\":0,\"y1\":1}],\"showlegend\":true,\"legend\":{\"bgcolor\":\"rgba(255,255,255,1)\",\"bordercolor\":\"transparent\",\"borderwidth\":1.8897637795275593,\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":11.68949771689498},\"title\":{\"text\":\"category\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}}},\"hovermode\":\"closest\",\"barmode\":\"relative\"},\"config\":{\"doubleClick\":\"reset\",\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"source\":\"A\",\"attrs\":{\"d77966eb08a5\":{\"x\":{},\"y\":{},\"fill\":{},\"text\":{},\"type\":\"bar\"}},\"cur_data\":\"d77966eb08a5\",\"visdat\":{\"d77966eb08a5\":[\"function (y) \",\"x\"]},\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.20000000000000001,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"plotly html-widget html-fill-item\" id=\"htmlwidget-64b45f287b6d272e5e88\" style=\"width:100%;height:325px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-64b45f287b6d272e5e88\">{\"x\":{\"data\":[{\"orientation\":\"v\",\"width\":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.89999999999999947],\"base\":[0.91466048628226515,0.89495435690556868,0.87958990108223678,0.88061837230382578,0.89036955350401692,0.87973435981923054,0.87500998873013647,0.87795410823598807],\"x\":[1,2,3,4,5,6,7,8],\"y\":[0.08533951371773485,0.10504564309443132,0.12041009891776322,0.11938162769617422,0.10963044649598308,0.12026564018076946,0.12499001126986353,0.12204589176401193],\"text\":[\"share: 9%<br>cat: Micro Brew\",\"share: 11%<br>cat: Micro Brew\",\"share: 12%<br>cat: Micro Brew\",\"share: 12%<br>cat: Micro Brew\",\"share: 11%<br>cat: Micro Brew\",\"share: 12%<br>cat: Micro Brew\",\"share: 12%<br>cat: Micro Brew\",\"share: 12%<br>cat: Micro Brew\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(248,118,109,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Micro Brew\",\"legendgroup\":\"Micro Brew\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.89999999999999947],\"base\":[0.75433819783949674,0.72256746580828191,0.70102419976550678,0.67453682184493546,0.68000377194659256,0.6790799851196353,0.66605521144560242,0.65830312567284932],\"x\":[1,2,3,4,5,6,7,8],\"y\":[0.16032228844276841,0.17238689109728678,0.17856570131673,0.20608155045889032,0.21036578155742436,0.20065437469959524,0.20895477728453404,0.21965098256313875],\"text\":[\"share: 16%<br>cat: Regional\",\"share: 17%<br>cat: Regional\",\"share: 18%<br>cat: Regional\",\"share: 21%<br>cat: Regional\",\"share: 21%<br>cat: Regional\",\"share: 20%<br>cat: Regional\",\"share: 21%<br>cat: Regional\",\"share: 22%<br>cat: Regional\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(0,186,56,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Regional\",\"legendgroup\":\"Regional\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.89999999999999947],\"base\":[0,0,0,0,0,0,0,0],\"x\":[1,2,3,4,5,6,7,8],\"y\":[0.75433819783949674,0.72256746580828191,0.70102419976550678,0.67453682184493546,0.68000377194659256,0.6790799851196353,0.66605521144560242,0.65830312567284932],\"text\":[\"share: 75%<br>cat: Commercial\",\"share: 72%<br>cat: Commercial\",\"share: 70%<br>cat: Commercial\",\"share: 67%<br>cat: Commercial\",\"share: 68%<br>cat: Commercial\",\"share: 68%<br>cat: Commercial\",\"share: 67%<br>cat: Commercial\",\"share: 66%<br>cat: Commercial\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(97,156,255,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Commercial\",\"legendgroup\":\"Commercial\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null}],\"layout\":{\"margin\":{\"t\":48.146118721461193,\"r\":7.3059360730593621,\"b\":31.995975037917269,\"l\":34.337899543379002},\"plot_bgcolor\":\"rgba(255,255,255,1)\",\"paper_bgcolor\":\"rgba(255,255,255,1)\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724},\"title\":{\"text\":\"Beer % Litre Sales by Cat.\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":17.534246575342465},\"x\":0,\"xref\":\"paper\"},\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[0.40000000000000002,8.5999999999999996],\"tickmode\":\"array\",\"ticktext\":[\"2016\",\"2017\",\"2018\",\"2019\",\"2020\",\"2021\",\"2022\",\"2023\"],\"tickvals\":[1,2,3,4,5,6,7,8],\"categoryorder\":\"array\",\"categoryarray\":[\"2016\",\"2017\",\"2018\",\"2019\",\"2020\",\"2021\",\"2022\",\"2023\"],\"nticks\":null,\"ticks\":\"\",\"tickcolor\":null,\"ticklen\":3.6529680365296811,\"tickwidth\":0,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-45,\"showline\":true,\"linecolor\":\"rgba(0,0,0,1)\",\"linewidth\":0.66417600664176002,\"showgrid\":false,\"gridcolor\":null,\"gridwidth\":0,\"zeroline\":false,\"anchor\":\"y\",\"title\":{\"text\":\"\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\"},\"yaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[0,1],\"tickmode\":\"array\",\"ticktext\":[\"0%\",\"25%\",\"50%\",\"75%\",\"100%\"],\"tickvals\":[0,0.25,0.5,0.75,1],\"categoryorder\":\"array\",\"categoryarray\":[\"0%\",\"25%\",\"50%\",\"75%\",\"100%\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.6529680365296811,\"tickwidth\":0.66417600664176002,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":true,\"linecolor\":\"rgba(0,0,0,1)\",\"linewidth\":0.66417600664176002,\"showgrid\":false,\"gridcolor\":null,\"gridwidth\":0,\"zeroline\":false,\"anchor\":\"x\",\"title\":{\"text\":\"\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\"},\"shapes\":[{\"type\":\"rect\",\"fillcolor\":null,\"line\":{\"color\":null,\"width\":0,\"linetype\":[]},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0,\"x1\":1,\"y0\":0,\"y1\":1}],\"showlegend\":true,\"legend\":{\"bgcolor\":\"rgba(255,255,255,1)\",\"bordercolor\":\"transparent\",\"borderwidth\":1.8897637795275593,\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":11.68949771689498},\"title\":{\"text\":\"category\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}}},\"hovermode\":\"closest\",\"barmode\":\"relative\"},\"config\":{\"doubleClick\":\"reset\",\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"source\":\"A\",\"attrs\":{\"d7792c0255a\":{\"x\":{},\"y\":{},\"fill\":{},\"text\":{},\"type\":\"bar\"}},\"cur_data\":\"d7792c0255a\",\"visdat\":{\"d7792c0255a\":[\"function (y) \",\"x\"]},\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.20000000000000001,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n\n#### Net \\$ Sales\n\nNet \\$ sales tells a pretty similar story, in terms of breakdown and trends, especially when considering:\n\n-   inflation is bound to account for upward drift in overall \\$ sales (all things equal).\n-   slightly higher share of \\$ sales for regional and micro brews, since these beers are more expensive than commercial brewery beer.\n\nIt is interesting to note that commercial breweries have stayed level, in \\$ terms, despite litre volume decreases. Price increases have almost exactly offset the volume declines.\n\n\n::: {.cell layout-ncol=\"2\"}\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"plotly html-widget html-fill-item\" id=\"htmlwidget-8a6c7033f38d5e8218a9\" style=\"width:100%;height:325px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-8a6c7033f38d5e8218a9\">{\"x\":{\"data\":[{\"orientation\":\"v\",\"width\":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.89999999999999947],\"base\":[778551411,781440378,785667133,765844524,769940859,802431589,818270077,822973506],\"x\":[1,2,3,4,5,6,7,8],\"y\":[93941936,118276094,137584017,134678809,133826550,149196157,153105077,146079167],\"text\":[\"$:  93,941,936 <br>cat: Micro Brew\",\"$: 118,276,094 <br>cat: Micro Brew\",\"$: 137,584,017 <br>cat: Micro Brew\",\"$: 134,678,809 <br>cat: Micro Brew\",\"$: 133,826,550 <br>cat: Micro Brew\",\"$: 149,196,157 <br>cat: Micro Brew\",\"$: 153,105,077 <br>cat: Micro Brew\",\"$: 146,079,167 <br>cat: Micro Brew\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(248,118,109,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Micro Brew\",\"legendgroup\":\"Micro Brew\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.89999999999999947],\"base\":[635015202,624454613,622824684,583478741,580187234,615981988,621468212,622841507],\"x\":[1,2,3,4,5,6,7,8],\"y\":[143536209,156985765,162842449,182365783,189753625,186449601,196801865,200131999],\"text\":[\"$: 143,536,209 <br>cat: Regional\",\"$: 156,985,765 <br>cat: Regional\",\"$: 162,842,449 <br>cat: Regional\",\"$: 182,365,783 <br>cat: Regional\",\"$: 189,753,625 <br>cat: Regional\",\"$: 186,449,601 <br>cat: Regional\",\"$: 196,801,865 <br>cat: Regional\",\"$: 200,131,999 <br>cat: Regional\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(0,186,56,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Regional\",\"legendgroup\":\"Regional\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.89999999999999947],\"base\":[0,0,0,0,0,0,0,0],\"x\":[1,2,3,4,5,6,7,8],\"y\":[635015202,624454613,622824684,583478741,580187234,615981988,621468212,622841507],\"text\":[\"$: 635,015,202 <br>cat: Commercial\",\"$: 624,454,613 <br>cat: Commercial\",\"$: 622,824,684 <br>cat: Commercial\",\"$: 583,478,741 <br>cat: Commercial\",\"$: 580,187,234 <br>cat: Commercial\",\"$: 615,981,988 <br>cat: Commercial\",\"$: 621,468,212 <br>cat: Commercial\",\"$: 622,841,507 <br>cat: Commercial\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(97,156,255,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Commercial\",\"legendgroup\":\"Commercial\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null}],\"layout\":{\"margin\":{\"t\":48.146118721461193,\"r\":7.3059360730593621,\"b\":31.995975037917269,\"l\":40.182648401826491},\"plot_bgcolor\":\"rgba(255,255,255,1)\",\"paper_bgcolor\":\"rgba(255,255,255,1)\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724},\"title\":{\"text\":\"Beer Net $ Sales by Cat.\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":17.534246575342465},\"x\":0,\"xref\":\"paper\"},\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[0.40000000000000002,8.5999999999999996],\"tickmode\":\"array\",\"ticktext\":[\"2016\",\"2017\",\"2018\",\"2019\",\"2020\",\"2021\",\"2022\",\"2023\"],\"tickvals\":[1,2,3,4,5,6,7,8],\"categoryorder\":\"array\",\"categoryarray\":[\"2016\",\"2017\",\"2018\",\"2019\",\"2020\",\"2021\",\"2022\",\"2023\"],\"nticks\":null,\"ticks\":\"\",\"tickcolor\":null,\"ticklen\":3.6529680365296811,\"tickwidth\":0,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-45,\"showline\":true,\"linecolor\":\"rgba(0,0,0,1)\",\"linewidth\":0.66417600664176002,\"showgrid\":false,\"gridcolor\":null,\"gridwidth\":0,\"zeroline\":false,\"anchor\":\"y\",\"title\":{\"text\":\"\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\"},\"yaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[0,971375154.10000002],\"tickmode\":\"array\",\"ticktext\":[\"$0M\",\"$250M\",\"$500M\",\"$750M\"],\"tickvals\":[0,250000000.00000003,500000000.00000006,750000000],\"categoryorder\":\"array\",\"categoryarray\":[\"$0M\",\"$250M\",\"$500M\",\"$750M\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.6529680365296811,\"tickwidth\":0.66417600664176002,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":true,\"linecolor\":\"rgba(0,0,0,1)\",\"linewidth\":0.66417600664176002,\"showgrid\":false,\"gridcolor\":null,\"gridwidth\":0,\"zeroline\":false,\"anchor\":\"x\",\"title\":{\"text\":\"\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\"},\"shapes\":[{\"type\":\"rect\",\"fillcolor\":null,\"line\":{\"color\":null,\"width\":0,\"linetype\":[]},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0,\"x1\":1,\"y0\":0,\"y1\":1}],\"showlegend\":true,\"legend\":{\"bgcolor\":\"rgba(255,255,255,1)\",\"bordercolor\":\"transparent\",\"borderwidth\":1.8897637795275593,\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":11.68949771689498},\"title\":{\"text\":\"category\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}}},\"hovermode\":\"closest\",\"barmode\":\"relative\"},\"config\":{\"doubleClick\":\"reset\",\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"source\":\"A\",\"attrs\":{\"d779432b4da8\":{\"x\":{},\"y\":{},\"fill\":{},\"text\":{},\"type\":\"bar\"}},\"cur_data\":\"d779432b4da8\",\"visdat\":{\"d779432b4da8\":[\"function (y) \",\"x\"]},\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.20000000000000001,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"plotly html-widget html-fill-item\" id=\"htmlwidget-1d1faf05b46127fd1f40\" style=\"width:100%;height:325px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-1d1faf05b46127fd1f40\">{\"x\":{\"data\":[{\"orientation\":\"v\",\"width\":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.89999999999999947],\"base\":[0.89232933830038708,0.86854070400969607,0.85097877538522426,0.85044384296925268,0.85192368228007209,0.84322004310286269,0.84238316538205393,0.84925569984986771],\"x\":[1,2,3,4,5,6,7,8],\"y\":[0.10767066169961292,0.13145929599030393,0.14902122461477574,0.14955615703074732,0.14807631771992791,0.15677995689713731,0.15761683461794607,0.15074430015013229],\"text\":[\"share: 11%<br>cat: Micro Brew\",\"share: 13%<br>cat: Micro Brew\",\"share: 15%<br>cat: Micro Brew\",\"share: 15%<br>cat: Micro Brew\",\"share: 15%<br>cat: Micro Brew\",\"share: 16%<br>cat: Micro Brew\",\"share: 16%<br>cat: Micro Brew\",\"share: 15%<br>cat: Micro Brew\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(248,118,109,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Micro Brew\",\"legendgroup\":\"Micro Brew\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.89999999999999947],\"base\":[0.72781666952928648,0.69405710847094504,0.67459941317159478,0.64793295144968777,0.64196520943587154,0.64729300988666216,0.6397818694876769,0.64273235537527895],\"x\":[1,2,3,4,5,6,7,8],\"y\":[0.1645126687711006,0.17448359553875104,0.17637936221362949,0.20251089151956492,0.20995847284420055,0.19592703321620053,0.20260129589437703,0.20652334447458875],\"text\":[\"share: 16%<br>cat: Regional\",\"share: 17%<br>cat: Regional\",\"share: 18%<br>cat: Regional\",\"share: 20%<br>cat: Regional\",\"share: 21%<br>cat: Regional\",\"share: 20%<br>cat: Regional\",\"share: 20%<br>cat: Regional\",\"share: 21%<br>cat: Regional\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(0,186,56,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Regional\",\"legendgroup\":\"Regional\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.89999999999999947],\"base\":[0,0,0,0,0,0,0,0],\"x\":[1,2,3,4,5,6,7,8],\"y\":[0.72781666952928648,0.69405710847094504,0.67459941317159478,0.64793295144968777,0.64196520943587154,0.64729300988666216,0.6397818694876769,0.64273235537527895],\"text\":[\"share: 73%<br>cat: Commercial\",\"share: 69%<br>cat: Commercial\",\"share: 67%<br>cat: Commercial\",\"share: 65%<br>cat: Commercial\",\"share: 64%<br>cat: Commercial\",\"share: 65%<br>cat: Commercial\",\"share: 64%<br>cat: Commercial\",\"share: 64%<br>cat: Commercial\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(97,156,255,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Commercial\",\"legendgroup\":\"Commercial\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null}],\"layout\":{\"margin\":{\"t\":48.146118721461193,\"r\":7.3059360730593621,\"b\":31.995975037917269,\"l\":34.337899543379002},\"plot_bgcolor\":\"rgba(255,255,255,1)\",\"paper_bgcolor\":\"rgba(255,255,255,1)\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724},\"title\":{\"text\":\"Beer % Litre Sales by Cat.\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":17.534246575342465},\"x\":0,\"xref\":\"paper\"},\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[0.40000000000000002,8.5999999999999996],\"tickmode\":\"array\",\"ticktext\":[\"2016\",\"2017\",\"2018\",\"2019\",\"2020\",\"2021\",\"2022\",\"2023\"],\"tickvals\":[1,2,3,4,5,6,7,8],\"categoryorder\":\"array\",\"categoryarray\":[\"2016\",\"2017\",\"2018\",\"2019\",\"2020\",\"2021\",\"2022\",\"2023\"],\"nticks\":null,\"ticks\":\"\",\"tickcolor\":null,\"ticklen\":3.6529680365296811,\"tickwidth\":0,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-45,\"showline\":true,\"linecolor\":\"rgba(0,0,0,1)\",\"linewidth\":0.66417600664176002,\"showgrid\":false,\"gridcolor\":null,\"gridwidth\":0,\"zeroline\":false,\"anchor\":\"y\",\"title\":{\"text\":\"\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\"},\"yaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[0,1],\"tickmode\":\"array\",\"ticktext\":[\"0%\",\"25%\",\"50%\",\"75%\",\"100%\"],\"tickvals\":[0,0.25,0.5,0.75,1],\"categoryorder\":\"array\",\"categoryarray\":[\"0%\",\"25%\",\"50%\",\"75%\",\"100%\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.6529680365296811,\"tickwidth\":0.66417600664176002,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":true,\"linecolor\":\"rgba(0,0,0,1)\",\"linewidth\":0.66417600664176002,\"showgrid\":false,\"gridcolor\":null,\"gridwidth\":0,\"zeroline\":false,\"anchor\":\"x\",\"title\":{\"text\":\"\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\"},\"shapes\":[{\"type\":\"rect\",\"fillcolor\":null,\"line\":{\"color\":null,\"width\":0,\"linetype\":[]},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0,\"x1\":1,\"y0\":0,\"y1\":1}],\"showlegend\":true,\"legend\":{\"bgcolor\":\"rgba(255,255,255,1)\",\"bordercolor\":\"transparent\",\"borderwidth\":1.8897637795275593,\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":11.68949771689498},\"title\":{\"text\":\"category\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}}},\"hovermode\":\"closest\",\"barmode\":\"relative\"},\"config\":{\"doubleClick\":\"reset\",\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"source\":\"A\",\"attrs\":{\"d7793dba9043\":{\"x\":{},\"y\":{},\"fill\":{},\"text\":{},\"type\":\"bar\"}},\"cur_data\":\"d7793dba9043\",\"visdat\":{\"d7793dba9043\":[\"function (y) \",\"x\"]},\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.20000000000000001,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n\n## Sales by Category by Source\n\nLet's see how things break-out by source (BC or other province) for these categories.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n## % share of categories by src -> see what composition is by source\n## get annual ttls by src (all categories)\ntrend_yr_src_ttl <- lmr_data %>% group_by(year, source) %>% summarize(\n    ttl_src_netsales=sum(netsales),\n    ttl_src_litres=sum(litres)\n    )\n\n## get data for category by source\ntrend_yr_src_cat <- lmr_data %>% \n  group_by(year, source, category) %>% summarize(\n    netsales=sum(netsales),\n    litres=sum(litres))\n\n# calc % of yr sales by category\n# join with trend_yr_cat to get yr total cols\ntrend_yr_src_cat <- left_join(trend_yr_src_cat, trend_yr_src_ttl, \n                              by=c('year','source'))\n# calc %\ntrend_yr_src_cat <- trend_yr_src_cat %>% mutate(\n  litres_pc=litres/ttl_src_litres,\n  netsales_pc=netsales/ttl_src_netsales\n)\n\n# ungroup for % chg calcs over lag\n# set lag based on how far to look back for comp\nlag <- 6\ntrend_yr_src_cat <- trend_yr_src_cat %>% ungroup %>% mutate(\n  pc_chg_sales=netsales/lag(netsales, n=lag)-1,\n  pc_chg_litres=litres/lag(litres, n=lag)-1,\n  dollar_per_litre=netsales/litres,\n  pc_chg_d_per_l=dollar_per_litre/lag(dollar_per_litre, n=lag)-1\n)\n```\n:::\n\n\n### Category Breakdown by Source\n\n**Sales in all the categories are driven by BC producers**, with out-of-province producers only having an noticeable impact on commercial brewery sales.\n\n-   Notably, beer from other province commercial breweries appears to have taken share from BC commercial breweries.\n-   Presumably due to geographical reallocation of production by large multi-national breweries?\n\n\n::: {.cell layout-ncol=\"2\"}\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"plotly html-widget html-fill-item\" id=\"htmlwidget-c573297f5a2014aef71b\" style=\"width:100%;height:433px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-c573297f5a2014aef71b\">{\"x\":{\"data\":[{\"orientation\":\"v\",\"width\":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.89999999999999947],\"base\":[208855128,206586789,200511769,192049468,188486547,180638056,178398874,171836145],\"x\":[1,2,3,4,5,6,7,8],\"y\":[21116207,26250565,30297751,29148275,26412913,29666437,30619597,28830404],\"text\":[\"Micro Brew<br>litres:  21,116,207\",\"Micro Brew<br>litres:  26,250,565\",\"Micro Brew<br>litres:  30,297,751\",\"Micro Brew<br>litres:  29,148,275\",\"Micro Brew<br>litres:  26,412,913\",\"Micro Brew<br>litres:  29,666,437\",\"Micro Brew<br>litres:  30,619,597\",\"Micro Brew<br>litres:  28,830,404\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(248,118,109,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Micro Brew\",\"legendgroup\":\"Micro Brew\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.89999999999999947],\"base\":[18898335,18376326,22255546,23668575,26640358,37112145,36625595,36206799],\"x\":[1,2,3,4,5,6,7,8],\"y\":[133612,154575,197636,95688,75480,101489,95379,89999],\"text\":[\"Micro Brew<br>litres:     133,612\",\"Micro Brew<br>litres:     154,575\",\"Micro Brew<br>litres:     197,636\",\"Micro Brew<br>litres:      95,688\",\"Micro Brew<br>litres:      75,480\",\"Micro Brew<br>litres:     101,489\",\"Micro Brew<br>litres:      95,379\",\"Micro Brew<br>litres:      89,999\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(248,118,109,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Micro Brew\",\"legendgroup\":\"Micro Brew\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y2\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.89999999999999947],\"base\":[171596671,165625505,157315717,143100420,138532590,131728136,127894482,120564851],\"x\":[1,2,3,4,5,6,7,8],\"y\":[37258457,40961284,43196052,48949048,49953957,48909920,50504392,51271294],\"text\":[\"Regional<br>litres:  37,258,457\",\"Regional<br>litres:  40,961,284\",\"Regional<br>litres:  43,196,052\",\"Regional<br>litres:  48,949,048\",\"Regional<br>litres:  49,953,957\",\"Regional<br>litres:  48,909,920\",\"Regional<br>litres:  50,504,392\",\"Regional<br>litres:  51,271,294\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(0,186,56,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Regional\",\"legendgroup\":\"Regional\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.89999999999999947],\"base\":[16236016,16005018,20227566,22135473,25766724,36356470,35781556,35428861],\"x\":[1,2,3,4,5,6,7,8],\"y\":[2662319,2371308,2027980,1533102,873634,755675,844039,777938],\"text\":[\"Regional<br>litres:   2,662,319\",\"Regional<br>litres:   2,371,308\",\"Regional<br>litres:   2,027,980\",\"Regional<br>litres:   1,533,102\",\"Regional<br>litres:     873,634\",\"Regional<br>litres:     755,675\",\"Regional<br>litres:     844,039\",\"Regional<br>litres:     777,938\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(0,186,56,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Regional\",\"legendgroup\":\"Regional\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y2\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.89999999999999947],\"base\":[0,0,0,0,0,0,0,0],\"x\":[1,2,3,4,5,6,7,8],\"y\":[171596671,165625505,157315717,143100420,138532590,131728136,127894482,120564851],\"text\":[\"Commercial<br>litres: 171,596,671\",\"Commercial<br>litres: 165,625,505\",\"Commercial<br>litres: 157,315,717\",\"Commercial<br>litres: 143,100,420\",\"Commercial<br>litres: 138,532,590\",\"Commercial<br>litres: 131,728,136\",\"Commercial<br>litres: 127,894,482\",\"Commercial<br>litres: 120,564,851\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(97,156,255,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Commercial\",\"legendgroup\":\"Commercial\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.89999999999999947],\"base\":[0,0,0,0,0,0,0,0],\"x\":[1,2,3,4,5,6,7,8],\"y\":[16236016,16005018,20227566,22135473,25766724,36356470,35781556,35428861],\"text\":[\"Commercial<br>litres:  16,236,016\",\"Commercial<br>litres:  16,005,018\",\"Commercial<br>litres:  20,227,566\",\"Commercial<br>litres:  22,135,473\",\"Commercial<br>litres:  25,766,724\",\"Commercial<br>litres:  36,356,470\",\"Commercial<br>litres:  35,781,556\",\"Commercial<br>litres:  35,428,861\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(97,156,255,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Commercial\",\"legendgroup\":\"Commercial\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y2\",\"hoverinfo\":\"text\",\"frame\":null}],\"layout\":{\"margin\":{\"t\":56.182648401826484,\"r\":18.99543378995434,\"b\":28.343007001387583,\"l\":34.337899543379002},\"plot_bgcolor\":\"rgba(255,255,255,1)\",\"paper_bgcolor\":\"rgba(255,255,255,1)\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724},\"title\":{\"text\":\"BC Beer Litre Sales by Category by Source\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":17.534246575342465},\"x\":0,\"xref\":\"paper\"},\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[0.40000000000000002,8.5999999999999996],\"tickmode\":\"array\",\"ticktext\":[\"2016\",\"2017\",\"2018\",\"2019\",\"2020\",\"2021\",\"2022\",\"2023\"],\"tickvals\":[1,2,3,4,5,6,7,8],\"categoryorder\":\"array\",\"categoryarray\":[\"2016\",\"2017\",\"2018\",\"2019\",\"2020\",\"2021\",\"2022\",\"2023\"],\"nticks\":null,\"ticks\":\"\",\"tickcolor\":null,\"ticklen\":3.6529680365296811,\"tickwidth\":0,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-45,\"showline\":true,\"linecolor\":\"rgba(0,0,0,1)\",\"linewidth\":0.66417600664176002,\"showgrid\":false,\"gridcolor\":null,\"gridwidth\":0,\"zeroline\":false,\"anchor\":\"y2\",\"title\":\"\",\"hoverformat\":\".2f\"},\"yaxis\":{\"domain\":[0.51902587519025878,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[0,232837354.09999999],\"tickmode\":\"array\",\"ticktext\":[\"0M\",\"50M\",\"100M\",\"150M\",\"200M\"],\"tickvals\":[0,50000000,100000000,150000000,200000000],\"categoryorder\":\"array\",\"categoryarray\":[\"0M\",\"50M\",\"100M\",\"150M\",\"200M\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.6529680365296811,\"tickwidth\":0.66417600664176002,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":true,\"linecolor\":\"rgba(0,0,0,1)\",\"linewidth\":0.66417600664176002,\"showgrid\":false,\"gridcolor\":null,\"gridwidth\":0,\"zeroline\":false,\"anchor\":\"x\",\"title\":\"\",\"hoverformat\":\".2f\"},\"shapes\":[{\"type\":\"rect\",\"fillcolor\":null,\"line\":{\"color\":null,\"width\":0,\"linetype\":[]},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0,\"x1\":1,\"y0\":0.51902587519025878,\"y1\":1},{\"type\":\"rect\",\"fillcolor\":\"rgba(255,255,255,1)\",\"line\":{\"color\":\"rgba(0,0,0,1)\",\"width\":1.32835201328352,\"linetype\":\"solid\"},\"yref\":\"paper\",\"xref\":\"paper\",\"y0\":0.51902587519025878,\"y1\":1,\"x0\":0,\"x1\":23.37899543378996,\"xanchor\":1,\"xsizemode\":\"pixel\"},{\"type\":\"rect\",\"fillcolor\":null,\"line\":{\"color\":null,\"width\":0,\"linetype\":[]},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0,\"x1\":1,\"y0\":0,\"y1\":0.48097412480974122},{\"type\":\"rect\",\"fillcolor\":\"rgba(255,255,255,1)\",\"line\":{\"color\":\"rgba(0,0,0,1)\",\"width\":1.32835201328352,\"linetype\":\"solid\"},\"yref\":\"paper\",\"xref\":\"paper\",\"y0\":0,\"y1\":0.48097412480974122,\"x0\":0,\"x1\":23.37899543378996,\"xanchor\":1,\"xsizemode\":\"pixel\"}],\"annotations\":[{\"text\":\"BC\",\"x\":1,\"y\":0.75951293759512939,\"showarrow\":false,\"ax\":0,\"ay\":0,\"font\":{\"color\":\"rgba(26,26,26,1)\",\"family\":\"\",\"size\":11.68949771689498},\"xref\":\"paper\",\"yref\":\"paper\",\"textangle\":90,\"xanchor\":\"left\",\"yanchor\":\"middle\"},{\"text\":\"Other Province\",\"x\":1,\"y\":0.24048706240487061,\"showarrow\":false,\"ax\":0,\"ay\":0,\"font\":{\"color\":\"rgba(26,26,26,1)\",\"family\":\"\",\"size\":11.68949771689498},\"xref\":\"paper\",\"yref\":\"paper\",\"textangle\":90,\"xanchor\":\"left\",\"yanchor\":\"middle\"}],\"yaxis2\":{\"type\":\"linear\",\"autorange\":false,\"range\":[0,232837354.09999999],\"tickmode\":\"array\",\"ticktext\":[\"0M\",\"50M\",\"100M\",\"150M\",\"200M\"],\"tickvals\":[0,50000000,100000000,150000000,200000000],\"categoryorder\":\"array\",\"categoryarray\":[\"0M\",\"50M\",\"100M\",\"150M\",\"200M\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.6529680365296811,\"tickwidth\":0.66417600664176002,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":true,\"linecolor\":\"rgba(0,0,0,1)\",\"linewidth\":0.66417600664176002,\"showgrid\":false,\"domain\":[0,0.48097412480974122],\"gridcolor\":null,\"gridwidth\":0,\"zeroline\":false,\"anchor\":\"x\",\"title\":\"\",\"hoverformat\":\".2f\"},\"showlegend\":true,\"legend\":{\"bgcolor\":\"rgba(255,255,255,1)\",\"bordercolor\":\"transparent\",\"borderwidth\":1.8897637795275593,\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":11.68949771689498},\"title\":{\"text\":\"category\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}}},\"hovermode\":\"closest\",\"barmode\":\"relative\"},\"config\":{\"doubleClick\":\"reset\",\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"source\":\"A\",\"attrs\":{\"d7793f933d94\":{\"x\":{},\"y\":{},\"fill\":{},\"text\":{},\"type\":\"bar\"}},\"cur_data\":\"d7793f933d94\",\"visdat\":{\"d7793f933d94\":[\"function (y) \",\"x\"]},\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.20000000000000001,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"plotly html-widget html-fill-item\" id=\"htmlwidget-4715dab410c436548fbe\" style=\"width:100%;height:433px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-4715dab410c436548fbe\">{\"x\":{\"data\":[{\"orientation\":\"v\",\"width\":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.89999999999999947],\"base\":[0.90817896065176995,0.88725793113075835,0.868732663193442,0.86822526032736236,0.87709176654050225,0.85893579078217797,0.8535076978914462,0.85632680611854251],\"x\":[1,2,3,4,5,6,7,8],\"y\":[0.091821039348230049,0.11274206886924165,0.131267336806558,0.13177473967263764,0.12290823345949775,0.14106420921782203,0.1464923021085538,0.14367319388145749],\"text\":[\"Micro Brew: 9%\",\"Micro Brew: 11%\",\"Micro Brew: 13%\",\"Micro Brew: 13%\",\"Micro Brew: 12%\",\"Micro Brew: 14%\",\"Micro Brew: 15%\",\"Micro Brew: 14%\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(248,118,109,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Micro Brew\",\"legendgroup\":\"Micro Brew\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.89999999999999947],\"base\":[0.99297959373258027,0.99165852755891359,0.99119786228963003,0.99597344971312596,0.99717470962355736,0.9972728006085082,0.99740260157587324,0.9975204699874628],\"x\":[1,2,3,4,5,6,7,8],\"y\":[0.0070204062674197321,0.0083414724410864061,0.0088021377103699727,0.0040265502868740422,0.0028252903764426351,0.0027271993914917969,0.0025973984241267623,0.0024795300125372011],\"text\":[\"Micro Brew: 1%\",\"Micro Brew: 1%\",\"Micro Brew: 1%\",\"Micro Brew: 0%\",\"Micro Brew: 0%\",\"Micro Brew: 0%\",\"Micro Brew: 0%\",\"Micro Brew: 0%\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(248,118,109,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Micro Brew\",\"legendgroup\":\"Micro Brew\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y2\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.89999999999999947],\"base\":[0.7461654775365808,0.71133562615558676,0.68158244512618027,0.64693435863855087,0.64463907913030583,0.62636862446871266,0.61188124373945885,0.60082186892046463],\"x\":[1,2,3,4,5,6,7,8],\"y\":[0.16201348311518915,0.17592230497517158,0.18715021806726173,0.22129090168881149,0.23245268741019642,0.2325671663134653,0.24162645415198736,0.25550493719807787],\"text\":[\"Regional: 16%\",\"Regional: 18%\",\"Regional: 19%\",\"Regional: 22%\",\"Regional: 23%\",\"Regional: 23%\",\"Regional: 24%\",\"Regional: 26%\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(0,186,56,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Regional\",\"legendgroup\":\"Regional\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.89999999999999947],\"base\":[0.85309274978540028,0.86369345991325519,0.90087747919203609,0.93146052961962256,0.96447373277229786,0.97696639892787684,0.97441739971276364,0.97608778052543366],\"x\":[1,2,3,4,5,6,7,8],\"y\":[0.13988684394717998,0.1279650676456584,0.090320383097593937,0.064512920093503401,0.0327009768512595,0.020306401680631359,0.022985201863109594,0.021432689462029142],\"text\":[\"Regional: 14%\",\"Regional: 13%\",\"Regional: 9%\",\"Regional: 6%\",\"Regional: 3%\",\"Regional: 2%\",\"Regional: 2%\",\"Regional: 2%\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(0,186,56,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Regional\",\"legendgroup\":\"Regional\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y2\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.89999999999999947],\"base\":[0,0,0,0,0,0,0,0],\"x\":[1,2,3,4,5,6,7,8],\"y\":[0.7461654775365808,0.71133562615558676,0.68158244512618027,0.64693435863855087,0.64463907913030583,0.62636862446871266,0.61188124373945885,0.60082186892046463],\"text\":[\"Commercial: 75%\",\"Commercial: 71%\",\"Commercial: 68%\",\"Commercial: 65%\",\"Commercial: 64%\",\"Commercial: 63%\",\"Commercial: 61%\",\"Commercial: 60%\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(97,156,255,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Commercial\",\"legendgroup\":\"Commercial\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.89999999999999947],\"base\":[0,0,0,0,0,0,0,0],\"x\":[1,2,3,4,5,6,7,8],\"y\":[0.85309274978540028,0.86369345991325519,0.90087747919203609,0.93146052961962256,0.96447373277229786,0.97696639892787684,0.97441739971276364,0.97608778052543366],\"text\":[\"Commercial: 85%\",\"Commercial: 86%\",\"Commercial: 90%\",\"Commercial: 93%\",\"Commercial: 96%\",\"Commercial: 98%\",\"Commercial: 97%\",\"Commercial: 98%\"],\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(97,156,255,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Commercial\",\"legendgroup\":\"Commercial\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y2\",\"hoverinfo\":\"text\",\"frame\":null}],\"layout\":{\"margin\":{\"t\":56.182648401826484,\"r\":18.99543378995434,\"b\":28.343007001387583,\"l\":34.337899543379002},\"plot_bgcolor\":\"rgba(255,255,255,1)\",\"paper_bgcolor\":\"rgba(255,255,255,1)\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724},\"title\":{\"text\":\"BC Beer % Litres by Cat. by Src.\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":17.534246575342465},\"x\":0,\"xref\":\"paper\"},\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[0.40000000000000002,8.5999999999999996],\"tickmode\":\"array\",\"ticktext\":[\"2016\",\"2017\",\"2018\",\"2019\",\"2020\",\"2021\",\"2022\",\"2023\"],\"tickvals\":[1,2,3,4,5,6,7,8],\"categoryorder\":\"array\",\"categoryarray\":[\"2016\",\"2017\",\"2018\",\"2019\",\"2020\",\"2021\",\"2022\",\"2023\"],\"nticks\":null,\"ticks\":\"\",\"tickcolor\":null,\"ticklen\":3.6529680365296811,\"tickwidth\":0,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-45,\"showline\":true,\"linecolor\":\"rgba(0,0,0,1)\",\"linewidth\":0.66417600664176002,\"showgrid\":false,\"gridcolor\":null,\"gridwidth\":0,\"zeroline\":false,\"anchor\":\"y2\",\"title\":\"\",\"hoverformat\":\".2f\"},\"yaxis\":{\"domain\":[0.51902587519025878,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[0,1],\"tickmode\":\"array\",\"ticktext\":[\"0%\",\"25%\",\"50%\",\"75%\",\"100%\"],\"tickvals\":[0,0.25,0.5,0.75,1],\"categoryorder\":\"array\",\"categoryarray\":[\"0%\",\"25%\",\"50%\",\"75%\",\"100%\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.6529680365296811,\"tickwidth\":0.66417600664176002,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":true,\"linecolor\":\"rgba(0,0,0,1)\",\"linewidth\":0.66417600664176002,\"showgrid\":false,\"gridcolor\":null,\"gridwidth\":0,\"zeroline\":false,\"anchor\":\"x\",\"title\":\"\",\"hoverformat\":\".2f\"},\"shapes\":[{\"type\":\"rect\",\"fillcolor\":null,\"line\":{\"color\":null,\"width\":0,\"linetype\":[]},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0,\"x1\":1,\"y0\":0.51902587519025878,\"y1\":1},{\"type\":\"rect\",\"fillcolor\":\"rgba(255,255,255,1)\",\"line\":{\"color\":\"rgba(0,0,0,1)\",\"width\":1.32835201328352,\"linetype\":\"solid\"},\"yref\":\"paper\",\"xref\":\"paper\",\"y0\":0.51902587519025878,\"y1\":1,\"x0\":0,\"x1\":23.37899543378996,\"xanchor\":1,\"xsizemode\":\"pixel\"},{\"type\":\"rect\",\"fillcolor\":null,\"line\":{\"color\":null,\"width\":0,\"linetype\":[]},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0,\"x1\":1,\"y0\":0,\"y1\":0.48097412480974122},{\"type\":\"rect\",\"fillcolor\":\"rgba(255,255,255,1)\",\"line\":{\"color\":\"rgba(0,0,0,1)\",\"width\":1.32835201328352,\"linetype\":\"solid\"},\"yref\":\"paper\",\"xref\":\"paper\",\"y0\":0,\"y1\":0.48097412480974122,\"x0\":0,\"x1\":23.37899543378996,\"xanchor\":1,\"xsizemode\":\"pixel\"}],\"annotations\":[{\"text\":\"BC\",\"x\":1,\"y\":0.75951293759512939,\"showarrow\":false,\"ax\":0,\"ay\":0,\"font\":{\"color\":\"rgba(26,26,26,1)\",\"family\":\"\",\"size\":11.68949771689498},\"xref\":\"paper\",\"yref\":\"paper\",\"textangle\":90,\"xanchor\":\"left\",\"yanchor\":\"middle\"},{\"text\":\"Other Province\",\"x\":1,\"y\":0.24048706240487061,\"showarrow\":false,\"ax\":0,\"ay\":0,\"font\":{\"color\":\"rgba(26,26,26,1)\",\"family\":\"\",\"size\":11.68949771689498},\"xref\":\"paper\",\"yref\":\"paper\",\"textangle\":90,\"xanchor\":\"left\",\"yanchor\":\"middle\"}],\"yaxis2\":{\"type\":\"linear\",\"autorange\":false,\"range\":[0,1],\"tickmode\":\"array\",\"ticktext\":[\"0%\",\"25%\",\"50%\",\"75%\",\"100%\"],\"tickvals\":[0,0.25,0.5,0.75,1],\"categoryorder\":\"array\",\"categoryarray\":[\"0%\",\"25%\",\"50%\",\"75%\",\"100%\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.6529680365296811,\"tickwidth\":0.66417600664176002,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":true,\"linecolor\":\"rgba(0,0,0,1)\",\"linewidth\":0.66417600664176002,\"showgrid\":false,\"domain\":[0,0.48097412480974122],\"gridcolor\":null,\"gridwidth\":0,\"zeroline\":false,\"anchor\":\"x\",\"title\":\"\",\"hoverformat\":\".2f\"},\"showlegend\":true,\"legend\":{\"bgcolor\":\"rgba(255,255,255,1)\",\"bordercolor\":\"transparent\",\"borderwidth\":1.8897637795275593,\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":11.68949771689498},\"title\":{\"text\":\"category\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}}},\"hovermode\":\"closest\",\"barmode\":\"relative\"},\"config\":{\"doubleClick\":\"reset\",\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"source\":\"A\",\"attrs\":{\"d7796044aff\":{\"x\":{},\"y\":{},\"fill\":{},\"text\":{},\"type\":\"bar\"}},\"cur_data\":\"d7796044aff\",\"visdat\":{\"d7796044aff\":[\"function (y) \",\"x\"]},\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.20000000000000001,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n\n### Year-over-Year % Changes by Category, Source\n\nBreaking out the year-over-year % changes, we see that:\n\n-   BC commercial beer has small but steady declines.\n-   Other province commercial beer has had some surges in recent yrs, although stabilized in the last couple of years.\n-   BC regional breweries have had some good growth years without much negative growth.\n-   BC micro brews had some strong years in 2017-18 and 2021 (after 2020 pandemic) and growth has slowed/ended.\n-   Other province regional and micro brews have had some large swings (mostly declines), but these are relative to a base too small to matter.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntrend_yr_src_cat %>% ggplot(aes(x=year, y=pc_chg_litres, fill=category))+\n  geom_col(show.legend = FALSE)+\n  facet_grid(source~.~category)+\n  scale_y_continuous(labels=percent_format())+\n  geom_hline(yintercept=0)+\n  labs(title='Year-over-Year % change in Litre Sales', x=\"\", y=\"Litre sales - % chg\")+\n  theme_bw()+\n  theme(panel.grid = element_blank(),\n        strip.background = element_rect(fill=\"lightblue\"))\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-8-1.png){width=576}\n:::\n:::\n\n\n### Cumulative % Change over the Years\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# calculate cumulative change across available yrs\n# need to lag by n yrs in dataset x n categories (or items to be more general)\nn_yrs <- max(trend_yr_src_cat$year)-min(trend_yr_src_cat$year)\nn_items <- length(unique(trend_yr_src_cat$category)) # no. of categories\nn_items <- n_items*length(unique(trend_yr_src_cat$source)) # x no. of sources\n# lag calculation based on n_yrs x n_items\ntrend_yr_src_cat <- trend_yr_src_cat %>% mutate(\n  pc_chg_lt_cum =  litres/lag(litres, n=(n_yrs*n_items))-1\n)\n```\n:::\n\n\nHere we see the biggest cumulative change in **other province commercial beer, more than doubling in litre sales** during the period, accompanied by **drop-off in BC commercial beer** volume.\n\n-   meanwhile, strong growth overall for BC regional and micro brew beers.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nch_title <- paste0(\"Total % chg: \", min(trend_yr_src_cat$year), \" - \", \n                   max(trend_yr_src_cat$year))\n# bar chart\ntrend_yr_src_cat %>% ggplot(aes(x=category, y=pc_chg_lt_cum, fill=category))+geom_col()+\n  scale_y_continuous(labels=percent_format())+\n  geom_hline(yintercept=0, linetype='solid')+\n  facet_grid(source~.)+\n  #coord_flip()+\n  labs(title=ch_title, x=\"\", y=\"\")+\n  theme(axis.ticks.x = element_blank(),\n        legend.position = \"none\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-9-1.png){width=288}\n:::\n:::\n\n\n## Conclusion\n\nNothing too surprising or dramatic here, but a good overview of the dynamics of the BC beer market across 3 categories identified by BC LDB for Canadian producers.\n\n### Next\n\nNo further plans to explore the BC LDB data in this format, at least not for a while. Planning to turn my attention to a more interactive, sustainable dashboard that folks can use to explore the LDB Quarterly Market Review as they see fit. Stay tuned!\n\n### Footnotes\n\nNotes on 'net \\$ sales':\n\n-   the report says \"**Net dollar value is based on the price paid by the customer** and excludes any applicable taxes.\"\n-   calculating average **net dollar value per litre for beverage categories gives unrealistically low numbers** compared to retail prices in BC liquor stores. (*Beer at average \\$4/litre? Not even the cheapest beer on the [BC Liquor Stores](https://www.bcliquorstores.com/product-catalogue?category=beer&sort=currentPrice:desc&page=1) website.*)\n-   there is likely additional factors related to BC LDB pricing structure, wholesaling, etc.\n-   best to **consider average net dollar value per litre referred to below as relative indicator**.\n\n## \n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../../site_libs/htmlwidgets-1.6.4/htmlwidgets.js\"></script>\n<script src=\"../../site_libs/plotly-binding-4.10.4/plotly.js\"></script>\n<script src=\"../../site_libs/typedarray-0.1/typedarray.min.js\"></script>\n<script src=\"../../site_libs/jquery-3.5.1/jquery.min.js\"></script>\n<link href=\"../../site_libs/crosstalk-1.2.1/css/crosstalk.min.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/crosstalk-1.2.1/js/crosstalk.min.js\"></script>\n<link href=\"../../site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/plotly-main-2.11.1/plotly-latest.min.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}