{
  "hash": "401ef14f094c7f4e117c856b13fd6e08",
  "result": {
    "markdown": "---\ntitle: \"Google Trends + R: gtrendsR for Powerful Trend Analytics\"\nauthor: John Yuill\ndate: '2022-01-16'\ncategories: [R, APIs]\ndraft: false\nimage: img/google-trends.png\ntoc: true\ntoc-depth: 4\ntoc-location: left\ndate-modified: '2023-04-16'\nfig-height: 6\nfig-width: 9\nexecute:\n  echo: true\n  error: false\n  warning: false\n---\n\n\n\n\n[Google Trends](https://trends.google.com/trends/) is a popular tool for all manner of curiousity related to trends in search activity on the Google search engine: \n\n* what topics are trending? \n* what are trends for a given search term? \n* how does this compare to other terms? \n* what related terms are people using?\n* how does interest vary by region? \n\nAnd lots more.\n\nGoogle Trends has recently passed its 15th birthday, prompting a Google blog post on [\"15 Tips for Getting the Most Out of Google Trends\"](https://blog.google/products/search/15-tips-getting-most-out-google-trends/). One thing they noted right at the start is that they used Google Trends to identify search queries related to Google Trends in order to prioritize content for a blog post. This is a classic use case - **using Google Trends to fuel content decisions for your marketing**.\n\nAn important point is that Google Trends does not represent or translate to an *actual* number of searches. This search interest presented is **indexed between 0 and 100**, where **100 indicates the peak search interest during the particular date range** reported on. Everything is *relative* in Google Trends.\n\n## Going Beyond the Interface\n\n![Google Trends Interface](img/google-trends-interface-crypto-2023-04-16.png)\n\n(Google Trends example: [this query](https://trends.google.com/trends/explore?q=cryptocurrency,bitcoin,ethereum,stock%20market,real%20estate&hl=en) )\n\nGoogle Trends is a convenient, intuitive interface packed with info that can be great for playing around with, but comes with limitations for tracking trends over time, sharing with others, analyzing more deeply. You can **export** to a spreadsheet, but this comes with inefficiencies as well: you have to export data for each component in the interface separately and you may lose source information. And if you want to make any adjustments (change date range, geography, category, add terms) you have to go back in there and repeat the process.\n\n**Using R to work with Google Trends** can provide a more efficient solution if you want to:\n\n* quickly **import** Google Trends data into R for further analysis.\n* grab **all the modules** from the Google Trends interface at once (interest over time, geo data, related topics, related queries).\n* **repeat** Google Trends reporting to monitor trends over time.\n* **reproduce** the same Google Trends data in future, based on detailed record of your query.\n* **integrate** Google Trends reporting with other datasets or reporting structures.\n\n## Google Trends in R\n\nGoogle does not provide an official API for Google Trends but the [**gtrendsR**](https://cran.r-project.org/web/packages/gtrendsR/gtrendsR.pdf) R package created by Philippe Massicotte is a major helper in the accessing Google Trends data within R for reporting and analysis. Along with all the benefits of using R to process and analyze data, the gtrendsR package provides some big advantages over using the Google Trends Interface:\n\n* **Durability**: don't have to go to the interface and fetch the data each time, you have an on-going reference with source info. You have code that can be referred to, re-used, and shared with others.\n* **Scalability**: can expand on existing queries, going beyond the limit of 5 that are available in the tool.\n\n## Google Trends Parameters\n\nGoogle Trends has a number of parameters that can be used to fine-tune your search: date ranges, geo data, categories, Google properties. These are **available via the gtrendsR package**, corresponding to the options in the Google Trend online interface. You just have to know how to tap into them:\n\n* **Dates**:\n    + \"now 1-H\": last hour - by MINUTE\n    + \"now 4-H\": last 4 hrs - by MINUTE\n    + \"now 1-d\": last day - every 8 MINUTES\n    + \"now 7-d\": last 7 days - HOURLY data\n    + \"today 1-m\": last 30 days - DAILY data\n    + \"today 3-m\": last 90 days - DAILY data\n    + \"today 12-m\": last 12 months - WEEKLY data\n    + \"today+5-y\": last 5 yrs (default) - WEEKLY data\n    + \"all\" since beginning of Google Trends 2004\n    + \"YYYY-MM-DD YYYY-MM-DD\": custom start / end date - granularity will depend on time spans above\n    \n* **Geo**:\n   + use gtrendsR::**countries** to see complete list\n   + close to 110,000 options, including country / state / city\n   + code below shows how to filter for countries\n   + **geo=\"\"** for all countries\n\n* **Categories**:\n    + use gtrendsR::**categories**\n    + over 1,400 categories, with ids that are used in the query\n    + **category = 0** for all categories\n   \n* **Google properties**:\n    + specify one or more of 'web', 'news', 'images', 'froogle', 'youtube'\n    + gprop=c(\"web\", \"youtube\") as example for web and youtube search\n\n## Setup - Libraries\n\nThere's basically no setup required - no credentials, etc. Only need to load the gtrendsR package. *(I've pre-loaded other packages I'm using for general purpose, such as 'tidyverse', etc.)*\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(gtrendsR) ## package for accessing Google Trends - all you need to get going!\n```\n:::\n\n\n## Single term query\n\nUsing the gtrendsR package to get Google Trends for a single search term.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n## basic search\ngt_results <- gtrends(keyword='cryptocurrency',\n        geo=\"\",\n        time=\"now 7-d\",\n        gprop=c(\"web\"),\n        category=0)\n```\n:::\n\n\nThe query returns a bundle of 7 data frames with different info, reflecting what is shown in the Google Trends interface:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnames(gt_results)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"interest_over_time\"  \"interest_by_country\" \"interest_by_region\" \n[4] \"interest_by_dma\"     \"interest_by_city\"    \"related_topics\"     \n[7] \"related_queries\"    \n```\n:::\n:::\n\n\n(see screenshot of Google Trends interface for comparison)\n\n### Interest over time\n\nThe **'interest_over_time'** data frame is the main data object, with relative search volume for the selected search term, country, period, property, and category.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nchart_title <- \"Searches for: cryptocurrency\"\nsub_title <- \"Period: past 7 days; Geo: world; Prop: 'web'; Category: all\"\n\n## create chart based on search interest over time\ngt_results$interest_over_time %>% ggplot(aes(x=date, y=hits, color=keyword))+geom_line()+\n  labs(title=chart_title, subtitle=sub_title, x=\"\", y=\"\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/search-interest-over-time-1.png){width=864}\n:::\n:::\n\n\n### Related Topics\n\nThe 'related_topics' data frame holds data on queries related to the main search term ('cryptocurrency' in this case).\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstr(gt_results$related_topics)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n'data.frame':\t32 obs. of  5 variables:\n $ subject       : chr  \"100\" \"58\" \"58\" \"40\" ...\n $ related_topics: chr  \"top\" \"top\" \"top\" \"top\" ...\n $ value         : chr  \"Bitcoin\" \"Cryptocurrency exchange\" \"Investment\" \"Currency\" ...\n $ keyword       : chr  \"cryptocurrency\" \"cryptocurrency\" \"cryptocurrency\" \"cryptocurrency\" ...\n $ category      : int  0 0 0 0 0 0 0 0 0 0 ...\n - attr(*, \"reshapeLong\")=List of 4\n  ..$ varying:List of 1\n  .. ..$ value: chr \"top\"\n  .. ..- attr(*, \"v.names\")= chr \"value\"\n  .. ..- attr(*, \"times\")= chr \"top\"\n  ..$ v.names: chr \"value\"\n  ..$ idvar  : chr \"id\"\n  ..$ timevar: chr \"related_topics\"\n```\n:::\n:::\n\n\n* **subject**: relative value to main search term\n* **related_topics**: contains 'top' topics and 'rising' topics\n* **value**: related topic\n* **keyword**: main search term\n* **category**: search term category, if applicable\n\n\n::: {.cell}\n\n```{.r .cell-code}\n  chart_title <- \"crytopcurrency: related topics\"\n  ## \n  top <- gt_results$related_topics %>% filter(related_topics=='top' & !is.na(subject) &\n                                                subject!='<1')\n  ## convert value to factor and subject to numeric\n  top$value <- as.factor(top$value)\n  top$subject <- as.numeric(top$subject)\n  ## PLOT related topics\n  top %>% ggplot(aes(x=reorder(value, subject), y=subject))+geom_col()+\n  coord_flip()+\n    scale_y_continuous(expand=expansion(add=c(0,10)))+\n    labs(title=chart_title, y='', x='')\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/related-topics-1.png){width=864}\n:::\n:::\n\n\n### Related Queries\n\nRelated Queries module has similar structure to Related Topics:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstr(gt_results$related_queries)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n'data.frame':\t50 obs. of  5 variables:\n $ subject        : chr  \"100\" \"74\" \"69\" \"67\" ...\n $ related_queries: chr  \"top\" \"top\" \"top\" \"top\" ...\n $ value          : chr  \"crypto\" \"cryptocurrency price\" \"what is cryptocurrency\" \"bitcoin cryptocurrency\" ...\n $ keyword        : chr  \"cryptocurrency\" \"cryptocurrency\" \"cryptocurrency\" \"cryptocurrency\" ...\n $ category       : int  0 0 0 0 0 0 0 0 0 0 ...\n - attr(*, \"reshapeLong\")=List of 4\n  ..$ varying:List of 1\n  .. ..$ value: chr \"top\"\n  .. ..- attr(*, \"v.names\")= chr \"value\"\n  .. ..- attr(*, \"times\")= chr \"top\"\n  ..$ v.names: chr \"value\"\n  ..$ idvar  : chr \"id\"\n  ..$ timevar: chr \"related_queries\"\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n  chart_title <- \"crytopcurrency: related queries\"\n  ## \n  top <- gt_results$related_queries %>% filter(related_queries=='top' & !is.na(subject) &\n                                                subject!='<1')\n  ## convert value to factor and subject to numeric\n  top$value <- as.factor(top$value)\n  top$subject <- as.numeric(top$subject)\n  ## PLOT related topics\n  top %>% ggplot(aes(x=reorder(value, subject), y=subject))+geom_col()+\n  coord_flip()+\n    scale_y_continuous(expand=expansion(add=c(0,10)))+\n    labs(title=chart_title, y='', x='')\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/related-queries-1.png){width=864}\n:::\n:::\n\n\nYou can see right there the possibilities for content marketing: if you're a crypto currency blogger, for example, you may want to write about how to identify the 'best cryptocurrency', etc.\n\n## Multi-Term Query\n\nThe same approach used to query for single terms can be extended to multiple terms. The example below shows how to load up a collection of terms, as well as leveraging other variables for the query.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n## create list of multiple search terms\nsrch_term <- c(\"cryptocurrency\",\n               \"bitcoin\",\n               \"ethereum\",\n               \"stock market\",\n               \"real estate\")\nperiod <- \"today 12-m\"\nctry <- \"\" ## blank = world; based on world countries ISO code\nprop <- c(\"web\")\ncat <- 0 ## 0 = all categories\n\n## user-friendly versions of parameters for use in chart titles or other query descriptions\nctry_ <- ifelse(ctry==\"\",\"world\",ctry)\nprop_ <- paste0(prop, collapse=\", \")\ncat_ <- ifelse(cat==0,\"all\",cat)\n\n## use gtrendsR to call google trends API\n# works: c(\"cryptocurrency\",\"bitcoin\",\"ethereum\",\"stock market\",\"real estate\")\ngt_results_multi <- gtrends(keyword=srch_term,\n        geo=ctry,\n        time=period,\n        gprop=prop,\n        category=cat)\n## confirm keywords\n#table(gt_results$interest_over_time$keyword)\n```\n:::\n\n\nThe gt_results object returned is the same as with single query, just has more values for the 'keyword' variable in each data frame.\n\n### Interest over time\n\n\n::: {.cell}\n\n```{.r .cell-code}\nchart_title <- paste0(\"Search trends: \", paste(srch_term[1:2], collapse=\", \"), \" +\")\nsub_title <- paste0(\"Period: \", period, \"; Geo: \", ctry_, \"; Prop: \", prop_, \"; Category: \", cat_)\n\n## create chart based on search interest over time\nmulti <- gt_results_multi$interest_over_time %>% filter(hits!=0) %>% ggplot(aes(x=date, y=hits, color=keyword))+geom_line()+\n  scale_y_continuous(expand=expansion(add=c(0,0)))+\n  labs(title=chart_title, subtitle=sub_title, x=\"\", y=\"\")+\n  theme(legend.position = \"top\")\nggplotly(multi)\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"plotly html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-7073f0f35cd832459a99\" style=\"width:100%;height:325px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-7073f0f35cd832459a99\">{\"x\":{\"data\":[{\"x\":[1650153600,1650758400,1651363200,1651968000,1652572800,1653177600,1653782400,1654387200,1654992000,1655596800,1656201600,1656806400,1657411200,1658016000,1658620800,1659225600,1659830400,1660435200,1661040000,1661644800,1662249600,1662854400,1663459200,1664064000,1664668800,1665273600,1665878400,1666483200,1667088000,1667692800,1668297600,1668902400,1669507200,1670112000,1670716800,1671321600,1671926400,1672531200,1673136000,1673740800,1674345600,1674950400,1675555200,1676160000,1676764800,1677369600,1677974400,1678579200,1679184000,1679788800,1680393600,1680998400],\"y\":[34,36,36,84,53,46,39,37,100,76,55,51,44,46,39,37,35,33,32,32,32,32,34,31,28,27,25,27,27,48,45,34,30,28,29,27,27,28,31,35,33,32,28,31,29,27,28,40,41,34,32,35],\"text\":[\"date: 2022-04-17<br />hits:  34<br />keyword: bitcoin\",\"date: 2022-04-24<br />hits:  36<br />keyword: bitcoin\",\"date: 2022-05-01<br />hits:  36<br />keyword: bitcoin\",\"date: 2022-05-08<br />hits:  84<br />keyword: bitcoin\",\"date: 2022-05-15<br />hits:  53<br />keyword: bitcoin\",\"date: 2022-05-22<br />hits:  46<br />keyword: bitcoin\",\"date: 2022-05-29<br />hits:  39<br />keyword: bitcoin\",\"date: 2022-06-05<br />hits:  37<br />keyword: bitcoin\",\"date: 2022-06-12<br />hits: 100<br />keyword: bitcoin\",\"date: 2022-06-19<br />hits:  76<br />keyword: bitcoin\",\"date: 2022-06-26<br />hits:  55<br />keyword: bitcoin\",\"date: 2022-07-03<br />hits:  51<br />keyword: bitcoin\",\"date: 2022-07-10<br />hits:  44<br />keyword: bitcoin\",\"date: 2022-07-17<br />hits:  46<br />keyword: bitcoin\",\"date: 2022-07-24<br />hits:  39<br />keyword: bitcoin\",\"date: 2022-07-31<br />hits:  37<br />keyword: bitcoin\",\"date: 2022-08-07<br />hits:  35<br />keyword: bitcoin\",\"date: 2022-08-14<br />hits:  33<br />keyword: bitcoin\",\"date: 2022-08-21<br />hits:  32<br />keyword: bitcoin\",\"date: 2022-08-28<br />hits:  32<br />keyword: bitcoin\",\"date: 2022-09-04<br />hits:  32<br />keyword: bitcoin\",\"date: 2022-09-11<br />hits:  32<br />keyword: bitcoin\",\"date: 2022-09-18<br />hits:  34<br />keyword: bitcoin\",\"date: 2022-09-25<br />hits:  31<br />keyword: bitcoin\",\"date: 2022-10-02<br />hits:  28<br />keyword: bitcoin\",\"date: 2022-10-09<br />hits:  27<br />keyword: bitcoin\",\"date: 2022-10-16<br />hits:  25<br />keyword: bitcoin\",\"date: 2022-10-23<br />hits:  27<br />keyword: bitcoin\",\"date: 2022-10-30<br />hits:  27<br />keyword: bitcoin\",\"date: 2022-11-06<br />hits:  48<br />keyword: bitcoin\",\"date: 2022-11-13<br />hits:  45<br />keyword: bitcoin\",\"date: 2022-11-20<br />hits:  34<br />keyword: bitcoin\",\"date: 2022-11-27<br />hits:  30<br />keyword: bitcoin\",\"date: 2022-12-04<br />hits:  28<br />keyword: bitcoin\",\"date: 2022-12-11<br />hits:  29<br />keyword: bitcoin\",\"date: 2022-12-18<br />hits:  27<br />keyword: bitcoin\",\"date: 2022-12-25<br />hits:  27<br />keyword: bitcoin\",\"date: 2023-01-01<br />hits:  28<br />keyword: bitcoin\",\"date: 2023-01-08<br />hits:  31<br />keyword: bitcoin\",\"date: 2023-01-15<br />hits:  35<br />keyword: bitcoin\",\"date: 2023-01-22<br />hits:  33<br />keyword: bitcoin\",\"date: 2023-01-29<br />hits:  32<br />keyword: bitcoin\",\"date: 2023-02-05<br />hits:  28<br />keyword: bitcoin\",\"date: 2023-02-12<br />hits:  31<br />keyword: bitcoin\",\"date: 2023-02-19<br />hits:  29<br />keyword: bitcoin\",\"date: 2023-02-26<br />hits:  27<br />keyword: bitcoin\",\"date: 2023-03-05<br />hits:  28<br />keyword: bitcoin\",\"date: 2023-03-12<br />hits:  40<br />keyword: bitcoin\",\"date: 2023-03-19<br />hits:  41<br />keyword: bitcoin\",\"date: 2023-03-26<br />hits:  34<br />keyword: bitcoin\",\"date: 2023-04-02<br />hits:  32<br />keyword: bitcoin\",\"date: 2023-04-09<br />hits:  35<br />keyword: bitcoin\"],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"width\":1.88976377952756,\"color\":\"rgba(248,118,109,1)\",\"dash\":\"solid\"},\"hoveron\":\"points\",\"name\":\"bitcoin\",\"legendgroup\":\"bitcoin\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[1650153600,1650758400,1651363200,1651968000,1652572800,1653177600,1653782400,1654387200,1654992000,1655596800,1656201600,1656806400,1657411200,1658016000,1658620800,1659225600,1659830400,1660435200,1661040000,1661644800,1662249600,1662854400,1663459200,1664064000,1664668800,1665273600,1665878400,1666483200,1667088000,1667692800,1668297600,1668902400,1669507200,1670112000,1670716800,1671321600,1671926400,1672531200,1673136000,1673740800,1674345600,1674950400,1675555200,1676160000,1676764800,1677369600,1677974400,1678579200,1679184000,1679788800,1680393600,1680998400],\"y\":[4,3,3,6,4,4,3,3,4,3,3,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],\"text\":[\"date: 2022-04-17<br />hits:   4<br />keyword: cryptocurrency\",\"date: 2022-04-24<br />hits:   3<br />keyword: cryptocurrency\",\"date: 2022-05-01<br />hits:   3<br />keyword: cryptocurrency\",\"date: 2022-05-08<br />hits:   6<br />keyword: cryptocurrency\",\"date: 2022-05-15<br />hits:   4<br />keyword: cryptocurrency\",\"date: 2022-05-22<br />hits:   4<br />keyword: cryptocurrency\",\"date: 2022-05-29<br />hits:   3<br />keyword: cryptocurrency\",\"date: 2022-06-05<br />hits:   3<br />keyword: cryptocurrency\",\"date: 2022-06-12<br />hits:   4<br />keyword: cryptocurrency\",\"date: 2022-06-19<br />hits:   3<br />keyword: cryptocurrency\",\"date: 2022-06-26<br />hits:   3<br />keyword: cryptocurrency\",\"date: 2022-07-03<br />hits:   2<br />keyword: cryptocurrency\",\"date: 2022-07-10<br />hits:   2<br />keyword: cryptocurrency\",\"date: 2022-07-17<br />hits:   2<br />keyword: cryptocurrency\",\"date: 2022-07-24<br />hits:   2<br />keyword: cryptocurrency\",\"date: 2022-07-31<br />hits:   2<br />keyword: cryptocurrency\",\"date: 2022-08-07<br />hits:   2<br />keyword: cryptocurrency\",\"date: 2022-08-14<br />hits:   2<br />keyword: cryptocurrency\",\"date: 2022-08-21<br />hits:   2<br />keyword: cryptocurrency\",\"date: 2022-08-28<br />hits:   2<br />keyword: cryptocurrency\",\"date: 2022-09-04<br />hits:   2<br />keyword: cryptocurrency\",\"date: 2022-09-11<br />hits:   2<br />keyword: cryptocurrency\",\"date: 2022-09-18<br />hits:   2<br />keyword: cryptocurrency\",\"date: 2022-09-25<br />hits:   2<br />keyword: cryptocurrency\",\"date: 2022-10-02<br />hits:   2<br />keyword: cryptocurrency\",\"date: 2022-10-09<br />hits:   2<br />keyword: cryptocurrency\",\"date: 2022-10-16<br />hits:   2<br />keyword: cryptocurrency\",\"date: 2022-10-23<br />hits:   2<br />keyword: cryptocurrency\",\"date: 2022-10-30<br />hits:   2<br />keyword: cryptocurrency\",\"date: 2022-11-06<br />hits:   3<br />keyword: cryptocurrency\",\"date: 2022-11-13<br />hits:   3<br />keyword: cryptocurrency\",\"date: 2022-11-20<br />hits:   2<br />keyword: cryptocurrency\",\"date: 2022-11-27<br />hits:   2<br />keyword: cryptocurrency\",\"date: 2022-12-04<br />hits:   2<br />keyword: cryptocurrency\",\"date: 2022-12-11<br />hits:   2<br />keyword: cryptocurrency\",\"date: 2022-12-18<br />hits:   2<br />keyword: cryptocurrency\",\"date: 2022-12-25<br />hits:   2<br />keyword: cryptocurrency\",\"date: 2023-01-01<br />hits:   2<br />keyword: cryptocurrency\",\"date: 2023-01-08<br />hits:   2<br />keyword: cryptocurrency\",\"date: 2023-01-15<br />hits:   2<br />keyword: cryptocurrency\",\"date: 2023-01-22<br />hits:   2<br />keyword: cryptocurrency\",\"date: 2023-01-29<br />hits:   2<br />keyword: cryptocurrency\",\"date: 2023-02-05<br />hits:   2<br />keyword: cryptocurrency\",\"date: 2023-02-12<br />hits:   2<br />keyword: cryptocurrency\",\"date: 2023-02-19<br />hits:   2<br />keyword: cryptocurrency\",\"date: 2023-02-26<br />hits:   2<br />keyword: cryptocurrency\",\"date: 2023-03-05<br />hits:   2<br />keyword: cryptocurrency\",\"date: 2023-03-12<br />hits:   2<br />keyword: cryptocurrency\",\"date: 2023-03-19<br />hits:   2<br />keyword: cryptocurrency\",\"date: 2023-03-26<br />hits:   2<br />keyword: cryptocurrency\",\"date: 2023-04-02<br />hits:   2<br />keyword: cryptocurrency\",\"date: 2023-04-09<br />hits:   2<br />keyword: cryptocurrency\"],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"width\":1.88976377952756,\"color\":\"rgba(163,165,0,1)\",\"dash\":\"solid\"},\"hoveron\":\"points\",\"name\":\"cryptocurrency\",\"legendgroup\":\"cryptocurrency\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[1650153600,1650758400,1651363200,1651968000,1652572800,1653177600,1653782400,1654387200,1654992000,1655596800,1656201600,1656806400,1657411200,1658016000,1658620800,1659225600,1659830400,1660435200,1661040000,1661644800,1662249600,1662854400,1663459200,1664064000,1664668800,1665273600,1665878400,1666483200,1667088000,1667692800,1668297600,1668902400,1669507200,1670112000,1670716800,1671321600,1671926400,1672531200,1673136000,1673740800,1674345600,1674950400,1675555200,1676160000,1676764800,1677369600,1677974400,1678579200,1679184000,1679788800,1680393600,1680998400],\"y\":[8,8,7,13,9,8,8,8,18,12,9,8,8,11,9,9,10,9,8,8,8,16,10,7,6,5,5,6,6,9,7,6,5,4,5,5,4,4,5,7,5,5,5,5,5,4,4,6,6,5,5,7],\"text\":[\"date: 2022-04-17<br />hits:   8<br />keyword: ethereum\",\"date: 2022-04-24<br />hits:   8<br />keyword: ethereum\",\"date: 2022-05-01<br />hits:   7<br />keyword: ethereum\",\"date: 2022-05-08<br />hits:  13<br />keyword: ethereum\",\"date: 2022-05-15<br />hits:   9<br />keyword: ethereum\",\"date: 2022-05-22<br />hits:   8<br />keyword: ethereum\",\"date: 2022-05-29<br />hits:   8<br />keyword: ethereum\",\"date: 2022-06-05<br />hits:   8<br />keyword: ethereum\",\"date: 2022-06-12<br />hits:  18<br />keyword: ethereum\",\"date: 2022-06-19<br />hits:  12<br />keyword: ethereum\",\"date: 2022-06-26<br />hits:   9<br />keyword: ethereum\",\"date: 2022-07-03<br />hits:   8<br />keyword: ethereum\",\"date: 2022-07-10<br />hits:   8<br />keyword: ethereum\",\"date: 2022-07-17<br />hits:  11<br />keyword: ethereum\",\"date: 2022-07-24<br />hits:   9<br />keyword: ethereum\",\"date: 2022-07-31<br />hits:   9<br />keyword: ethereum\",\"date: 2022-08-07<br />hits:  10<br />keyword: ethereum\",\"date: 2022-08-14<br />hits:   9<br />keyword: ethereum\",\"date: 2022-08-21<br />hits:   8<br />keyword: ethereum\",\"date: 2022-08-28<br />hits:   8<br />keyword: ethereum\",\"date: 2022-09-04<br />hits:   8<br />keyword: ethereum\",\"date: 2022-09-11<br />hits:  16<br />keyword: ethereum\",\"date: 2022-09-18<br />hits:  10<br />keyword: ethereum\",\"date: 2022-09-25<br />hits:   7<br />keyword: ethereum\",\"date: 2022-10-02<br />hits:   6<br />keyword: ethereum\",\"date: 2022-10-09<br />hits:   5<br />keyword: ethereum\",\"date: 2022-10-16<br />hits:   5<br />keyword: ethereum\",\"date: 2022-10-23<br />hits:   6<br />keyword: ethereum\",\"date: 2022-10-30<br />hits:   6<br />keyword: ethereum\",\"date: 2022-11-06<br />hits:   9<br />keyword: ethereum\",\"date: 2022-11-13<br />hits:   7<br />keyword: ethereum\",\"date: 2022-11-20<br />hits:   6<br />keyword: ethereum\",\"date: 2022-11-27<br />hits:   5<br />keyword: ethereum\",\"date: 2022-12-04<br />hits:   4<br />keyword: ethereum\",\"date: 2022-12-11<br />hits:   5<br />keyword: ethereum\",\"date: 2022-12-18<br />hits:   5<br />keyword: ethereum\",\"date: 2022-12-25<br />hits:   4<br />keyword: ethereum\",\"date: 2023-01-01<br />hits:   4<br />keyword: ethereum\",\"date: 2023-01-08<br />hits:   5<br />keyword: ethereum\",\"date: 2023-01-15<br />hits:   7<br />keyword: ethereum\",\"date: 2023-01-22<br />hits:   5<br />keyword: ethereum\",\"date: 2023-01-29<br />hits:   5<br />keyword: ethereum\",\"date: 2023-02-05<br />hits:   5<br />keyword: ethereum\",\"date: 2023-02-12<br />hits:   5<br />keyword: ethereum\",\"date: 2023-02-19<br />hits:   5<br />keyword: ethereum\",\"date: 2023-02-26<br />hits:   4<br />keyword: ethereum\",\"date: 2023-03-05<br />hits:   4<br />keyword: ethereum\",\"date: 2023-03-12<br />hits:   6<br />keyword: ethereum\",\"date: 2023-03-19<br />hits:   6<br />keyword: ethereum\",\"date: 2023-03-26<br />hits:   5<br />keyword: ethereum\",\"date: 2023-04-02<br />hits:   5<br />keyword: ethereum\",\"date: 2023-04-09<br />hits:   7<br />keyword: ethereum\"],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"width\":1.88976377952756,\"color\":\"rgba(0,191,125,1)\",\"dash\":\"solid\"},\"hoveron\":\"points\",\"name\":\"ethereum\",\"legendgroup\":\"ethereum\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[1650153600,1650758400,1651363200,1651968000,1652572800,1653177600,1653782400,1654387200,1654992000,1655596800,1656201600,1656806400,1657411200,1658016000,1658620800,1659225600,1659830400,1660435200,1661040000,1661644800,1662249600,1662854400,1663459200,1664064000,1664668800,1665273600,1665878400,1666483200,1667088000,1667692800,1668297600,1668902400,1669507200,1670112000,1670716800,1671321600,1671926400,1672531200,1673136000,1673740800,1674345600,1674950400,1675555200,1676160000,1676764800,1677369600,1677974400,1678579200,1679184000,1679788800,1680393600,1680998400],\"y\":[29,31,29,27,27,27,26,27,27,25,27,27,27,27,29,29,28,28,28,27,26,27,26,24,24,24,23,24,25,23,23,20,22,23,21,19,21,25,25,25,25,25,24,25,27,25,24,24,26,26,24,26],\"text\":[\"date: 2022-04-17<br />hits:  29<br />keyword: real estate\",\"date: 2022-04-24<br />hits:  31<br />keyword: real estate\",\"date: 2022-05-01<br />hits:  29<br />keyword: real estate\",\"date: 2022-05-08<br />hits:  27<br />keyword: real estate\",\"date: 2022-05-15<br />hits:  27<br />keyword: real estate\",\"date: 2022-05-22<br />hits:  27<br />keyword: real estate\",\"date: 2022-05-29<br />hits:  26<br />keyword: real estate\",\"date: 2022-06-05<br />hits:  27<br />keyword: real estate\",\"date: 2022-06-12<br />hits:  27<br />keyword: real estate\",\"date: 2022-06-19<br />hits:  25<br />keyword: real estate\",\"date: 2022-06-26<br />hits:  27<br />keyword: real estate\",\"date: 2022-07-03<br />hits:  27<br />keyword: real estate\",\"date: 2022-07-10<br />hits:  27<br />keyword: real estate\",\"date: 2022-07-17<br />hits:  27<br />keyword: real estate\",\"date: 2022-07-24<br />hits:  29<br />keyword: real estate\",\"date: 2022-07-31<br />hits:  29<br />keyword: real estate\",\"date: 2022-08-07<br />hits:  28<br />keyword: real estate\",\"date: 2022-08-14<br />hits:  28<br />keyword: real estate\",\"date: 2022-08-21<br />hits:  28<br />keyword: real estate\",\"date: 2022-08-28<br />hits:  27<br />keyword: real estate\",\"date: 2022-09-04<br />hits:  26<br />keyword: real estate\",\"date: 2022-09-11<br />hits:  27<br />keyword: real estate\",\"date: 2022-09-18<br />hits:  26<br />keyword: real estate\",\"date: 2022-09-25<br />hits:  24<br />keyword: real estate\",\"date: 2022-10-02<br />hits:  24<br />keyword: real estate\",\"date: 2022-10-09<br />hits:  24<br />keyword: real estate\",\"date: 2022-10-16<br />hits:  23<br />keyword: real estate\",\"date: 2022-10-23<br />hits:  24<br />keyword: real estate\",\"date: 2022-10-30<br />hits:  25<br />keyword: real estate\",\"date: 2022-11-06<br />hits:  23<br />keyword: real estate\",\"date: 2022-11-13<br />hits:  23<br />keyword: real estate\",\"date: 2022-11-20<br />hits:  20<br />keyword: real estate\",\"date: 2022-11-27<br />hits:  22<br />keyword: real estate\",\"date: 2022-12-04<br />hits:  23<br />keyword: real estate\",\"date: 2022-12-11<br />hits:  21<br />keyword: real estate\",\"date: 2022-12-18<br />hits:  19<br />keyword: real estate\",\"date: 2022-12-25<br />hits:  21<br />keyword: real estate\",\"date: 2023-01-01<br />hits:  25<br />keyword: real estate\",\"date: 2023-01-08<br />hits:  25<br />keyword: real estate\",\"date: 2023-01-15<br />hits:  25<br />keyword: real estate\",\"date: 2023-01-22<br />hits:  25<br />keyword: real estate\",\"date: 2023-01-29<br />hits:  25<br />keyword: real estate\",\"date: 2023-02-05<br />hits:  24<br />keyword: real estate\",\"date: 2023-02-12<br />hits:  25<br />keyword: real estate\",\"date: 2023-02-19<br />hits:  27<br />keyword: real estate\",\"date: 2023-02-26<br />hits:  25<br />keyword: real estate\",\"date: 2023-03-05<br />hits:  24<br />keyword: real estate\",\"date: 2023-03-12<br />hits:  24<br />keyword: real estate\",\"date: 2023-03-19<br />hits:  26<br />keyword: real estate\",\"date: 2023-03-26<br />hits:  26<br />keyword: real estate\",\"date: 2023-04-02<br />hits:  24<br />keyword: real estate\",\"date: 2023-04-09<br />hits:  26<br />keyword: real estate\"],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"width\":1.88976377952756,\"color\":\"rgba(0,176,246,1)\",\"dash\":\"solid\"},\"hoveron\":\"points\",\"name\":\"real estate\",\"legendgroup\":\"real estate\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[1650153600,1650758400,1651363200,1651968000,1652572800,1653177600,1653782400,1654387200,1654992000,1655596800,1656201600,1656806400,1657411200,1658016000,1658620800,1659225600,1659830400,1660435200,1661040000,1661644800,1662249600,1662854400,1663459200,1664064000,1664668800,1665273600,1665878400,1666483200,1667088000,1667692800,1668297600,1668902400,1669507200,1670112000,1670716800,1671321600,1671926400,1672531200,1673136000,1673740800,1674345600,1674950400,1675555200,1676160000,1676764800,1677369600,1677974400,1678579200,1679184000,1679788800,1680393600,1680998400],\"y\":[9,11,12,15,12,9,8,9,14,11,8,7,7,7,8,8,8,8,8,8,7,10,9,10,9,9,8,9,8,10,8,7,7,7,7,8,9,8,7,8,7,8,7,7,8,7,8,10,9,7,9,8],\"text\":[\"date: 2022-04-17<br />hits:   9<br />keyword: stock market\",\"date: 2022-04-24<br />hits:  11<br />keyword: stock market\",\"date: 2022-05-01<br />hits:  12<br />keyword: stock market\",\"date: 2022-05-08<br />hits:  15<br />keyword: stock market\",\"date: 2022-05-15<br />hits:  12<br />keyword: stock market\",\"date: 2022-05-22<br />hits:   9<br />keyword: stock market\",\"date: 2022-05-29<br />hits:   8<br />keyword: stock market\",\"date: 2022-06-05<br />hits:   9<br />keyword: stock market\",\"date: 2022-06-12<br />hits:  14<br />keyword: stock market\",\"date: 2022-06-19<br />hits:  11<br />keyword: stock market\",\"date: 2022-06-26<br />hits:   8<br />keyword: stock market\",\"date: 2022-07-03<br />hits:   7<br />keyword: stock market\",\"date: 2022-07-10<br />hits:   7<br />keyword: stock market\",\"date: 2022-07-17<br />hits:   7<br />keyword: stock market\",\"date: 2022-07-24<br />hits:   8<br />keyword: stock market\",\"date: 2022-07-31<br />hits:   8<br />keyword: stock market\",\"date: 2022-08-07<br />hits:   8<br />keyword: stock market\",\"date: 2022-08-14<br />hits:   8<br />keyword: stock market\",\"date: 2022-08-21<br />hits:   8<br />keyword: stock market\",\"date: 2022-08-28<br />hits:   8<br />keyword: stock market\",\"date: 2022-09-04<br />hits:   7<br />keyword: stock market\",\"date: 2022-09-11<br />hits:  10<br />keyword: stock market\",\"date: 2022-09-18<br />hits:   9<br />keyword: stock market\",\"date: 2022-09-25<br />hits:  10<br />keyword: stock market\",\"date: 2022-10-02<br />hits:   9<br />keyword: stock market\",\"date: 2022-10-09<br />hits:   9<br />keyword: stock market\",\"date: 2022-10-16<br />hits:   8<br />keyword: stock market\",\"date: 2022-10-23<br />hits:   9<br />keyword: stock market\",\"date: 2022-10-30<br />hits:   8<br />keyword: stock market\",\"date: 2022-11-06<br />hits:  10<br />keyword: stock market\",\"date: 2022-11-13<br />hits:   8<br />keyword: stock market\",\"date: 2022-11-20<br />hits:   7<br />keyword: stock market\",\"date: 2022-11-27<br />hits:   7<br />keyword: stock market\",\"date: 2022-12-04<br />hits:   7<br />keyword: stock market\",\"date: 2022-12-11<br />hits:   7<br />keyword: stock market\",\"date: 2022-12-18<br />hits:   8<br />keyword: stock market\",\"date: 2022-12-25<br />hits:   9<br />keyword: stock market\",\"date: 2023-01-01<br />hits:   8<br />keyword: stock market\",\"date: 2023-01-08<br />hits:   7<br />keyword: stock market\",\"date: 2023-01-15<br />hits:   8<br />keyword: stock market\",\"date: 2023-01-22<br />hits:   7<br />keyword: stock market\",\"date: 2023-01-29<br />hits:   8<br />keyword: stock market\",\"date: 2023-02-05<br />hits:   7<br />keyword: stock market\",\"date: 2023-02-12<br />hits:   7<br />keyword: stock market\",\"date: 2023-02-19<br />hits:   8<br />keyword: stock market\",\"date: 2023-02-26<br />hits:   7<br />keyword: stock market\",\"date: 2023-03-05<br />hits:   8<br />keyword: stock market\",\"date: 2023-03-12<br />hits:  10<br />keyword: stock market\",\"date: 2023-03-19<br />hits:   9<br />keyword: stock market\",\"date: 2023-03-26<br />hits:   7<br />keyword: stock market\",\"date: 2023-04-02<br />hits:   9<br />keyword: stock market\",\"date: 2023-04-09<br />hits:   8<br />keyword: stock market\"],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"width\":1.88976377952756,\"color\":\"rgba(231,107,243,1)\",\"dash\":\"solid\"},\"hoveron\":\"points\",\"name\":\"stock market\",\"legendgroup\":\"stock market\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null}],\"layout\":{\"margin\":{\"t\":48.1461187214612,\"r\":7.30593607305936,\"b\":29.9543378995434,\"l\":28.4931506849315},\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.6118721461187},\"title\":{\"text\":\"Search trends: cryptocurrency, bitcoin +\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":17.5342465753425},\"x\":0,\"xref\":\"paper\"},\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[1648611360,1682540640],\"tickmode\":\"array\",\"ticktext\":[\"Apr 2022\",\"Jul 2022\",\"Oct 2022\",\"Jan 2023\",\"Apr 2023\"],\"tickvals\":[1648771200,1656633600,1664582400,1672531200,1680307200],\"categoryorder\":\"array\",\"categoryarray\":[\"Apr 2022\",\"Jul 2022\",\"Oct 2022\",\"Jan 2023\",\"Apr 2023\"],\"nticks\":null,\"ticks\":\"\",\"tickcolor\":null,\"ticklen\":3.65296803652968,\"tickwidth\":0,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.689497716895},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(235,235,235,1)\",\"gridwidth\":0.66417600664176,\"zeroline\":false,\"anchor\":\"y\",\"title\":{\"text\":\"\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.6118721461187}},\"hoverformat\":\".2f\"},\"yaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[2,100],\"tickmode\":\"array\",\"ticktext\":[\"25\",\"50\",\"75\",\"100\"],\"tickvals\":[25,50,75,100],\"categoryorder\":\"array\",\"categoryarray\":[\"25\",\"50\",\"75\",\"100\"],\"nticks\":null,\"ticks\":\"\",\"tickcolor\":null,\"ticklen\":3.65296803652968,\"tickwidth\":0,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.689497716895},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(235,235,235,1)\",\"gridwidth\":0.66417600664176,\"zeroline\":false,\"anchor\":\"x\",\"title\":{\"text\":\"\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.6118721461187}},\"hoverformat\":\".2f\"},\"shapes\":[{\"type\":\"rect\",\"fillcolor\":null,\"line\":{\"color\":null,\"width\":0,\"linetype\":[]},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0,\"x1\":1,\"y0\":0,\"y1\":1}],\"showlegend\":true,\"legend\":{\"bgcolor\":null,\"bordercolor\":null,\"borderwidth\":0,\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":11.689497716895},\"title\":{\"text\":\"keyword\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.6118721461187}}},\"hovermode\":\"closest\",\"barmode\":\"relative\"},\"config\":{\"doubleClick\":\"reset\",\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"source\":\"A\",\"attrs\":{\"ba5263807b14\":{\"x\":{},\"y\":{},\"colour\":{},\"type\":\"scatter\"}},\"cur_data\":\"ba5263807b14\",\"visdat\":{\"ba5263807b14\":[\"function (y) \",\"x\"]},\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n\nPeriod: today 12-m (2023-04-16); Geo: world; Prop: web; Category: all\n:::\n:::\n\n\nVery similar results to chart shown at the top. Average search index for these keywords over this period also the same as shown in Google Trends interface.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngt_results_multi$interest_over_time %>% filter(hits!=0) %>% group_by(keyword) %>%\n  summarize(avg=round(mean(hits))) %>% \n  ggplot(aes(x=keyword, y=avg, label=avg, fill=keyword))+\n  geom_col()+\n  #geom_col(fill='navyblue')+\n  geom_hline(yintercept = 0)+\n  geom_text(size=6, nudge_y = 3)+\n  labs(title=\"Average Search by Keyword\", x=\"\",y=\"\")+\n  theme(axis.text.y = element_blank(),\n        axis.text.x = element_text(size=12),\n        panel.grid = element_blank(),\n        legend.position = \"none\"\n  )\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-6-1.png){width=864}\n:::\n:::\n\n\nAs noted, there is the same limitation as the interface of *maximum five terms* at a time. Of course, one of the beauties of doing thing programmatically is that provides opportunities for combining queries to go beyond five. For that, you need to make sure there is a common term in each queries to calculate the relative values. This is a topic for another blog post.\n\n## Search Terms vs Search 'Topics'\n\nTip #3 in [\"15 Tips for Getting the Most Out of Google Trends\"](https://blog.google/products/search/15-tips-getting-most-out-google-trends/) mentions the importance of **choosing search 'topics' when available** for a given search term. \n\nUsing a topic version of the term has benefits, but also complications for programmatic access:\n\n* you need to go to Google Trends to check if a topic is available (it may also be called something different than 'topic', like 'currency' for the term 'Bitcoin').\n* the topic term is an indecipherable code, as circled in the URL in the browser bar above.\n* comparisons may be skewed if mixing terms and topics.\n\n![Google Trends search type example - full](img/google-trends-search-type-example-full.png)",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../../site_libs/htmlwidgets-1.6.2/htmlwidgets.js\"></script>\n<script src=\"../../site_libs/plotly-binding-4.10.1/plotly.js\"></script>\n<script src=\"../../site_libs/typedarray-0.1/typedarray.min.js\"></script>\n<script src=\"../../site_libs/jquery-3.5.1/jquery.min.js\"></script>\n<link href=\"../../site_libs/crosstalk-1.2.0/css/crosstalk.min.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/crosstalk-1.2.0/js/crosstalk.min.js\"></script>\n<link href=\"../../site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/plotly-main-2.11.1/plotly-latest.min.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}